(()=>{"use strict";var t,i,s,h,e={1651:(t,i,s)=>{s.d(i,{K:()=>D});var h=s(1120),e=s(4583),n=s(2901),r=s(1069),o=s(7046),l=(s(9896),s(6666)),a=s(3045),c=s(818),f=s(670),u=s(8268),d=s(3867),w=s(7854),y=s(8950),A=s(1302),p=s(9298),m=s(8665),I=s(1312),g=s(3819),E=s(8317),_=s(9234),C=s(1908),T=s(123),O=s(5637),v=s(6948),b=s(2164),L=s(8738),R=s(3764),S=s(8534),M=s(6730),k=s(2604),x=s(5226);class D extends o.A{static tt=225;static it=10;static portOffset=0;static members=!0;static st=!1;static ht='';static et='';static nt=!1;static rt=!1;static ot=2;static lt=!1;static ct='https://raw.githubusercontent.com/2004scape/Server/main';static exponent=58778699976184461502525193738213253649000149147835990136706041084440742975821n;static ft=7162900525229798032761816791230527296329313291232324290237849263501208207972894053929065636522363163621000728841182238772712427862772219676577293600221789n;static ut=0;static dt=0;static wt=0;static yt=0;static At=0;static It=0;static gt=0;static Et=0;static _t=0;static Ct=0;static Tt=0;static Ot=0;static vt=0;static bt=0;static Lt=0;static Rt=()=>{a.A.st=!1,e.A.st=!1,D.st=!1,c.A.st=!1};static St=()=>{a.A.st=!0,e.A.st=!0,D.st=!0,c.A.st=!0};Mt=2048;kt=2047;xt=!1;Dt=!1;Nt=!1;Pt=!1;db=null;Ft=0;Ut=[];stream=null;in=r.A.Bt(1);Gt=r.A.Bt(1);Ht=r.A.Bt(1);Wt=0n;Yt=0;Vt=0;Kt=6e5;Xt=0;jt=0;zt=null;Zt=0;packetSize=0;qt=0;$t=0;Jt=0;Qt=null;ti=!0;ii=0;si=0;hi=null;ei=null;ni=null;ri=null;oi=null;li=null;ai=null;ci=null;fi=null;ui=null;di=null;wi='';yi='';username='';password='';Ai=null;pi=null;mi=null;Ii=null;gi=[];Ei=!1;_i=null;Ci=null;Ti=null;Oi=null;vi=null;bi=null;Li=null;Ri=null;Si=null;Mi=null;ki=new Int32Array(256);xi=0;Di=0;Ni=0;Pi=null;Fi=null;Ui=null;Bi=null;Gi=null;Hi=null;Wi=null;Yi=null;Vi=null;Ki=null;Xi=null;ji=null;zi=null;Zi=null;qi=null;$i=null;Ji=null;Qi=null;ts=null;ss=null;hs=null;es=new Int32Array(33);ns=new Int32Array(33);rs=new Int32Array(151);os=new Int32Array(151);ls=null;cs=null;fs=null;us=null;ds=null;ws=null;ys=new d.As(13,null);ps=null;Is=null;gs=new d.As(50,null);Es=new d.As(50,null);_s=new d.As(20,null);Cs=new d.As(20,null);Ts=null;Os=new d.As(8,null);vs=null;bs=null;Ls=null;Rs=null;Ss=null;Ms=null;ks=null;xs=null;Ds=null;Ns=null;Ps=null;Fs=null;Us=null;Bs=null;Gs=null;Hs=null;Ws=null;Ys=null;Vs=new d.As(1e3,null);Ks=!1;Xs=!1;js=!1;zs=!1;Zs=-1;qs=0;$s=0;Js=0;Qs=0;th=0;ih=0;sh=!1;hh=0;eh=0;nh=0;rh=0;oh=0;lh=0;ah=[];fh=-1;uh=-1;dh=new h.A;wh=78;yh=0;Ah=0;ph=[];mh=0;Ih=0;gh=0;Eh=0;_h=0;Ch=0;Th=0;Oh=0;bh=[];Lh=[];Rh=[];Sh=[];Mh=null;kh=-1;xh=3;Dh=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];Nh=0;Ph=0;Fh=0;Uh=!1;Bh=0;Gh=!1;Hh='';Wh='';Yh=0;Vh='';Kh=!1;Xh=-1;jh=new d.As(100,null);zh=new d.As(100,null);messageType=new Int32Array(100);Zh=new Int32Array(100);qh=0;$h=0;Jh=0;Qh='';te=0;ie=0;se=0;he=0;ee=0;ne=0;re=0;oe=0;le=0;ae=!1;ce=0;fe=0;ue=0;de=0;we=null;ye=0;Ae=0;pe=0;me=0;Ie=!1;ge=[];Ee=[];_e=0;Ce=0;Te=0;Oe=null;ve=0;be=new Int32Array(500);Le=new Int32Array(500);Re=new Int32Array(500);Se=new Int32Array(500);Me=0;ke=0;xe=0;De='';Ne=!1;Pe=-1;Fe=0;Ue=0;Be=0;Ge=0;He=0;We=new Int32Array(1e3);Ye=new Int32Array(1e3);Ve=null;Ke=0;Xe=0;je=0;ze=0;Ze=0;qe=!1;$e=0;Je=0;Qe=0;tn=0;sn=2;hn=2;en=1;nn=new Int32Array(5);rn=new d.As(5,!1);ln=new Int32Array(5);an=new Int32Array(5);cn=new Int32Array(5);fn=0;un=0;dn=0;wn=0;yn=0;An=0;pn=0;mn=0;In=0;gn=1;En=2;_n=-1;Cn=0;Tn=0;On=0;vn=0;bn=0;Ln=0;Rn=null;Sn=null;Mn=null;kn=0;xn=0;Dn=new Int8Array(16384);Nn=new d.As(f.A.Pn,null);Fn=0;Un=0;Bn=128;Gn=0;Hn=0;Wn=0;Yn=0;Vn=0;Kn=null;Xn=null;jn=new d.zn(f.A.Zn,f.A.Zn);qn=0;$n=0;Jn=0;Qn=0;tr=0;ir=0;sr=0;hr=0;er=0;nr=0;rr=0;lr=0;ar=new d.As(this.Mt,null);cr=0;ur=new Int32Array(this.Mt);dr=0;wr=0;yr=new Int32Array(this.Mt);Ar=new Int32Array(1e3);pr=new d.As(this.Mt,null);mr=new d.As(8192,null);Ir=0;gr=new Int32Array(8192);Er=new l.A;_r=new l.A;Cr=new l.A;Tr=new l.A;Or=new d.vr(f.A.Pn,f.A.Zn,f.A.Zn,null);br=new l.A;Lr=new Int32Array(4e3);Rr=new Int32Array(4e3);Sr=new Int32Array(f.A.Zn*f.A.Zn);Mr=new Int32Array(f.A.Zn*f.A.Zn);kr=0;Dr=null;Nr=0;Pr=0;Fr=-1;Ur=0;Br=0;Gr=0;Hr=0;Wr=!1;Yr=!0;Vr=!1;Kr=new Int32Array(7);Xr=new Int32Array(5);jr=0;zr=0;static Zr=50;qr=new Int32Array(D.Zr);$r=new Int32Array(D.Zr);Jr=new Int32Array(D.Zr);Qr=new Int32Array(D.Zr);io=new Int32Array(D.Zr);so=new Int32Array(D.Zr);ho=new Int32Array(D.Zr);eo=new d.As(D.Zr,null);no=new d.As(100,null);ro=new BigInt64Array(100);oo=new Int32Array(100);lo=null;ao=0;co=!0;fo=new Int32Array(50);uo=new Int32Array(50);do=new Int32Array(50);wo=192;yo=-1;Ao=-1;po=0;mo=0;Io=0;Eo=!0;_o=null;Co=0;To=0;Oo=192;vo=void 0;bo=!1;host=null;Lo=null;Ro=new d.As(16,null);So=0;Mo=!1;ko=()=>{try{this.stream&&this.stream.close()}catch(t){}this.Lo&&'998'===D.getParameter('world')&&this.Lo.xo?.send(JSON.stringify({type:'close',id:this.Lo.Do})),this.stream=null,(0,T.No)(!1),this.Gt=null,this.Ht=null,this.in=null,this.Mn=null,this.Rn=null,this.Sn=null,this.Kn=null,this.Xn=null,this.Ve=null,this.Nn=null,this.Sr=null,this.Mr=null,this.Lr=null,this.Rr=null,this.Dn=null,this.Fi=null,this.Ui=null,this.Bi=null,this.Gi=null,this.Hi=null,this.Wi=null,this.Yi=null,this.Vi=null,this.Ki=null,this.Xi=null,this.ji=null,this.zi=null,this.Zi=null,this.qi=null,this.$i=null,this.Ji=null,this.Qi=null,this.ls=null,this.fs=null,this.cs=null,this.us=null,this.ds=null,this.ws=null,this.ys=null,this.ks=null,this.xs=null,this.Ds=null,this.Ns=null,this.Ps=null,this.Fs=null,this.Us=null,this.Bs=null,this.Gs=null,this.Hs=null,this.Is=null,this._s=null,this.Cs=null,this.Os=null,this.vs=null,this.bs=null,this.Ls=null,this.Rs=null,this.gs=null,this.Es=null,this.jn=null,this.ar=null,this.ur=null,this.yr=null,this.pr=null,this.Ar=null,this.mr=null,this.gr=null,this.Or=null,this.br=null,this.Tr=null,this.Er=null,this._r=null,this.Cr=null,this.Re=null,this.Se=null,this.be=null,this.Le=null,this.ah=null,this.ge=null,this.We=null,this.Ye=null,this.Vs=null,this.ps=null,this.no=null,this.ro=null,this.oo=null,this.ri=null,this.oi=null,this.hi=null,this.ei=null,this.ni=null,this.li=null,this.ai=null,this.ci=null,this.fi=null,this.Po(),O.A.ko(),v.A.ko(),A.A.ko(),b.A.Fo=null,E.A.Fo=null,h.A.Fo=null,I.A.Fo=null,L.A.Fo=null,L.A.Uo=null,R.A.Fo=null,this.Bo=null,u.A.Uo=null,e.A.ko(),a.A.ko(),m.A.ko(),S.A.Fo=[],M.A.Fo=[]};Go(){return this.ii}Ho(){return this.Kh}Wo(){return this.Gh}Yo(){return this.uh}Vo(){return this.Zs}Po=()=>{this.Ei=!1,this.Pi&&(clearInterval(this.Pi),this.Pi=null),this.ui=null,this.di=null,this.gi=[],this.Li=null,this.Ri=null,this.Si=null,this.Mi=null,this.Oi=null,this.Ti=null,this.vi=null,this.bi=null,this._i=null,this.Ci=null};Ko=()=>{'999'===D.getParameter('world')?(this.vo=new Worker('worker.js',{type:'module'}),this.vo.onmessage=this.onmessage,this.host=new x.x(this.vo)):'998'===D.getParameter('world')&&(this.vo={onmessage:t=>{this.stream.Xo.onmessage(t)},postMessage:t=>{this.Lo&&this.Lo.xo&&'open'===this.Lo.xo.readyState&&this.Lo.xo.send(JSON.stringify(t))},onerror:null,onmessageerror:null,terminate:()=>{throw new Error},addEventListener:()=>{throw new Error},removeEventListener:()=>{throw new Error},dispatchEvent:()=>{throw new Error}},this.Lo=new x.Q(this.vo))};onmessage=t=>{switch(t.data.type){case'ready':return void(this.bo=!0);case'save':return(0,k.A)(t.data.value,t.data.path.split('/').pop().split('\\').pop()),void URL.revokeObjectURL(t.data.value);case'close':return void this.vo?.postMessage({type:'close',id:t.data.id})}this.host?.Do===t.data.id?this.stream.Xo.onmessage(t.data):this.host?.postMessage(t)};jo=async()=>{if(999==+D.getParameter('world'))this.host&&await this.host.zo();else if(998==+D.getParameter('world')&&this.Lo){if(this.Lo.xo)return void console.log('You are already connected.');const t=prompt('Paste offer here, answer will be copied to clipboard');if(t)try{await this.Lo.Zo(t)}catch(t){console.error(t)}}};qo=async(t,i,s,h)=>{let e=5,o=await(this.db?.$o(t));if(o&&r.A.Jo(o)!==s&&(o=void 0),o)return new n.A(o);for(;!o;){await this.Qo(h,`Requesting ${i}`);try{o=+D.getParameter('world')<998?await(0,_.tl)(`${D.et}/${t}${s}`):await(0,_.tl)(`${D.et}/${t}`)}catch(t){o=void 0;for(let t=e;t>0;t--)await this.Qo(h,`Error loading - Will retry in ${t} secs.`),await(0,_.il)(1e3);e*=2,e>60&&(e=60)}}return await(this.db?.sl(t,o)),new n.A(o)};hl=async(t,i,s,h)=>{let e=await(this.db?.$o(t+'.mid'));if(e&&12345678!==i&&r.A.Jo(e)!==i&&(e=void 0),!e)try{e=+D.getParameter('world')<998?await(0,_.tl)(`${D.et}/${t}_${i}.mid`):await(0,_.tl)(`${D.et}/songs/${t}.mid`),s!==e.length&&(e=e.slice(0,s))}catch(t){}if(e)try{await(this.db?.sl(t+'.mid',e));const i=new r.A(Uint8Array.from(e)).el,n=C.A.read(i,e,s,4);(0,T.nl)(n,this.Oo,h)}catch(t){}};rl=()=>{if(w.ol.fillStyle='black',w.ol.fillRect(0,0,this.width,this.height),this.ll(1),this.Nt){this.Ei=!1,w.ol.font='bold 16px helvetica, sans-serif',w.ol.textAlign='left',w.ol.fillStyle='yellow';let t=35;w.ol.fillText('Sorry, an error has occured whilst loading RuneScape',30,t),t+=50,w.ol.fillStyle='white',w.ol.fillText('To fix this try the following (in order):',30,t),t+=50,w.ol.font='bold 12px helvetica, sans-serif',w.ol.fillText('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,w.ol.fillText('2: Try clearing your web-browsers cache from tools->internet options',30,t),t+=30,w.ol.fillText('3: Try using a different game-world',30,t),t+=30,w.ol.fillText('4: Try rebooting your computer',30,t),t+=30,w.ol.fillText('5: Try selecting a different version of Java from the play-game menu',30,t)}if(this.Pt&&(this.Ei=!1,w.ol.font='bold 20px helvetica, sans-serif',w.ol.textAlign='left',w.ol.fillStyle='white',w.ol.fillText('Error - unable to load game!',50,50),w.ol.fillText('To play RuneScape make sure you play from',50,100),w.ol.fillText('https://2004scape.org',50,150)),this.Dt){this.Ei=!1,w.ol.font='bold 13px helvetica, sans-serif',w.ol.textAlign='left',w.ol.fillStyle='yellow';let t=35;w.ol.fillText('Error a copy of RuneScape already appears to be loaded',30,t),t+=50,w.ol.fillStyle='white',w.ol.fillText('To fix this try the following (in order):',30,t),t+=50,w.ol.font='bold 12px helvetica, sans-serif',w.ol.fillText('1: Try closing ALL open web-browser windows, and reloading',30,t),t+=30,w.ol.fillText('2: Try rebooting your computer, and reloading',30,t)}};al=t=>{if(!t.cl)return!1;for(let i=0;i<t.cl.length;i++){const s=this.fl(t,i);if(!t.ul)return!1;const h=t.ul[i];if(2===t.cl[i]){if(s>=h)return!1}else if(3===t.cl[i]){if(s<=h)return!1}else if(4===t.cl[i]){if(s===h)return!1}else if(s!==h)return!1}return!0};dl=(t,i,s,h,e)=>{this.Ss?.draw(t,i),this.Ms?.draw(t,i+e-16),y.A.fillRect(t,i+16,16,e-32,p.A.wl);let n=(e-32)*e/h|0;n<8&&(n=8);const r=(e-n-32)*s/(h-e)|0;y.A.fillRect(t,i+r+16,16,n,p.A.yl),y.A.Al(t,i+r+16,p.A.pl,n),y.A.Al(t+1,i+r+16,p.A.pl,n),y.A.ml(t,i+r+16,p.A.pl,16),y.A.ml(t,i+r+17,p.A.pl,16),y.A.Al(t+15,i+r+16,p.A.Il,n),y.A.Al(t+14,i+r+17,p.A.Il,n-1),y.A.ml(t,i+r+n+15,p.A.Il,16),y.A.ml(t+1,i+r+n+14,p.A.Il,15)};gl=(t,i)=>{let s=!1;const e=h.A.Fo[t];if(!e.El)return!1;for(let t=0;t<e.El.length&&-1!==e.El[t];t++){const n=h.A.Fo[e.El[t]];if(1===n.type&&(s||=this.gl(n.id,i)),6===n.type&&(-1!==n._l||-1!==n.Cl)){let t;if(t=this.al(n)?n.Cl:n._l,-1!==t){const h=I.A.Fo[t];if(n.Tl+=i,h.delay)for(;n.Tl>h.delay[n.Ol];)n.Tl-=h.delay[n.Ol]+1,n.Ol++,n.Ol>=h.vl&&(n.Ol-=h.bl,(n.Ol<0||n.Ol>=h.vl)&&(n.Ol=0)),s=!0}}}return s};Ll=(t,i,s,n,r=!1)=>{if(0!==t.type||!t.El||t.hide&&this.te!==t.id&&this.ie!==t.id&&this.se!==t.id)return;const o=y.A.left,l=y.A.top,a=y.A.right,c=y.A.bottom;y.A.Rl(i,s,i+t.width,s+t.height);const f=t.El.length;for(let o=0;o<f;o++){if(!t.Sl||!t.Ml)continue;let l=t.Sl[o]+i,a=t.Ml[o]+s-n;const c=h.A.Fo[t.El[o]];if(l+=c.x,a+=c.y,r&&y.A.kl(l,a,c.width,c.height,p.A.xl),c.Dl>0&&this.Nl(c),c.type===h.A.Pl)c.Fl>c.scroll-c.height&&(c.Fl=c.scroll-c.height),c.Fl<0&&(c.Fl=0),this.Ll(c,l,a,c.Fl,r),c.scroll>c.height&&this.dl(l+c.width,a,c.Fl,c.scroll,c.height);else if(c.type===h.A.Ul){let t=0;for(let i=0;i<c.height;i++)for(let s=0;s<c.width;s++){if(!(c.Bl&&c.Gl&&c.Hl&&c.Wl))continue;let h=l+s*(c.Yl+32),e=a+i*(c.Vl+32);if(t<20&&(h+=c.Bl[t],e+=c.Gl[t]),c.Hl[t]>0){let i=0,s=0;const n=c.Hl[t]-1;if(h>=-32&&h<=512&&e>=-32&&e<=334||0!==this.ne&&this.ee===t){const r=A.A.Kl(n,c.Wl[t]);if(0!==this.ne&&this.ee===t&&this.he===c.id?(i=this.Xl-this.re,s=this.jl-this.oe,i<5&&i>-5&&(i=0),s<5&&s>-5&&(s=0),this.le<5&&(i=0,s=0),r.zl(128,h+i,e+s)):0!==this.ye&&this.Ae===t&&this.pe===c.id?r.zl(128,h,e):r.draw(h,e),33===r.Zl||1!==c.Wl[t]){const n=c.Wl[t];this.Ai?.ql(h+i+1,e+10+s,this.$l(n),p.A.Jl),this.Ai?.ql(h+i,e+9+s,this.$l(n),p.A.Ql)}}}else if(c.ta&&t<20){const i=c.ta[t];i?.draw(h,e)}t++}}else if(c.type===h.A.ia)c.fill?y.A.fillRect(l,a,c.width,c.height,c.sa):y.A.kl(l,a,c.width,c.height,c.sa);else if(c.type===h.A.ha){const t=c.font;let i=c.sa,s=c.text;if(this.se!==c.id&&this.ie!==c.id&&this.te!==c.id||0===c.ea||(i=c.ea),this.al(c)&&(i=c.na,c.ra&&c.ra.length>0&&(s=c.ra)),c.oa===h.A.la&&this.Ie&&(s='Please wait...',i=c.sa),!t||!s)continue;for(let h=a+t.height;s.length>0;h+=t.height){if(-1!==s.indexOf('%')){for(;;){const t=s.indexOf('%1');if(-1===t)break;s=s.substring(0,t)+this.aa(this.fl(c,0))+s.substring(t+2)}for(;;){const t=s.indexOf('%2');if(-1===t)break;s=s.substring(0,t)+this.aa(this.fl(c,1))+s.substring(t+2)}for(;;){const t=s.indexOf('%3');if(-1===t)break;s=s.substring(0,t)+this.aa(this.fl(c,2))+s.substring(t+2)}for(;;){const t=s.indexOf('%4');if(-1===t)break;s=s.substring(0,t)+this.aa(this.fl(c,3))+s.substring(t+2)}for(;;){const t=s.indexOf('%5');if(-1===t)break;s=s.substring(0,t)+this.aa(this.fl(c,4))+s.substring(t+2)}}const e=s.indexOf('\\n');let n;-1!==e?(n=s.substring(0,e),s=s.substring(e+2)):(n=s,s=''),c.ca?t.fa(l+(c.width/2|0),h,n,i,c.ua):t.da(l,h,n,i,c.ua)}}else if(c.type===h.A.wa){let t;t=this.al(c)?c.ya:c.Aa,t?.draw(l,a)}else if(c.type===h.A.pa){const t=e.A.ma,i=e.A.Ia;e.A.ma=l+(c.width/2|0),e.A.Ia=a+(c.height/2|0);const s=e.A.sin[c.ga]*c.zoom>>16,h=e.A.cos[c.ga]*c.zoom>>16,n=this.al(c);let r;r=n?c.Cl:c._l;let o=null;if(-1===r)o=c.Ea(-1,-1,n);else{const t=I.A.Fo[r];t.frames&&t._a&&(o=c.Ea(t.frames[c.Ol],t._a[c.Ol],n))}o&&o.Ca(0,c.Ta,0,c.ga,0,s,h),e.A.ma=t,e.A.Ia=i}else if(c.type===h.A.Oa){const t=c.font;if(!t||!c.Hl||!c.Wl)continue;let i=0;for(let s=0;s<c.height;s++)for(let h=0;h<c.width;h++){if(c.Hl[i]>0){const e=A.A.get(c.Hl[i]-1);let n=e.name;if((e.va||1!==c.Wl[i])&&(n=n+' x'+this.ba(c.Wl[i])),!n)continue;const r=l+h*(c.Yl+115),o=a+s*(c.Vl+12);c.ca?t.fa(r+(c.width/2|0),o,n,c.sa,c.ua):t.da(r,o,n,c.sa,c.ua)}i++}}}y.A.Rl(o,l,a,c)};Nl=t=>{let i=t.Dl;if(i>=h.A.La&&i<=h.A.Ra)i--,i>=this.jr?(t.text='',t.oa=0):(t.text=this.no[i],t.oa=1);else if(i>=h.A.Sa&&i<=h.A.Ma)i-=h.A.Sa,i>=this.jr?(t.text='',t.oa=0):(0===this.oo[i]?t.text='@red@Offline':this.oo[i]===D.it?t.text='@gre@World-'+(this.oo[i]-9):t.text='@yel@World-'+(this.oo[i]-9),t.oa=1);else if(i===h.A.ka)t.scroll=15*this.jr+20,t.scroll<=t.height&&(t.scroll=t.height+1);else if(i>=h.A.xa&&i<=h.A.Da)i-=h.A.xa,i>=this.Ah?(t.text='',t.oa=0):(t.text=g.A.Na(g.A.Pa(this.ph[i])),t.oa=1);else if(i===h.A.Fa)t.scroll=15*this.Ah+20,t.scroll<=t.height&&(t.scroll=t.height+1);else if(i===h.A.Ua){if(t.ga=150,t.Ta=256*Math.sin(this.Ft/40)&2047,this.Vr){this.Vr=!1;const i=new d.As(7,null);let s=0;for(let t=0;t<7;t++){const h=this.Kr[t];h>=0&&(i[s++]=E.A.Fo[h].Ea())}const h=m.A.Ba(i,s);for(let t=0;t<5;t++)0!==this.Xr[t]&&(h.Ga(u.A.Ha[t][0],u.A.Ha[t][this.Xr[t]]),1===t&&h.Ga(u.A.Wa[0],u.A.Wa[this.Xr[t]]));if(this.Dr){const i=I.A.Fo[this.Dr.Ya].frames;i&&(h.Va(),h.Ka(i[0]),h.Xa(64,850,-30,-50,-30,!0),t.model=h)}}}else if(i===h.A.ja)this.Ws||(this.Ws=t.Aa,this.Ys=t.ya),this.Yr?t.Aa=this.Ys:t.Aa=this.Ws;else if(i===h.A.za)this.Ws||(this.Ws=t.Aa,this.Ys=t.ya),this.Yr?t.Aa=this.Ws:t.Aa=this.Ys;else if(i===h.A.Za)t.text=this.De,this.Ft%20<10?t.text=t.text+'|':t.text=t.text+' ';else if(i===h.A.qa)this.Wr?this.Ne?(t.sa=p.A.RED,t.text='Moderator option: Mute player for 48 hours: <ON>'):(t.sa=p.A.xl,t.text='Moderator option: Mute player for 48 hours: <OFF>'):t.text='';else if(i===h.A.$a||i===h.A.Ja)if(0===this.Fe)t.text='';else{let i;i=0===this.Ue?'earlier today':1===this.Ue?'yesterday':this.Ue+' days ago',t.text='You last logged in '+i+' from: '+g.A.Qa(this.Fe)}else if(i===h.A.tc)0===this.Ge&&(t.text='0 unread messages',t.sa=p.A.Ql),1===this.Ge&&(t.text='1 unread message',t.sa=p.A.GREEN),this.Ge>1&&(t.text=this.Ge+' unread messages',t.sa=p.A.GREEN);else if(i===h.A.ic)if(201===this.Be)t.text='';else if(200===this.Be)t.text='You have not yet set any password recovery questions.';else{let i;i=0===this.Be?'Earlier today':1===this.Be?'Yesterday':this.Be+' days ago',t.text=i+' you changed your recovery questions'}else i===h.A.sc?201===this.Be?t.text='':200===this.Be?t.text='We strongly recommend you do so now to secure your account.':t.text='If you do not remember making this change then cancel it immediately':i===h.A.hc&&(201===this.Be?t.text='':(this.Be,t.text="Do this from the 'account management' area on our front webpage"))};fl=(t,i)=>{if(!t.scripts||i>=t.scripts.length)return-2;try{const s=t.scripts[i];if(!s)return-1;let e=0,n=0;for(;;){const t=s[n++];if(0===t)return e;if(1===t)e+=this.Lh[s[n++]];else if(2===t)e+=this.Rh[s[n++]];else if(3===t)e+=this.bh[s[n++]];else if(4===t){const t=h.A.Fo[s[n++]],i=s[n++]+1;if(t.Hl&&t.Wl)for(let s=0;s<t.Hl.length;s++)t.Hl[s]===i&&(e+=t.Wl[s]);else e+=0}else if(5===t)e+=this.ge[s[n++]];else if(6===t)e+=this.Sh[this.Rh[s[n++]]-1];else if(7===t)e+=100*this.ge[s[n++]]/46875|0;else if(8===t)e+=this.Dr?.ec||0;else if(9===t)for(let t=0;t<19;t++)18===t&&(t=20),e+=this.Rh[t];else if(10===t){const t=h.A.Fo[s[n++]],i=s[n++]+1;for(let s=0;s<t.Hl.length;s++)if(t.Hl[s]===i){e+=999999999;break}}else if(11===t)e+=this.Nr;else if(12===t)e+=this.Ur;else if(13===t){const t=this.ge[s[n++]];e+=t&1<<s[n++]?1:0}}}catch(t){return-1}};aa=t=>t<999999999?String(t):'*';ba=t=>{let i=String(t);for(let t=i.length-3;t>0;t-=3)i=i.substring(0,t)+','+i.substring(t);return i.length>8?i='@gre@'+i.substring(0,i.length-8)+' million @whi@('+i+')':i.length>4&&(i='@cya@'+i.substring(0,i.length-4)+'K @whi@('+i+')'),' '+i};$l=t=>t<1e5?String(t):t<1e7?(t/1e3|0)+'K':(t/1e6|0)+'M'}},7604:(t,i,s)=>{s.d(i,{w:()=>r});var h=s(7046),e=s(1651),n=s(9234);async function r(){await async function(){0===h.A.getParameter('world').length&&h.A.setParameter('world','1');const t=window.location.hostname;t.includes('rsps')||t.includes('rshaven')||t.includes('nothingnewgames')?function(){const t=window.location.protocol,i=window.location.host;e.K.ht=`${t}//${i}`,e.K.et=`${t}//${i}`,e.K.portOffset=0,e.K.members=!0,e.K.nt=!0}():['0','998','999'].includes(h.A.getParameter('world'))?function(){if(+h.A.getParameter('world')>=998)return void(e.K.et='data/pack/client');e.K.ht='http://localhost',e.K.et='http://localhost',e.K.portOffset=0}():await async function(t){const i=await o(t,parseInt(h.A.getParameter('world'),10)),s=new URL(i.address);e.K.it=10+i.id-1,e.K.ht=`${s.protocol}//${s.hostname}`,e.K.et=`${s.protocol}//${s.hostname}:${s.port}`,t||(e.K.ht=e.K.ht.replace('https:','http:'));e.K.portOffset=i.portOffset,e.K.members=!0===i?.members,h.A.setParameter('world',i.id.toString(10))}(window.location.protocol.startsWith('https'))}(),function(){0===h.A.getParameter('detail').length&&h.A.setParameter('detail','high');'low'===h.A.getParameter('detail')?e.K.St():e.K.Rt()}(),0===h.A.getParameter('method').length&&h.A.setParameter('method','0')}async function o(t,i,s=0){if(s>=10)throw new Error('could not find world to connect!');const h=t?'https:':'http:';let e;try{e=JSON.parse(await(0,n.nc)(`${h}//2004scape.org/api/v1/worldlist`))}catch(h){return await(0,n.il)(1e3),o(t,i,++s)}e.push({id:0,region:'Local Development',address:'http://localhost',portOffset:0,members:!0,ar:0});const r=e.find((t=>t.id===i));return r||o(t,i,10)}},7906:(t,i,s)=>{s.a(t,(async(t,i)=>{try{var h=s(1312),e=s(5637),n=s(1302),r=s(6948),o=s(8317),l=s(8738),a=s(3764),c=s(1120),f=s(1183),u=s(8950),d=s(4583),w=s(1673),y=s(2511),A=s(2682),p=s(8665),m=s(9298),I=s(1069),g=s(3554),E=s(353),_=s(2634),C=s(4544),T=s(2215),O=s(3955),v=s(7953),b=s(2646),L=s(3937),R=(s(9896),s(1908)),S=s(6666),M=s(3819),k=s(2595),x=s(3045),D=s(818),N=s(5599),P=s(1023),F=s(6169),U=s(2630),B=s(5327),G=s(670),H=s(9456),W=s(8268),Y=s(8412),V=s(3606),K=s(4197),X=s(254),j=s(7628),z=s(123),Z=s(9234),q=s(3867),$=s(1651),J=s(8534),Q=s(6730),tt=s(2164),it=s(7604),st=s(3795),ht=s(4909),et=s(296),nt=s(9081);class t extends $.K{load=async()=>{if(this.xt)this.Dt=!0;else{this.xt=!0;try{this.Ko(),await this.Qo(10,'Connecting to fileserver'),await R.A.load(await(await fetch('bz2.wasm')).arrayBuffer()),this.db=new C.A(await C.A.openDatabase());const t=new I.A(new Uint8Array(await(0,Z.tl)(`${$.K.et}/crc`)));for(let i=0;i<9;i++)this.Ut[i]=t.el;$.K.st||await this.hl('scape_main',12345678,4e4,!1);const i=await this.qo('title','title screen',this.Ut[1],10);this.Qt=i,this.Ai=A.A.rc(i,'p11'),this.pi=A.A.rc(i,'p12'),this.mi=A.A.rc(i,'b12'),this.Ii=A.A.rc(i,'q8'),await this.oc(),this.lc();const s=await this.qo('config','config',this.Ut[2],15),u=await this.qo('interface','interface',this.Ut[3],20),m=await this.qo('media','2d graphics',this.Ut[4],30),g=await this.qo('models','3d graphics',this.Ut[5],40),E=await this.qo('textures','textures',this.Ut[6],60),_=await this.qo('wordenc','chat system',this.Ut[7],65),T=await this.qo('sounds','sound effects',this.Ut[8],70);this.Xn=new q.ac(G.A.Pn,G.A.Zn,G.A.Zn),this.Kn=new q.cc(G.A.Pn,G.A.Zn+1,G.A.Zn+1),this.Kn&&(this.Ve=new x.A(this.Kn,G.A.Zn,G.A.Pn,G.A.Zn));for(let t=0;t<G.A.Pn;t++)this.Nn[t]=new G.A;this.ps=new y.A(512,512),await this.Qo(75,'Unpacking media'),this.ls=w.A.rc(m,'invback',0),this.cs=w.A.rc(m,'chatback',0),this.fs=w.A.rc(m,'mapback',0),this.us=w.A.rc(m,'backbase1',0),this.ds=w.A.rc(m,'backbase2',0),this.ws=w.A.rc(m,'backhmid1',0);for(let t=0;t<13;t++)this.ys[t]=w.A.rc(m,'sideicons',t);this.Is=y.A.rc(m,'compass',0);try{for(let t=0;t<50;t++)22!==t&&(this.gs[t]=w.A.rc(m,'mapscene',t))}catch(t){}try{for(let t=0;t<50;t++)this.Es[t]=y.A.rc(m,'mapfunction',t)}catch(t){}try{for(let t=0;t<20;t++)this._s[t]=y.A.rc(m,'hitmarks',t)}catch(t){}try{for(let t=0;t<20;t++)this.Cs[t]=y.A.rc(m,'headicons',t)}catch(t){}this.Ts=y.A.rc(m,'mapflag',0);for(let t=0;t<8;t++)this.Os[t]=y.A.rc(m,'cross',t);this.vs=y.A.rc(m,'mapdots',0),this.bs=y.A.rc(m,'mapdots',1),this.Ls=y.A.rc(m,'mapdots',2),this.Rs=y.A.rc(m,'mapdots',3),this.Ss=w.A.rc(m,'scrollbar',0),this.Ms=w.A.rc(m,'scrollbar',1),this.ks=w.A.rc(m,'redstone1',0),this.xs=w.A.rc(m,'redstone2',0),this.Ds=w.A.rc(m,'redstone3',0),this.Ns=w.A.rc(m,'redstone1',0),this.Ns?.fc(),this.Ps=w.A.rc(m,'redstone2',0),this.Ps?.fc(),this.Fs=w.A.rc(m,'redstone1',0),this.Fs?.uc(),this.Us=w.A.rc(m,'redstone2',0),this.Us?.uc(),this.Bs=w.A.rc(m,'redstone3',0),this.Bs?.uc(),this.Gs=w.A.rc(m,'redstone1',0),this.Gs?.fc(),this.Gs?.uc(),this.Hs=w.A.rc(m,'redstone2',0),this.Hs?.fc(),this.Hs?.uc();const O=y.A.rc(m,'backleft1',0);this.Vi=new f.A(O.width,O.height),O.dc(0,0);const b=y.A.rc(m,'backleft2',0);this.Ki=new f.A(b.width,b.height),b.dc(0,0);const S=y.A.rc(m,'backright1',0);this.Xi=new f.A(S.width,S.height),S.dc(0,0);const M=y.A.rc(m,'backright2',0);this.ji=new f.A(M.width,M.height),M.dc(0,0);const k=y.A.rc(m,'backtop1',0);this.zi=new f.A(k.width,k.height),k.dc(0,0);const D=y.A.rc(m,'backtop2',0);this.Zi=new f.A(D.width,D.height),D.dc(0,0);const N=y.A.rc(m,'backvmid1',0);this.qi=new f.A(N.width,N.height),N.dc(0,0);const P=y.A.rc(m,'backvmid2',0);this.$i=new f.A(P.width,P.height),P.dc(0,0);const F=y.A.rc(m,'backvmid3',0);this.Ji=new f.A(F.width,F.height),F.dc(0,0);const U=y.A.rc(m,'backhmid2',0);this.Qi=new f.A(U.width,U.height),U.dc(0,0);const B=(21*Math.random()|0)-10,H=(21*Math.random()|0)-10,W=(21*Math.random()|0)-10,Y=(41*Math.random()|0)-20;for(let t=0;t<50;t++)this.Es[t]&&this.Es[t]?.translate(B+Y,H+Y,W+Y),this.gs[t]&&this.gs[t]?.translate(B+Y,H+Y,W+Y);await this.Qo(80,'Unpacking textures'),d.A.wc(E),d.A.yc(.8),d.A.Ac(20),await this.Qo(83,'Unpacking models'),p.A.mc(g),J.A.mc(g),Q.A.mc(g),await this.Qo(86,'Unpacking config'),h.A.mc(s),e.A.mc(s),tt.A.mc(s),n.A.mc(s,$.K.members),r.A.mc(s),o.A.mc(s),l.A.mc(s),a.A.mc(s),$.K.st||(await this.Qo(90,'Unpacking sounds'),L.A.mc(T)),await this.Qo(92,'Unpacking interfaces'),c.A.mc(u,m,[this.Ai,this.pi,this.mi,this.Ii]),await this.Qo(97,'Preparing game engine');for(let t=0;t<33;t++){let i=999,s=0;for(let h=0;h<35;h++)if(0===this.fs.Ic[h+t*this.fs.width])999===i&&(i=h);else if(999!==i){s=h;break}this.es[t]=i,this.ns[t]=s-i}for(let t=9;t<160;t++){let i=999,s=0;for(let h=10;h<168;h++)if(0===this.fs.Ic[h+t*this.fs.width]&&(h>34||t>34))999===i&&(i=h);else if(999!==i){s=h;break}this.rs[t-9]=i-21,this.os[t-9]=s-i}d.A.gc(479,96),this.ts=d.A.Ec,d.A.gc(190,261),this.ss=d.A.Ec,d.A.gc(512,334),this.hs=d.A.Ec;const V=new Int32Array(9);for(let t=0;t<9;t++){const i=32*t+128+15,s=3*i+600,h=d.A.sin[i];V[t]=s*h>>16}x.A.init(512,334,500,800,V),v.A.mc(_),this._c()}catch(t){console.error(t),this.Nt=!0}}};update=async()=>{this.Dt||this.Nt||this.Pt||(this.Ft++,this.Cc?await this.Tc():await this.Oc())};draw=async()=>{this.Dt||this.Nt||this.Pt?this.rl():(this.Cc?this.vc():await this.bc(),this.qs=0)};refresh=()=>{this.ti=!0};Qo=async(t,i)=>{if(console.log(`${t}%: ${i}`),await this.Lc(),!this.Qt)return void await super.Qo(t,i);this.ni?.bind();this.mi?.Rc(180,54,'RuneScape is loading - please wait...',m.A.xl);u.A.kl(28,62,304,34,m.A.Sc),u.A.kl(29,63,302,32,m.A.Jl),u.A.fillRect(30,64,3*t,30,m.A.Sc),u.A.fillRect(30+3*t,64,300-3*t,30,m.A.Jl),this.mi?.Rc(180,85,i,m.A.xl),this.ni?.draw(214,186),this.ti&&(this.ti=!1,this.Ei||(this.ri?.draw(0,0),this.oi?.draw(661,0)),this.hi?.draw(128,0),this.ei?.draw(214,386),this.li?.draw(0,265),this.ai?.draw(574,265),this.ci?.draw(128,186),this.fi?.draw(574,186)),await(0,Z.il)(5)};Mc=()=>{this.Ei&&(this.kc(),this.kc(),this.xc())};Lc=async()=>{this.hi||(this.Bo=null,this.Gi=null,this.Ui=null,this.Fi=null,this.Bi=null,this.Hi=null,this.Wi=null,this.Yi=null,this.ri=new f.A(128,265),u.A.clear(),this.oi=new f.A(128,265),u.A.clear(),this.hi=new f.A(533,186),u.A.clear(),this.ei=new f.A(360,146),u.A.clear(),this.ni=new f.A(360,200),u.A.clear(),this.li=new f.A(214,267),u.A.clear(),this.ai=new f.A(215,267),u.A.clear(),this.ci=new f.A(86,79),u.A.clear(),this.fi=new f.A(87,79),u.A.clear(),this.Qt&&(await this.oc(),this.lc()),this.ti=!0)};oc=async()=>{if(!this.Qt)return;const t=await y.A.Dc(this.Qt,'title');this.ri?.bind(),t.dc(0,0),this.oi?.bind(),t.dc(-661,0),this.hi?.bind(),t.dc(-128,0),this.ei?.bind(),t.dc(-214,-386),this.ni?.bind(),t.dc(-214,-186),this.li?.bind(),t.dc(0,-265),this.ai?.bind(),t.dc(-128,-186),this.ci?.bind(),t.dc(-128,-186),this.fi?.bind(),t.dc(-574,-186),t.fc(),this.ri?.bind(),t.dc(394,0),this.oi?.bind(),t.dc(-267,0),this.hi?.bind(),t.dc(266,0),this.ei?.bind(),t.dc(180,-386),this.ni?.bind(),t.dc(180,-186),this.li?.bind(),t.dc(394,-265),this.ai?.bind(),t.dc(-180,-265),this.ci?.bind(),t.dc(212,-186),this.fi?.bind(),t.dc(-180,-186);const i=y.A.rc(this.Qt,'logo');this.hi?.bind(),i.draw((this.width/2|0)-(i.width/2|0)-128,18)};Nc=t=>{if(!this.Oi||!this.Ti)return;this.Oi.fill(0);for(let t=0;t<5e3;t++){const t=128*Math.random()*256|0;this.Oi[t]=256*Math.random()|0}for(let t=0;t<20;t++){for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);this.Ti[s]=(this.Oi[s-1]+this.Oi[s+1]+this.Oi[s-128]+this.Oi[s+128])/4|0}const t=this.Oi;this.Oi=this.Ti,this.Ti=t}if(t){let i=0;for(let s=0;s<t.height;s++)for(let h=0;h<t.width;h++)if(0!==t.Ic[i++]){const i=h+t.Pc+16+(s+t.Fc+16<<7);this.Oi[i]=0}}};lc=()=>{if(this.Qt){this.ui=w.A.rc(this.Qt,'titlebox'),this.di=w.A.rc(this.Qt,'titlebutton');for(let t=0;t<12;t++)this.gi[t]=w.A.rc(this.Qt,'runes',t);this._i=new y.A(128,265),this.Ci=new y.A(128,265),this.ri&&(0,Z.Uc)(this.ri.Ic,0,this._i.Ic,0,33920),this.oi&&(0,Z.Uc)(this.oi.Ic,0,this.Ci.Ic,0,33920),this.Ri=new Int32Array(256);for(let t=0;t<64;t++)this.Ri[t]=262144*t;for(let t=0;t<64;t++)this.Ri[t+64]=1024*t+m.A.RED;for(let t=0;t<64;t++)this.Ri[t+128]=4*t+m.A.Ql;for(let t=0;t<64;t++)this.Ri[t+192]=m.A.xl;this.Si=new Int32Array(256);for(let t=0;t<64;t++)this.Si[t]=1024*t;for(let t=0;t<64;t++)this.Si[t+64]=4*t+m.A.GREEN;for(let t=0;t<64;t++)this.Si[t+128]=262144*t+m.A.Bc;for(let t=0;t<64;t++)this.Si[t+192]=m.A.xl;this.Mi=new Int32Array(256);for(let t=0;t<64;t++)this.Mi[t]=4*t;for(let t=0;t<64;t++)this.Mi[t+64]=262144*t+m.A.BLUE;for(let t=0;t<64;t++)this.Mi[t+128]=1024*t+m.A.Gc;for(let t=0;t<64;t++)this.Mi[t+192]=m.A.xl;this.Li=new Int32Array(256),this.Oi=new Int32Array(32768),this.Ti=new Int32Array(32768),this.Nc(null),this.vi=new Int32Array(32768),this.bi=new Int32Array(32768),this.Qo(10,'Connecting to fileserver').then((()=>{this.Ei||(this.Ei=!0,this.Pi=setInterval(this.Mc,35))}))}};Oc=async()=>{if(0===this.ii){let t=(this.width/2|0)-80,i=20+(this.height/2|0);if(i+=20,1===this.Hc&&this.Wc>=t-75&&this.Wc<=t+75&&this.Yc>=i-20&&this.Yc<=i+20){if(+$.K.getParameter('world')>=998)return void this.jo();this.ii=3,this.si=0}t=80+(this.width/2|0),1===this.Hc&&this.Wc>=t-75&&this.Wc<=t+75&&this.Yc>=i-20&&this.Yc<=i+20&&(this.wi='',this.yi='Enter your username & password.',this.ii=2,this.si=0)}else if(2===this.ii){let t=(this.height/2|0)-40;t+=30,t+=25,1===this.Hc&&this.Yc>=t-15&&this.Yc<t&&(this.si=0),t+=15,1===this.Hc&&this.Yc>=t-15&&this.Yc<t&&(this.si=1);let i=(this.width/2|0)-80,s=50+(this.height/2|0);for(s+=20,1===this.Hc&&this.Wc>=i-75&&this.Wc<=i+75&&this.Yc>=s-20&&this.Yc<=s+20&&await this.Vc(this.username,this.password,!1),i=80+(this.width/2|0),1===this.Hc&&this.Wc>=i-75&&this.Wc<=i+75&&this.Yc>=s-20&&this.Yc<=s+20&&(this.ii=0,this.username='',this.password='');;){const t=this.Kc();if(-1===t)return;let i=!1;for(let s=0;s<A.A.Xc.length;s++)if(String.fromCharCode(t)===A.A.Xc.charAt(s)){i=!0;break}0===this.si?(8===t&&this.username.length>0&&(this.username=this.username.substring(0,this.username.length-1)),9!==t&&10!==t&&13!==t||(this.si=1),i&&(this.username=this.username+String.fromCharCode(t)),this.username.length>12&&(this.username=this.username.substring(0,12))):1===this.si&&(8===t&&this.password.length>0&&(this.password=this.password.substring(0,this.password.length-1)),9!==t&&10!==t&&13!==t||(this.si=0),i&&(this.password=this.password+String.fromCharCode(t)),this.password.length>20&&(this.password=this.password.substring(0,20)))}}else if(3===this.ii){const t=this.width/2|0;let i=50+(this.height/2|0);i+=20,1===this.Hc&&this.Wc>=t-75&&this.Wc<=t+75&&this.Yc>=i-20&&this.Yc<=i+20&&(this.ii=0)}};bc=async()=>{await this.Lc(),this.ni?.bind(),this.ui?.draw(0,0);if(0===this.ii){let t=180,i=80;this.mi?.fa(t,i,'Welcome to RuneScape',m.A.Ql,!0),t=100,i=120,this.di?.draw(t-73,i-20),this.mi?.fa(t,i+5,'New user',m.A.xl,!0),t=260,this.di?.draw(t-73,i-20),this.mi?.fa(t,i+5,'Existing User',m.A.xl,!0)}else if(2===this.ii){let t=100,i=60;this.wi.length>0?(this.mi?.fa(180,i-15,this.wi,m.A.Ql,!0),this.mi?.fa(180,i,this.yi,m.A.Ql,!0),i+=30):(this.mi?.fa(180,i-7,this.yi,m.A.Ql,!0),i+=30),this.mi?.da(90,i,`Username: ${this.username}${0===this.si&&this.Ft%40<20?'@yel@|':''}`,m.A.xl,!0),i+=15,this.mi?.da(92,i,`Password: ${M.A.jc(this.password)}${1===this.si&&this.Ft%40<20?'@yel@|':''}`,m.A.xl,!0),i=150,this.di?.draw(t-73,i-20),this.mi?.fa(t,i+5,'Login',m.A.xl,!0),t=260,this.di?.draw(t-73,i-20),this.mi?.fa(t,i+5,'Cancel',m.A.xl,!0)}else if(3===this.ii){this.mi?.fa(180,40,'Create a free account',m.A.Ql,!0);const t=180;let i=65;this.mi?.fa(180,i,'To create a new account you need to',m.A.xl,!0),i+=15,this.mi?.fa(180,i,'go back to the main RuneScape webpage',m.A.xl,!0),i+=15,this.mi?.fa(180,i,"and choose the red 'create account'",m.A.xl,!0),i+=15,this.mi?.fa(180,i,'button at the top right of that page.',m.A.xl,!0),i=150,this.di?.draw(t-73,i-20),this.mi?.fa(t,i+5,'Cancel',m.A.xl,!0)}this.ni?.draw(214,186),this.ti&&(this.ti=!1,this.hi?.draw(128,0),this.ei?.draw(214,386),this.li?.draw(0,265),this.ai?.draw(574,265),this.ci?.draw(128,186),this.fi?.draw(574,186))};Vc=async(i,s,h)=>{try{if(h||(this.wi='',this.yi='Connecting to server...',await this.bc()),'998'===t.getParameter('world')){if(this.Lo&&!this.Lo.xo)return this.wi='You are not connected to a host.',void(this.yi='Please try using world 999.');this.stream=new et.A(this.vo,this.Lo.Do)}else if('999'===t.getParameter('world')){if(!this.bo)return this.wi='The server is starting up.',void(this.yi='Please try again in a moment.');this.stream=new et.A(this.vo,this.host.Do)}else this.stream=new g.A(await g.A.zc({host:$.K.ht,port:43594+$.K.portOffset}));await this.stream.Zc(this.in.data,0,8),this.in.qc=0,this.Wt=this.in.$c;const e=new Int32Array([Math.floor(99999999*Math.random()),Math.floor(99999999*Math.random()),Number(this.Wt>>32n),Number(this.Wt&BigInt(4294967295))]);this.Gt.qc=0,this.Gt.p1(10),this.Gt.p4(e[0]),this.Gt.p4(e[1]),this.Gt.p4(e[2]),this.Gt.p4(e[3]),this.Gt.p4(0),this.Gt.Jc(i),this.Gt.Jc(s),this.Gt.Qc($.K.ft,$.K.exponent),this.Ht.qc=0,h?this.Ht.p1(18):this.Ht.p1(16),this.Ht.p1(this.Gt.qc+36+1+1),this.Ht.p1($.K.tt),this.Ht.p1($.K.st?1:0);for(let t=0;t<9;t++)this.Ht.p4(this.Ut[t]);this.Ht.tf(this.Gt.data,this.Gt.qc,0),this.Gt.random=new _.A(e);for(let t=0;t<4;t++)e[t]+=50;this.zt=new _.A(e),this.stream?.write(this.Ht.data,this.Ht.qc);const n=await this.stream.read();if(1===n)return await(0,Z.il)(2e3),void await this.Vc(i,s,h);if(2===n||18===n){this.Wr=18===n,k.A.if(),this.Cc=!0,this.Gt.qc=0,this.in.qc=0,this.Zt=-1,this.qt=-1,this.$t=-1,this.Jt=-1,this.packetSize=0,this.Yt=0,this.jt=0,this.Vt=0,this.mh=0,this.lh=0,this.sh=!1,this.sf=Date.now();for(let t=0;t<100;t++)this.jh[t]=null;this.ce=0,this._e=0,this.Ke=0,this.ao=0,this.Je=(100*Math.random()|0)-50,this.Qe=(110*Math.random()|0)-55,this.tn=(80*Math.random()|0)-40,this.mn=(120*Math.random()|0)-60,this.In=(30*Math.random()|0)-20,this.Gn=(20*Math.random()|0)-10&2047,this._n=-1,this.ze=0,this.Ze=0,this.cr=0,this.Ir=0;for(let t=0;t<this.Mt;t++)this.ar[t]=null,this.pr[t]=null;for(let t=0;t<8192;t++)this.mr[t]=null;this.Dr=this.ar[this.kt]=new W.A,this.Er.clear(),this._r.clear(),this.Tr.clear();for(let t=0;t<G.A.Pn;t++)for(let i=0;i<G.A.Zn;i++)for(let s=0;s<G.A.Zn;s++)this.Or[t][i][s]=null;this.br=new S.A,this.jr=0,this.Xh=-1,this.uh=-1,this.Zs=-1,this.fh=-1,this.Ie=!1,this.xh=3,this.Kh=!1,this.sh=!1,this.Gh=!1,this.Mh=null,this.Pr=0,this.kh=-1,this.Yr=!0,this.hf();for(let t=0;t<5;t++)this.Xr[t]=0;return(0,z.No)(!0),$.K.gt=0,$.K.Et=0,$.K._t=0,$.K.Ct=0,$.K.Tt=0,$.K.Ot=0,$.K.vt=0,$.K.bt=0,$.K.Lt=0,void this.ef()}if(3===n)return this.wi='',void(this.yi='Invalid username or password.');if(4===n)return this.wi='Your account has been disabled.',void(this.yi='Please check your message-centre for details.');if(5===n)return this.wi='Your account is already logged in.',void(this.yi='Try again in 60 secs...');if(6===n)return this.wi='RuneScape has been updated!',void(this.yi='Please reload this page.');if(7===n)return this.wi='This world is full.',void(this.yi='Please use a different world.');if(8===n)return this.wi='Unable to connect.',void(this.yi='Login server offline.');if(9===n)return this.wi='Login limit exceeded.',void(this.yi='Too many connections from your address.');if(10===n)return this.wi='Unable to connect.',void(this.yi='Bad session id.');if(11===n)return this.yi='Login server rejected session.',void(this.yi='Please try again.');if(12===n)return this.wi='You need a members account to login to this world.',void(this.yi='Please subscribe, or use a different world.');if(13===n)return this.wi='Could not complete login.',void(this.yi='Please try using a different world.');if(14===n)return this.wi='The server is being updated.',void(this.yi='Please wait 1 minute and try again.');if(15===n)return this.Cc=!0,this.Gt.qc=0,this.in.qc=0,this.Zt=-1,this.qt=-1,this.$t=-1,this.Jt=-1,this.packetSize=0,this.Yt=0,this.jt=0,this.lh=0,void(this.sh=!1);if(16===n)return this.wi='Login attempts exceeded.',void(this.yi='Please wait 1 minute and try again.');17===n&&(this.wi='You are standing in a members-only area.',this.yi='To play on this world move to a free area first')}catch(t){console.log(t),this.wi='',this.yi='Error connecting to server.'}};Tc=async()=>{if(null!==this.ar){this.jt>1&&this.jt--,this.Vt>0&&this.Vt--;for(let t=0;t<5&&await this.read();t++);if(this.Cc){for(let t=0;t<this.ao;t++)if(this.do[t]<=0){try{const i=L.A.nf(this.fo[t],this.uo[t]);if(!i)throw new Error;Date.now()+(i.qc/22|0)>this.mo+(this.po/22|0)&&(this.po=i.qc,this.mo=Date.now(),this.yo=this.fo[t],this.Ao=this.uo[t],await(0,z.rf)(i.data.slice(0,i.qc),this.wo))}catch(t){console.error(t)}this.ao--;for(let i=t;i<this.ao;i++)this.fo[i]=this.fo[i+1],this.uo[i]=this.uo[i+1],this.do[i]=this.do[i+1];t--}else this.do[t]--;this.Io>0&&(this.Io-=20,this.Io<0&&(this.Io=0),0===this.Io&&this.Eo&&!$.K.st&&this._o&&await this.hl(this._o,this.Co,this.To,!1));const t=k.A.flush();if(t&&(this.Gt.lf(O.A.af),this.Gt.p2(t.qc),this.Gt.tf(t.data,t.qc,0),t.release()),this.Yt++,this.Yt>750&&await this.cf(),this.ff(),this.uf(),this.df(),this.wf(),(1===this.yf[1]||1===this.yf[2]||1===this.yf[3]||1===this.yf[4])&&this.Un++>5&&(this.Un=0,this.Gt.lf(O.A.Af),this.Gt.p2(this.Bn),this.Gt.p2(this.Gn),this.Gt.p1(this.mn),this.Gt.p1(this.In)),this.Xe++,0!==this.$s&&(this.Js+=20,this.Js>=400&&(this.$s=0)),0!==this.ye&&(this.me++,this.me>=15&&(2===this.ye&&(this.Ks=!0),3===this.ye&&(this.Xs=!0),this.ye=0)),0!==this.ne&&(this.le++,(this.Xl>this.re+5||this.Xl<this.re-5||this.jl>this.oe+5||this.jl<this.oe-5)&&(this.ae=!0),0===this.pf)){if(2===this.ne&&(this.Ks=!0),3===this.ne&&(this.Xs=!0),this.ne=0,this.ae&&this.le>=5){if(this.Me=-1,this.mf(),this.Me===this.he&&this.ke!==this.ee){const t=c.A.Fo[this.he];if(t.Hl){const i=t.Hl[this.ke];t.Hl[this.ke]=t.Hl[this.ee],t.Hl[this.ee]=i}if(t.Wl){const i=t.Wl[this.ke];t.Wl[this.ke]=t.Wl[this.ee],t.Wl[this.ee]=i}this.Gt.lf(O.A.If),this.Gt.p2(this.he),this.Gt.p2(this.ee),this.Gt.p2(this.ke)}}else(1===this.ve||this.gf(this.lh-1))&&this.lh>2?this.Ef():this.lh>0&&await this._f(this.lh-1);this.me=10,this.Hc=0}if($.K.wt++,$.K.wt>127&&($.K.wt=0,this.Gt.lf(O.A.Cf),this.Gt.p3(4991788)),-1!==x.A.Tf&&this.Dr){const t=x.A.Tf,i=x.A.Of,s=this.vf(this.Dr.bf[0],this.Dr.Lf[0],t,i,0,0,0,0,0,0,!0);x.A.Tf=-1,s&&(this.Qs=this.Wc,this.th=this.Yc,this.$s=1,this.Js=0)}1===this.Hc&&this.Mh&&(this.Mh=null,this.Xs=!0,this.Hc=0),await this.Rf(),this.Sf(),this.Mf(),this.kf(),1!==this.pf&&1!==this.Hc||this.qs++,2===this.Ke&&($.K.lt?this.xf():this.Df()),2===this.Ke&&this.qe&&this.Nf();for(let t=0;t<5;t++)this.nn[t]++;if(await this.Pf(),Date.now()-this.sf>this.Kt&&(this.Vt=250,this.sf=Date.now()-1e4,this.Gt.lf(O.A.Ff)),this.$e++,this.$e>500){this.$e=0;const t=8*Math.random()|0;1&~t||(this.Je+=this.sn),2&~t||(this.Qe+=this.hn),4&~t||(this.tn+=this.en)}if(this.Je<-50&&(this.sn=2),this.Je>50&&(this.sn=-2),this.Qe<-55&&(this.hn=2),this.Qe>55&&(this.hn=-2),this.tn<-40&&(this.en=1),this.tn>40&&(this.en=-1),this.pn++,this.pn>500){this.pn=0;const t=8*Math.random()|0;1&~t||(this.mn+=this.En),2&~t||(this.In+=this.gn)}this.mn<-60&&(this.En=2),this.mn>60&&(this.En=-2),this.In<-20&&(this.gn=1),this.In>10&&(this.gn=-1),$.K.yt++,$.K.yt>110&&($.K.yt=0,this.Gt.lf(O.A.Uf),this.Gt.p4(0)),this.Br++,this.Br>50&&this.Gt.lf(O.A.Bf);try{this.stream&&this.Gt.qc>0&&(this.stream.write(this.Gt.data,this.Gt.qc),this.Gt.qc=0,this.Br=0)}catch(t){console.log(t),await this.cf()}}}};vc=()=>{if(null===this.ar)return;this.ti&&(this.ti=!1,this.Vi?.draw(0,11),this.Ki?.draw(0,375),this.Xi?.draw(729,5),this.ji?.draw(752,231),this.zi?.draw(0,0),this.Zi?.draw(561,0),this.qi?.draw(520,11),this.$i?.draw(520,231),this.Ji?.draw(501,375),this.Qi?.draw(0,345),this.Ks=!0,this.Xs=!0,this.js=!0,this.zs=!0,2!==this.Ke&&(this.Bi?.draw(8,11),this.Ui?.draw(561,5))),2===this.Ke&&this.Gf(),this.sh&&1===this.hh&&(this.Ks=!0);let t=!1;if(-1!==this.fh&&(t=this.gl(this.fh,this.Xe),t&&(this.Ks=!0)),2===this.ye&&(this.Ks=!0),2===this.ne&&(this.Ks=!0),this.Ks&&(this.Hf(),this.Ks=!1),-1===this.uh){this.dh.Fl=this.wh-this.yh-77,this.Xl>453&&this.Xl<565&&this.jl>350&&this.Wf(this.Xl-22,this.jl-375,this.wh,77,!1,463,0,this.dh);let t=this.wh-this.dh.Fl-77;t<0&&(t=0),t>this.wh-77&&(t=this.wh-77),this.yh!==t&&(this.yh=t,this.Xs=!0)}-1!==this.uh&&(t=this.gl(this.uh,this.Xe),t&&(this.Xs=!0)),3===this.ye&&(this.Xs=!0),3===this.ne&&(this.Xs=!0),this.Mh&&(this.Xs=!0),this.sh&&2===this.hh&&(this.Xs=!0),this.Xs&&(this.Yf(),this.Xs=!1),2===this.Ke&&(this.Vf(),this.Ui?.draw(561,5)),-1!==this.kh&&(this.js=!0),this.js&&(-1!==this.kh&&this.kh===this.xh&&(this.kh=-1,this.Gt.lf(O.A.Kf),this.Gt.p1(this.xh)),this.js=!1,this.Yi?.bind(),this.ws?.draw(0,0),-1===this.fh&&(-1!==this.Dh[this.xh]&&(0===this.xh?this.ks?.draw(29,30):1===this.xh?this.xs?.draw(59,29):2===this.xh?this.xs?.draw(87,29):3===this.xh?this.Ds?.draw(115,29):4===this.xh?this.Ps?.draw(156,29):5===this.xh?this.Ps?.draw(184,29):6===this.xh&&this.Ns?.draw(212,30)),-1!==this.Dh[0]&&(0!==this.kh||this.Ft%20<10)&&this.ys[0]?.draw(35,34),-1!==this.Dh[1]&&(1!==this.kh||this.Ft%20<10)&&this.ys[1]?.draw(59,32),-1!==this.Dh[2]&&(2!==this.kh||this.Ft%20<10)&&this.ys[2]?.draw(86,32),-1!==this.Dh[3]&&(3!==this.kh||this.Ft%20<10)&&this.ys[3]?.draw(121,33),-1!==this.Dh[4]&&(4!==this.kh||this.Ft%20<10)&&this.ys[4]?.draw(157,34),-1!==this.Dh[5]&&(5!==this.kh||this.Ft%20<10)&&this.ys[5]?.draw(185,32),-1!==this.Dh[6]&&(6!==this.kh||this.Ft%20<10)&&this.ys[6]?.draw(212,34)),this.Yi?.draw(520,165),this.Wi?.bind(),this.ds?.draw(0,0),-1===this.fh&&(-1!==this.Dh[this.xh]&&(7===this.xh?this.Fs?.draw(49,0):8===this.xh?this.Us?.draw(81,0):9===this.xh?this.Us?.draw(108,0):10===this.xh?this.Bs?.draw(136,1):11===this.xh?this.Hs?.draw(178,0):12===this.xh?this.Hs?.draw(205,0):13===this.xh&&this.Gs?.draw(233,0)),-1!==this.Dh[8]&&(8!==this.kh||this.Ft%20<10)&&this.ys[7]?.draw(80,2),-1!==this.Dh[9]&&(9!==this.kh||this.Ft%20<10)&&this.ys[8]?.draw(107,3),-1!==this.Dh[10]&&(10!==this.kh||this.Ft%20<10)&&this.ys[9]?.draw(142,4),-1!==this.Dh[11]&&(11!==this.kh||this.Ft%20<10)&&this.ys[10]?.draw(179,2),-1!==this.Dh[12]&&(12!==this.kh||this.Ft%20<10)&&this.ys[11]?.draw(206,2),-1!==this.Dh[13]&&(13!==this.kh||this.Ft%20<10)&&this.ys[12]?.draw(230,2)),this.Wi?.draw(501,492),this.Bi?.bind()),this.zs&&(this.zs=!1,this.Hi?.bind(),this.us?.draw(0,0),this.pi?.fa(57,33,'Public chat',m.A.xl,!0),0===this.Nh&&this.pi?.fa(57,46,'On',m.A.GREEN,!0),1===this.Nh&&this.pi?.fa(57,46,'Friends',m.A.Ql,!0),2===this.Nh&&this.pi?.fa(57,46,'Off',m.A.RED,!0),3===this.Nh&&this.pi?.fa(57,46,'Hide',m.A.Bc,!0),this.pi?.fa(186,33,'Private chat',m.A.xl,!0),0===this.Ph&&this.pi?.fa(186,46,'On',m.A.GREEN,!0),1===this.Ph&&this.pi?.fa(186,46,'Friends',m.A.Ql,!0),2===this.Ph&&this.pi?.fa(186,46,'Off',m.A.RED,!0),this.pi?.fa(326,33,'Trade/duel',m.A.xl,!0),0===this.Fh&&this.pi?.fa(326,46,'On',m.A.GREEN,!0),1===this.Fh&&this.pi?.fa(326,46,'Friends',m.A.Ql,!0),2===this.Fh&&this.pi?.fa(326,46,'Off',m.A.RED,!0),this.pi?.fa(462,38,'Report abuse',m.A.xl,!0),this.Hi?.draw(0,471),this.Bi?.bind()),this.Xe=0};Gf=()=>{if(this.je++,this.Xf(),this.jf(),this.zf(),this.Zf(),this.qf(),!this.qe){let t=this.Bn;(this.An/256|0)>t&&(t=this.An/256|0),this.rn[4]&&this.an[4]+128>t&&(t=this.an[4]+128);const i=this.Gn+this.tn&2047;if(this.Dr&&this.$f(this.Yn,this.Jf(this.Fn,this.Dr.x,this.Dr.z)-50,this.Vn,i,t,3*t+600),$.K.dt++,$.K.dt>1802){$.K.dt=0,this.Gt.lf(O.A.Qf),this.Gt.p1(0);const t=this.Gt.qc;this.Gt.p2(29711),this.Gt.p1(70),this.Gt.p1(256*Math.random()|0),this.Gt.p1(242),this.Gt.p1(186),this.Gt.p1(39),this.Gt.p1(61),2*Math.random()|0||this.Gt.p1(13),2*Math.random()|0||this.Gt.p2(57856),this.Gt.p2(65536*Math.random()|0),this.Gt.tu(this.Gt.qc-t)}}let t;t=this.qe?this.iu():this.su();const i=this.fn,s=this.un,h=this.dn,e=this.wn,n=this.yn;let r;for(let t=0;t<5;t++)this.rn[t]&&(r=Math.random()*(2*this.ln[t]+1)-this.ln[t]+Math.sin(this.nn[t]*(this.cn[t]/100))*this.an[t]|0,0===t&&(this.fn+=r),1===t&&(this.un+=r),2===t&&(this.dn+=r),3===t&&(this.yn=this.yn+r&2047),4===t&&(this.wn+=r,this.wn<128&&(this.wn=128),this.wn>383&&(this.wn=383)));r=d.A.hu,p.A.eu=!0,p.A.nu=0,p.A.Xl=this.Xl-8,p.A.jl=this.jl-11,u.A.clear(),this.Ve?.draw(this.fn,this.un,this.dn,t,this.yn,this.wn,this.Ft),this.Ve?.ru(),this.ou(),this.lu(),$.K.rt&&this.au(),this.cu(r),this.fu(),this.Bi?.draw(8,11),this.fn=i,this.un=s,this.dn=h,this.wn=e,this.yn=n};uu=()=>{e.A.du?.clear(),e.A.wu?.clear(),r.A.Uo?.clear(),n.A.Uo?.clear(),n.A.yu?.clear(),W.A.Uo?.clear(),l.A.Uo?.clear()};Au=(t,i)=>{this.pu(t.x,i,t.z)};pu=(t,i,s)=>{if(t<128||s<128||t>13056||s>13056)return this.qn=-1,void(this.$n=-1);const h=this.Jf(this.Fn,t,s)-i;this.mu(t,h,s)};mu=(t,i,s)=>{let h=t-this.fn,e=i-this.un,n=s-this.dn;const r=d.A.sin[this.wn],o=d.A.cos[this.wn],l=d.A.sin[this.yn],a=d.A.cos[this.yn];let c=n*l+h*a>>16;n=n*a-h*l>>16,h=c,c=e*o-n*r>>16,n=e*r+n*o>>16,e=c,n>=50?(this.qn=d.A.ma+((h<<9)/n|0),this.$n=d.A.Ia+((e<<9)/n|0)):(this.qn=-1,this.$n=-1)};ou=()=>{this.zr=0;for(let t=-1;t<this.cr+this.Ir;t++){let i=null;if(i=-1===t?this.Dr:t<this.cr?this.ar[this.ur[t]]:this.mr[this.gr[t-this.cr]],i&&i.isVisible()){if(t<this.cr){let s=30;const h=i;if(0!==h.Iu&&(this.Au(i,i.height+15),this.qn>-1))for(let t=0;t<8;t++)h.Iu&1<<t&&(this.Cs[t]?.draw(this.qn-12,this.$n-s),s-=25);t>=0&&10===this.mh&&this._h===this.ur[t]&&(this.Au(i,i.height+15),this.qn>-1&&this.Cs[7]?.draw(this.qn-12,this.$n-s))}else 1===this.mh&&this.Ih===this.gr[t-this.cr]&&this.Ft%20<10&&(this.Au(i,i.height+15),this.qn>-1&&this.Cs[2]?.draw(this.qn-12,this.$n-28));if(i.gu&&(t>=this.cr||0===this.Nh||3===this.Nh||1===this.Nh&&this.Eu(i.name))&&(this.Au(i,i.height),this.qn>-1&&this.zr<$.K.Zr&&this.mi&&(this.Qr[this.zr]=this.mi._u(i.gu)/2|0,this.Jr[this.zr]=this.mi.height,this.qr[this.zr]=this.qn,this.$r[this.zr]=this.$n,this.io[this.zr]=i.Cu,this.so[this.zr]=i.Tu,this.ho[this.zr]=i.Ou,this.eo[this.zr++]=i.gu,0===this.Jh&&1===i.Tu&&(this.Jr[this.zr]+=10,this.$r[this.zr]+=5),0===this.Jh&&2===i.Tu&&(this.Qr[this.zr]=60))),i.vu>this.Ft+100&&(this.Au(i,i.height+15),this.qn>-1)){let t=30*i.bu/i.Lu|0;t>30&&(t=30),u.A.fillRect(this.qn-15,this.$n-3,t,5,m.A.GREEN),u.A.fillRect(this.qn-15+t,this.$n-3,30-t,5,m.A.RED)}if(i.vu>this.Ft+330&&(this.Au(i,i.height/2|0),this.qn>-1&&(this._s[i.Ru]?.draw(this.qn-12,this.$n-12),this.Ai?.Rc(this.qn,this.$n+4,i.Su.toString(),m.A.Jl),this.Ai?.Rc(this.qn-1,this.$n+3,i.Su.toString(),m.A.xl))),$.K.rt){if(i.pathLength>0||i.Mu>=this.Ft||i.ku>this.Ft){const t=64*i.size;this.xu(128*i.bf[0]+t,128*i.Lf[0]+t,this.Fn,i.size,65535,!1)}this.xu(i.x,i.z,this.Fn,i.size,6710886,!1);let s=0;if(this.Au(i,i.height+30),t<this.cr){const t=i;if(this.Ai?.Rc(this.qn,this.$n+s,t.name,m.A.xl),s-=15,-1!==t.Du&&this.Ft-t.Nu<30){if((t.Du&W.A.Pu)===W.A.Pu&&(this.Ai?.Rc(this.qn,this.$n+s,'Appearance Update',m.A.xl),s-=15),(t.Du&W.A.Fu)===W.A.Fu&&(this.Ai?.Rc(this.qn,this.$n+s,'Play Seq: '+t.Uu,m.A.xl),s-=15),(t.Du&W.A.Bu)===W.A.Bu){let i=t.Gu;i>32767&&(i-=32768),this.Ai?.Rc(this.qn,this.$n+s,'Face Entity: '+i,m.A.xl),s-=15}(t.Du&W.A.Hu)===W.A.Hu&&(this.Ai?.Rc(this.qn,this.$n+s,'Say',m.A.xl),s-=15),(t.Du&W.A.Wu)===W.A.Wu&&(this.Ai?.Rc(this.qn,this.$n+s,'Hit: Type '+t.Ru+' Amount '+t.Su+' HP '+t.bu+'/'+t.Lu,m.A.xl),s-=15),(t.Du&W.A.Yu)===W.A.Yu&&(this.Ai?.Rc(this.qn,this.$n+s,'Face Coord: '+t.Vu/2+' '+t.Ku/2,m.A.xl),s-=15),(t.Du&W.A.Xu)===W.A.Xu&&(this.Ai?.Rc(this.qn,this.$n+s,'Chat',m.A.xl),s-=15),(t.Du&W.A.ju)===W.A.ju&&(this.Ai?.Rc(this.qn,this.$n+s,'Play Spotanim: '+t.zu,m.A.xl),s-=15),(t.Du&W.A.Zu)===W.A.Zu&&(this.Ai?.Rc(this.qn,this.$n+s,'Exact Move',m.A.xl),s-=15)}}else{const t=i;let s=0;if(this.Au(i,i.height+30),this.Ai?.Rc(this.qn,this.$n+s,t.type?.name??null,m.A.xl),s-=15,-1!==t.Du&&this.Ft-t.Nu<30){if((t.Du&Y.A.Fu)===Y.A.Fu&&(this.Ai?.Rc(this.qn,this.$n+s,'Play Seq: '+t.Uu,m.A.xl),s-=15),(t.Du&Y.A.Bu)===Y.A.Bu){let i=t.Gu;i>32767&&(i-=32768),this.Ai?.Rc(this.qn,this.$n+s,'Face Entity: '+i,m.A.xl),s-=15}(t.Du&Y.A.Hu)===Y.A.Hu&&(this.Ai?.Rc(this.qn,this.$n+s,'Say',m.A.xl),s-=15),(t.Du&Y.A.Wu)===Y.A.Wu&&(this.Ai?.Rc(this.qn,this.$n+s,'Hit: Type '+t.Ru+' Amount '+t.Su+' HP '+t.bu+'/'+t.Lu,m.A.xl),s-=15),(t.Du&Y.A.qu)===Y.A.qu&&(this.Ai?.Rc(this.qn,this.$n+s,'Change Type: '+t.type?.id??null,m.A.xl),s-=15),(t.Du&Y.A.ju)===Y.A.ju&&(this.Ai?.Rc(this.qn,this.$n+s,'Play Spotanim: '+t.zu,m.A.xl),s-=15),(t.Du&Y.A.Yu)===Y.A.Yu&&(this.Ai?.Rc(this.qn,this.$n+s,'Face Coord: '+t.Vu/2+' '+t.Ku/2,m.A.xl),s-=15)}}}}}if($.K.rt)for(let t=0;t<this.Ro.length;t++){const i=this.Ro[t];!i||i.level!==this.Fn||i.x<0||i.z<0||i.x>=104||i.z>=104||this.xu(128*i.x+64,128*i.z+64,i.level,1,16776960,!1)}for(let t=0;t<this.zr;t++){const i=this.qr[t];let s=this.$r[t];const h=this.Qr[t],e=this.Jr[t];let n=!0;for(;n;){n=!1;for(let r=0;r<t;r++)s+2>this.$r[r]-this.Jr[r]&&s-e<this.$r[r]+2&&i-h<this.qr[r]+this.Qr[r]&&i+h>this.qr[r]-this.Qr[r]&&this.$r[r]-this.Jr[r]<s&&(s=this.$r[r]-this.Jr[r],n=!0)}this.qn=this.qr[t],this.$n=this.$r[t]=s;const r=this.eo[t];if(0===this.Jh){let i=m.A.Ql;if(this.io[t]<6&&(i=m.A.$u[this.io[t]]),6===this.io[t]&&(i=this.je%20<10?m.A.RED:m.A.Ql),7===this.io[t]&&(i=this.je%20<10?m.A.BLUE:m.A.Bc),8===this.io[t]&&(i=this.je%20<10?45056:8454016),9===this.io[t]){const s=150-this.ho[t];s<50?i=1280*s+m.A.RED:s<100?i=m.A.Ql-327680*(s-50):s<150&&(i=5*(s-100)+m.A.GREEN)}if(10===this.io[t]){const s=150-this.ho[t];s<50?i=5*s+m.A.RED:s<100?i=m.A.Gc-327680*(s-50):s<150&&(i=327680*(s-100)+m.A.BLUE-5*(s-100))}if(11===this.io[t]){const s=150-this.ho[t];s<50?i=m.A.xl-327685*s:s<100?i=327685*(s-50)+m.A.GREEN:s<150&&(i=m.A.xl-327680*(s-100))}if(0===this.so[t]&&(this.mi?.Rc(this.qn,this.$n+1,r,m.A.Jl),this.mi?.Rc(this.qn,this.$n,r,i)),1===this.so[t]&&(this.mi?.Ju(this.qn,this.$n+1,r,m.A.Jl,this.je),this.mi?.Ju(this.qn,this.$n,r,i,this.je)),2===this.so[t]){const s=this.mi?._u(r)??0,h=(150-this.ho[t])*(s+100)/150;u.A.Rl(this.qn-50,0,this.qn+50,334),this.mi?.ql(this.qn+50-h,this.$n+1,r,m.A.Jl),this.mi?.ql(this.qn+50-h,this.$n,r,i),u.A.Qu()}}else this.mi?.Rc(this.qn,this.$n+1,r,m.A.Jl),this.mi?.Rc(this.qn,this.$n,r,m.A.Ql)}};lu=()=>{2===this.mh&&this.Cs[2]&&(this.pu((this.Ch-this.bn<<7)+this.gh,2*this.Oh,(this.Th-this.Ln<<7)+this.Eh),this.qn>-1&&this.Ft%20<10&&this.Cs[2].draw(this.qn-12,this.$n-28))};au=()=>{const t=507;let i=13;this.Mo?this.Ai?.td(t,i,'tock',m.A.Ql,!0):this.mi?.td(t,i,'tick',m.A.Ql,!0),i+=13,this.Ai?.td(t,i,`Fps: ${this.sd}, ${this.hd} ms`,m.A.Ql,!0),i+=13,this.Ai?.td(t,i,`Draw: ${this.ms.toFixed(1)}, Avg: ${this.ed.toFixed(1)}, Slow: ${this.nd.toFixed(1)} ms`,m.A.Ql,!0),i+=13,this.Ai?.td(t,i,`Occluders: ${x.A.rd[x.A.od]} Active: ${x.A.ld}`,m.A.Ql,!0),i+=13,this.Ai?.td(t,i,'Local Pos: '+(this.Dr?.x??-1)+', '+(this.Dr?.z??-1)+', '+(this.Dr?.y??-1),m.A.Ql,!0),i+=13,this.Ai?.td(t,i,'Camera Pos: '+this.fn+', '+this.dn+', '+this.un,m.A.Ql,!0),i+=13,this.Ai?.td(t,i,'Camera Angle: '+this.yn+', '+this.wn,m.A.Ql,!0),i+=13,this.Ai?.td(t,i,'Cutscene Source: '+this.hr+', '+this.er+' '+this.nr+'; '+this.rr+', '+this.lr,m.A.Ql,!0),i+=13,this.Ai?.td(t,i,'Cutscene Destination: '+this.Jn+', '+this.Qn+' '+this.tr+'; '+this.ir+', '+this.sr,m.A.Ql,!0),$.K.lt&&(i+=13,this.Ai?.td(t,i,'Instructions:',m.A.Ql,!0),i+=13,this.Ai?.td(t,i,'- Arrows to move Camera',m.A.Ql,!0),i+=13,this.Ai?.td(t,i,'- Shift to control Source or Dest',m.A.Ql,!0),i+=13,this.Ai?.td(t,i,'- Alt to control Height',m.A.Ql,!0),i+=13,this.Ai?.td(t,i,'- Ctrl to control Modifier',m.A.Ql,!0))};xu=(t,i,s,h,e,n)=>{const r=this.Jf(s,t,i),o=64*h;this.mu(t-o,r,i-o);const l=this.qn,a=this.$n;this.mu(t+o,r,i-o);const c=this.qn,f=this.$n;this.mu(t-o,r,i+o);const d=this.qn,w=this.$n;this.mu(t+o,r,i+o);const y=this.qn,A=this.$n;-1!==l&&-1!==c&&-1!==d&&-1!==y&&(n&&(u.A.ad(l,a,y,A,(16711422&e)>>1),u.A.ad(c,f,d,w,(16711422&e)>>1)),u.A.ad(l,a,c,f,e),u.A.ad(l,a,d,w,e),u.A.ad(c,f,y,A,e),u.A.ad(d,w,y,A,e))};xf(){const t=1==this.yf[5]?2:1;1==this.yf[6]?(1==this.yf[1]?(this.Jn-=t,this.Jn<1&&(this.Jn=1)):1==this.yf[2]&&(this.Jn+=t,this.Jn>102&&(this.Jn=102)),1==this.yf[3]?1==this.yf[7]?this.tr+=2*t:(this.Qn+=1,this.Qn>102&&(this.Qn=102)):1==this.yf[4]&&(1==this.yf[7]?this.tr-=2*t:(this.Qn-=1,this.Qn<1&&(this.Qn=1)))):(1==this.yf[1]?(this.hr-=t,this.hr<1&&(this.hr=1)):1==this.yf[2]&&(this.hr+=t,this.hr>102&&(this.hr=102)),1==this.yf[3]?1==this.yf[7]?this.nr+=2*t:(this.er+=t,this.er>102&&(this.er=102)):1==this.yf[4]&&(1==this.yf[7]?this.nr-=2*t:(this.er-=t,this.er<1&&(this.er=1)))),this.fn=128*this.hr+64,this.dn=128*this.er+64,this.un=this.Jf(this.Fn,this.hr,this.er)-this.nr;const i=128*this.Jn+64,s=128*this.Qn+64,h=this.Jf(this.Fn,this.Jn,this.Qn)-this.tr,e=i-this.fn,n=h-this.un,r=s-this.dn,o=0|Math.sqrt(e*e+r*r);this.wn=325.949*Math.atan2(n,o)&2047,this.yn=-325.949*Math.atan2(e,r)&2047,this.wn<128&&(this.wn=128),this.wn>383&&(this.wn=383)}fu=()=>{if(this.fd(),1===this.$s&&this.Os[this.Js/100|0]?.draw(this.Qs-8-8,this.th-8-11),2===this.$s&&this.Os[4+(this.Js/100|0)]?.draw(this.Qs-8-8,this.th-8-11),-1!==this.Zs&&(this.gl(this.Zs,this.Xe),this.Ll(c.A.Fo[this.Zs],0,0,0)),this.ud(),this.sh?0===this.hh&&this.dd():(this.mf(),this.wd()),1===this.Pr&&(this.Gr>0||1===this.Hr?this.Cs[1]?.draw(472,258):this.Cs[1]?.draw(472,296)),this.Gr>0&&(this.Cs[0]?.draw(472,296),this.pi?.Rc(484,329,'Level: '+this.Gr,m.A.Ql)),1===this.Hr&&(this.Cs[6]?.draw(472,296),this.pi?.Rc(484,329,'Arena',m.A.Ql)),0!==this.jt){let t=this.jt/50|0;const i=t/60|0;t%=60,t<10?this.pi?.ql(4,329,'System update in: '+i+':0'+t,m.A.Ql):this.pi?.ql(4,329,'System update in: '+i+':'+t,m.A.Ql)}};fd=()=>{if(0===this.$h)return;const t=this.pi;let i=0;0!==this.jt&&(i=1);for(let s=0;s<100;s++){if(!this.jh[s])continue;const h=this.messageType[s];let e;if((3===h||7===h)&&(7===h||0===this.Ph||1===this.Ph&&this.Eu(this.zh[s]))&&(e=329-13*i,t?.ql(4,e,'From '+this.zh[s]+': '+this.jh[s],m.A.Jl),t?.ql(4,e-1,'From '+this.zh[s]+': '+this.jh[s],m.A.Bc),i++,i>=5))return;if(5===h&&this.Ph<2&&(e=329-13*i,t?.ql(4,e,this.jh[s],m.A.Jl),t?.ql(4,e-1,this.jh[s],m.A.Bc),i++,i>=5))return;if(6===h&&this.Ph<2&&(e=329-13*i,t?.ql(4,e,'To '+this.zh[s]+': '+this.jh[s],m.A.Jl),t?.ql(4,e-1,'To '+this.zh[s]+': '+this.jh[s],m.A.Bc),i++,i>=5))return}};ud=()=>{if(!this.Dr)return;const t=(this.Dr.x>>7)+this.bn,i=(this.Dr.z>>7)+this.Ln;if(this.Gr=t>=2944&&t<3392&&i>=3520&&i<6400?1+((i-3520)/8|0):t>=2944&&t<3392&&i>=9920&&i<12800?1+((i-9920)/8|0):0,this.Hr=0,t>=3328&&t<3392&&i>=3200&&i<3264){const s=63&t,h=63&i;(s>=4&&s<=29&&h>=44&&h<=58||s>=36&&s<=61&&h>=44&&h<=58||s>=4&&s<=29&&h>=25&&h<=39||s>=36&&s<=61&&h>=25&&h<=39||s>=4&&s<=29&&h>=6&&h<=20||s>=36&&s<=61&&h>=6&&h<=20)&&(this.Hr=1)}0===this.Hr&&t>=3328&&t<=3393&&i>=3203&&i<=3325&&(this.Hr=2),this.ih=0,(t>=3053&&t<=3156&&i>=3056&&i<=3136||t>=3072&&t<=3118&&i>=9492&&i<=9535)&&(this.ih=1),1===this.ih&&t>=3139&&t<=3199&&i>=3008&&i<=3062&&(this.ih=0)};Hf=()=>{this.Fi?.bind(),this.ss&&(d.A.Ec=this.ss),this.ls?.draw(0,0),-1!==this.fh?this.Ll(c.A.Fo[this.fh],0,0,0):-1!==this.Dh[this.xh]&&this.Ll(c.A.Fo[this.Dh[this.xh]],0,0,0),this.sh&&1===this.hh&&this.dd(),this.Fi?.draw(562,231),this.Bi?.bind(),this.hs&&(d.A.Ec=this.hs)};Yf=()=>{if(this.Gi?.bind(),this.ts&&(d.A.Ec=this.ts),this.cs?.draw(0,0),this.Gh)this.mi?.Rc(239,40,this.Hh,m.A.Jl),this.mi?.Rc(239,60,this.Wh+'*',m.A.yd);else if(this.Kh)this.mi?.Rc(239,40,'Enter amount:',m.A.Jl),this.mi?.Rc(239,60,this.Vh+'*',m.A.yd);else if(this.Mh)this.mi?.Rc(239,40,this.Mh,m.A.Jl),this.mi?.Rc(239,60,'Click to continue',m.A.yd);else if(-1!==this.uh)this.Ll(c.A.Fo[this.uh],0,0,0);else if(-1===this.Xh){let t=this.pi;0===$.K.ot&&(t=this.Ii);let i=0;u.A.Rl(0,0,463,77);for(let s=0;s<100;s++){const h=this.jh[s];if(!h)continue;const e=this.messageType[s],n=this.yh+70-14*i;0===e&&(n>0&&n<110&&t?.ql(4,n,h,m.A.Jl),i++),1===e&&(n>0&&n<110&&(t?.ql(4,n,this.zh[s]+':',m.A.xl),t?.ql(t._u(this.zh[s])+12,n,h,m.A.BLUE)),i++),2===e&&(0===this.Nh||1===this.Nh&&this.Eu(this.zh[s]))&&(n>0&&n<110&&(t?.ql(4,n,this.zh[s]+':',m.A.Jl),t?.ql(t._u(this.zh[s])+12,n,h,m.A.BLUE)),i++),3!==e&&7!==e||0!==this.$h||!(7===e||0===this.Ph||1===this.Ph&&this.Eu(this.zh[s]))||(n>0&&n<110&&(t?.ql(4,n,'From '+this.zh[s]+':',m.A.Jl),t?.ql(t._u('From '+this.zh[s])+12,n,h,m.A.Ad)),i++),4===e&&(0===this.Fh||1===this.Fh&&this.Eu(this.zh[s]))&&(n>0&&n<110&&t?.ql(4,n,this.zh[s]+' '+this.jh[s],m.A.pd),i++),5===e&&0===this.$h&&this.Ph<2&&(n>0&&n<110&&t?.ql(4,n,h,m.A.Ad),i++),6===e&&0===this.$h&&this.Ph<2&&(n>0&&n<110&&(t?.ql(4,n,'To '+this.zh[s]+':',m.A.Jl),t?.ql(t._u('To '+this.zh[s])+12,n,h,m.A.Ad)),i++),8===e&&(0===this.Fh||1===this.Fh&&this.Eu(this.zh[s]))&&(n>0&&n<110&&t?.ql(4,n,this.zh[s]+' '+this.jh[s],m.A.md),i++)}u.A.Qu(),this.wh=14*i+7,this.wh<78&&(this.wh=78),this.dl(463,0,this.wh-this.yh-77,this.wh,77),0==$.K.ot?t?.ql(3,90,this.Qh+'*',m.A.Jl):1==$.K.ot?t?.ql(3,90,this.Qh+'*',m.A.BLUE):(t?.ql(4,90,M.A.Na(this.username)+':',m.A.Jl),t?.ql(t._u(this.username+': ')+6,90,this.Qh+'*',m.A.BLUE)),u.A.ml(0,77,m.A.Jl,479)}else this.Ll(c.A.Fo[this.Xh],0,0,0);this.sh&&2===this.hh&&this.dd(),this.Gi?.draw(22,375),this.Bi?.bind(),this.hs&&(d.A.Ec=this.hs)};Vf=()=>{if(this.Ui?.bind(),!this.Dr)return;const t=this.Gn+this.mn&2047;let i=48+(this.Dr.x/32|0),s=464-(this.Dr.z/32|0);this.ps?.Id(21,9,146,151,this.rs,this.os,i,s,t,this.In+256),this.Is?.Id(0,0,33,33,this.es,this.ns,25,25,this.Gn,256);for(let t=0;t<this.He;t++)i=4*this.We[t]+2-(this.Dr.x/32|0),s=4*this.Ye[t]+2-(this.Dr.z/32|0),this.gd(s,this.Vs[t],i);for(let t=0;t<G.A.Zn;t++)for(let h=0;h<G.A.Zn;h++){this.Or[this.Fn][t][h]&&(i=4*t+2-(this.Dr.x/32|0),s=4*h+2-(this.Dr.z/32|0),this.gd(s,this.vs,i))}for(let t=0;t<this.Ir;t++){const h=this.mr[this.gr[t]];h&&h.isVisible()&&h.type&&h.type.Ed&&(i=(h.x/32|0)-(this.Dr.x/32|0),s=(h.z/32|0)-(this.Dr.z/32|0),this.gd(s,this.bs,i))}for(let t=0;t<this.cr;t++){const h=this.ar[this.ur[t]];if(h&&h.isVisible()&&h.name){i=(h.x/32|0)-(this.Dr.x/32|0),s=(h.z/32|0)-(this.Dr.z/32|0);let t=!1;const e=M.A._d(h.name);for(let i=0;i<this.jr;i++)if(e===this.ro[i]&&0!==this.oo[i]){t=!0;break}t?this.gd(s,this.Rs,i):this.gd(s,this.Ls,i)}}0!==this.ze&&(i=4*this.ze+2-(this.Dr.x/32|0),s=4*this.Ze+2-(this.Dr.z/32|0),this.gd(s,this.Ts,i)),u.A.fillRect(93,82,3,3,m.A.xl),this.Bi?.bind()};gd=(t,i,s)=>{if(!i)return;const h=this.Gn+this.mn&2047,e=s*s+t*t;if(e>6400)return;let n=d.A.sin[h],r=d.A.cos[h];n=256*n/(this.In+256)|0,r=256*r/(this.In+256)|0;const o=t*n+s*r>>16,l=t*r-s*n>>16;e>2500&&this.fs?i.Cd(o+94-(i.Zl/2|0),83-l-(i.Td/2|0),this.fs):i.draw(o+94-(i.Zl/2|0),83-l-(i.Td/2|0))};Od=t=>{if(!this.ps)return;const i=this.ps.Ic,s=i.length;for(let t=0;t<s;t++)i[t]=0;for(let s=1;s<G.A.Zn-1;s++){let h=512*(G.A.Zn-1-s)*4+24628;for(let e=1;e<G.A.Zn-1;e++)!this.Xn||24&this.Xn[t][e][s]||this.Ve?.vd(t,e,s,i,h,512),t<3&&this.Xn&&8&this.Xn[t+1][e][s]&&this.Ve?.vd(t+1,e,s,i,h,512),h+=4}const h=(238+(20*Math.random()|0)-10<<16)+(238+(20*Math.random()|0)-10<<8)+(20*Math.random()|0)+238-10,n=238+(20*Math.random()|0)-10<<16;this.ps.bind();for(let i=1;i<G.A.Zn-1;i++)for(let s=1;s<G.A.Zn-1;s++)!this.Xn||24&this.Xn[t][s][i]||this.bd(s,i,t,h,n),t<3&&this.Xn&&8&this.Xn[t+1][s][i]&&this.bd(s,i,t+1,h,n);this.Bi?.bind(),this.He=0;for(let t=0;t<G.A.Zn;t++)for(let i=0;i<G.A.Zn;i++){let s=this.Ve?.Ld(this.Fn,t,i)??0;if(0===s)continue;s=s>>14&32767;const h=e.A.get(s).Rd;if(h<0)continue;let n=t,r=i;if(22!==h&&29!==h&&34!==h&&36!==h&&46!==h&&47!==h&&48!==h){const s=G.A.Zn,h=G.A.Zn,e=this.Nn[this.Fn];if(e){const o=e.flags;for(let e=0;e<10;e++){const e=4*Math.random()|0;0===e&&n>0&&n>t-3&&(o[G.A.index(n-1,r)]&H.A.Sd)===H.A.OPEN&&n--,1===e&&n<s-1&&n<t+3&&(o[G.A.index(n+1,r)]&H.A.Md)===H.A.OPEN&&n++,2===e&&r>0&&r>i-3&&(o[G.A.index(n,r-1)]&H.A.kd)===H.A.OPEN&&r--,3===e&&r<h-1&&r<i+3&&(o[G.A.index(n,r+1)]&H.A.xd)===H.A.OPEN&&r++}}}this.Vs[this.He]=this.Es[h],this.We[this.He]=n,this.Ye[this.He]=r,this.He++}};bd=(t,i,s,h,n)=>{if(!this.Ve||!this.ps)return;let r=this.Ve.Dd(s,t,i);if(0!==r){const o=this.Ve.Nd(s,t,i,r),l=o>>6&3,a=31&o;let c=h;r>0&&(c=n);const f=this.ps.Ic,u=4*t+512*(103-i)*4+24624,d=r>>14&32767,w=e.A.get(d);if(-1===w.Pd)a!==P.A.Fd.id&&a!==P.A.Ud.id||(l===F.A.Bd?(f[u]=c,f[u+512]=c,f[u+1024]=c,f[u+1536]=c):l===F.A.Gd?(f[u]=c,f[u+1]=c,f[u+2]=c,f[u+3]=c):l===F.A.Hd?(f[u+3]=c,f[u+3+512]=c,f[u+3+1024]=c,f[u+3+1536]=c):l===F.A.Wd&&(f[u+1536]=c,f[u+1536+1]=c,f[u+1536+2]=c,f[u+1536+3]=c)),a===P.A.Yd.id&&(l===F.A.Bd?f[u]=c:l===F.A.Gd?f[u+3]=c:l===F.A.Hd?f[u+3+1536]=c:l===F.A.Wd&&(f[u+1536]=c)),a===P.A.Ud.id&&(l===F.A.Wd?(f[u]=c,f[u+512]=c,f[u+1024]=c,f[u+1536]=c):l===F.A.Bd?(f[u]=c,f[u+1]=c,f[u+2]=c,f[u+3]=c):l===F.A.Gd?(f[u+3]=c,f[u+3+512]=c,f[u+3+1024]=c,f[u+3+1536]=c):l===F.A.Hd&&(f[u+1536]=c,f[u+1536+1]=c,f[u+1536+2]=c,f[u+1536+3]=c));else{const s=this.gs[w.Pd];if(s){const h=(4*w.width-s.width)/2|0,e=(4*w.length-s.height)/2|0;s.draw(4*t+48+h,4*(G.A.Zn-i-w.length)+e+48)}}}if(r=this.Ve.Vd(s,t,i),0!==r){const h=this.Ve.Nd(s,t,i,r),n=h>>6&3,o=31&h,l=r>>14&32767,a=e.A.get(l);if(-1!==a.Pd){const s=this.gs[a.Pd];if(s){const h=(4*a.width-s.width)/2|0,e=(4*a.length-s.height)/2|0;s.draw(4*t+48+h,4*(G.A.Zn-i-a.length)+e+48)}}else if(o===P.A.Kd.id){let s=15658734;r>0&&(s=15597568);const h=this.ps.Ic,e=4*t+512*(G.A.Zn-1-i)*4+24624;n===F.A.Bd||n===F.A.Hd?(h[e+1536]=s,h[e+1024+1]=s,h[e+512+2]=s,h[e+3]=s):(h[e]=s,h[e+512+1]=s,h[e+1024+2]=s,h[e+1536+3]=s)}}if(r=this.Ve.Ld(s,t,i),0!==r){const s=e.A.get(r>>14&32767);if(-1!==s.Pd){const h=this.gs[s.Pd];if(h){const e=(4*s.width-h.width)/2|0,n=(4*s.length-h.height)/2|0;h.draw(4*t+48+e,4*(G.A.Zn-i-s.length)+n+48)}}}};wd=()=>{if(this.lh<2&&0===this.ce&&0===this._e)return;let t;t=1===this.ce&&this.lh<2?'Use '+this.we+' with...':1===this._e&&this.lh<2?this.Oe+'...':this.ah[this.lh-1],this.lh>2&&(t=t+'@whi@ / '+(this.lh-2)+' more options'),this.mi?.Xd(4,15,t,m.A.xl,!0,this.Ft/1e3|0)};dd=()=>{const t=this.eh,i=this.nh,s=this.rh,h=this.oh,e=m.A.jd;u.A.fillRect(t,i,s,h,e),u.A.fillRect(t+1,i+1,s-2,16,m.A.Jl),u.A.kl(t+1,i+18,s-2,h-19,m.A.Jl),this.mi?.ql(t+3,i+14,'Choose Option',e);let n=this.Xl,r=this.jl;0===this.hh&&(n-=8,r-=11),1===this.hh&&(n-=562,r-=231),2===this.hh&&(n-=22,r-=375);for(let h=0;h<this.lh;h++){const e=i+15*(this.lh-1-h)+31;let o=m.A.xl;n>t&&n<t+s&&r>e-13&&r<e+3&&(o=m.A.Ql),this.mi?.da(t+3,e,this.ah[h],o,!0)}};Rf=async()=>{if(0!==this.ne)return;let t=this.Hc;if(1===this._e&&this.Wc>=520&&this.Yc>=165&&this.Wc<=788&&this.Yc<=230&&(t=0),this.sh){if(1!==t){let t=this.Xl,i=this.jl;0===this.hh?(t-=8,i-=11):1===this.hh?(t-=562,i-=231):2===this.hh&&(t-=22,i-=375),(t<this.eh-10||t>this.eh+this.rh+10||i<this.nh-10||i>this.nh+this.oh+10)&&(this.sh=!1,1===this.hh&&(this.Ks=!0),2===this.hh&&(this.Xs=!0))}if(1===t){const t=this.eh,i=this.nh,s=this.rh;let h=this.Wc,e=this.Yc;0===this.hh?(h-=8,e-=11):1===this.hh?(h-=562,e-=231):2===this.hh&&(h-=22,e-=375);let n=-1;for(let r=0;r<this.lh;r++){const o=i+15*(this.lh-1-r)+31;h>t&&h<t+s&&e>o-13&&e<o+3&&(n=r)}-1!==n&&await this._f(n),this.sh=!1,1===this.hh?this.Ks=!0:2===this.hh&&(this.Xs=!0)}}else{if(1===t&&this.lh>0){const t=this.be[this.lh-1];if(602===t||596===t||22===t||892===t||415===t||405===t||38===t||422===t||478===t||347===t||188===t){const t=this.Re[this.lh-1],i=this.Se[this.lh-1];if(c.A.Fo[i].draggable)return this.ae=!1,this.le=0,this.he=i,this.ee=t,this.ne=2,this.re=this.Wc,this.oe=this.Yc,c.A.Fo[i].zd===this.Zs&&(this.ne=1),void(c.A.Fo[i].zd===this.uh&&(this.ne=3))}}if(1===t&&(1===this.ve||this.gf(this.lh-1))&&this.lh>2&&(t=2),1===t&&this.lh>0&&await this._f(this.lh-1),2!==t||this.lh<=0)return;this.Ef()}};Sf=()=>{if(1===this.Hc&&this.Dr){let t=this.Wc-21-561,i=this.Yc-9-5;if(t>=0&&i>=0&&t<146&&i<151){t-=73,i-=75;const s=this.Gn+this.mn&2047;let h=d.A.sin[s],e=d.A.cos[s];h=h*(this.In+256)>>8,e=e*(this.In+256)>>8;const n=i*h+t*e>>11,r=i*e-t*h>>11,o=this.Dr.x+n>>7,l=this.Dr.z-r>>7;this.vf(this.Dr.bf[0],this.Dr.Lf[0],o,l,1,0,0,0,0,0,!0)&&(this.Gt.p1(t),this.Gt.p1(i),this.Gt.p2(this.Gn),this.Gt.p1(57),this.Gt.p1(this.mn),this.Gt.p1(this.In),this.Gt.p1(89),this.Gt.p2(this.Dr.x),this.Gt.p2(this.Dr.z),this.Gt.p1(this.kr),this.Gt.p1(63))}}};gf=t=>{if(t<0)return!1;let i=this.be[t];return i>=2e3&&(i-=2e3),406===i};_f=async t=>{if(t<0)return;this.Kh&&(this.Kh=!1,this.Xs=!0);let i=this.be[t];const s=this.Le[t],h=this.Re[t],r=this.Se[t];if(i>=2e3&&(i-=2e3),903===i||363===i){let s=this.ah[t];const h=s.indexOf('@whi@');if(-1!==h){s=s.substring(h+5).trim();const t=M.A.Na(M.A.Pa(M.A._d(s)));let e=!1;for(let s=0;s<this.cr;s++){const h=this.ar[this.ur[s]];if(h&&h.name&&h.name.toLowerCase()===t.toLowerCase()&&this.Dr){this.vf(this.Dr.bf[0],this.Dr.Lf[0],h.bf[0],h.Lf[0],2,1,1,0,0,0,!1),903===i?this.Gt.lf(O.A.Zd):363===i&&this.Gt.lf(O.A.qd),this.Gt.p2(this.ur[s]),e=!0;break}}e||this.$d(0,'Unable to find '+t,'')}}else if(450===i&&this.Jd(O.A.Qd,h,r,s))this.Gt.p2(this.de),this.Gt.p2(this.fe),this.Gt.p2(this.ue);else if(405===i||38===i||422===i||478===i||347===i)478===i?(3&h||$.K.Tt++,$.K.Tt>=90&&this.Gt.lf(O.A.tw),this.Gt.lf(O.A.iw)):347===i?this.Gt.lf(O.A.sw):422===i?this.Gt.lf(O.A.hw):405===i?($.K._t+=s,$.K._t>=97&&(this.Gt.lf(O.A.ew),this.Gt.p3(14953816)),this.Gt.lf(O.A.nw)):38===i&&this.Gt.lf(O.A.rw),this.Gt.p2(s),this.Gt.p2(h),this.Gt.p2(r),this.me=0,this.pe=r,this.Ae=h,this.ye=2,c.A.Fo[r].zd===this.Zs&&(this.ye=1),c.A.Fo[r].zd===this.uh&&(this.ye=3);else if(728===i||542===i||6===i||963===i||245===i){const t=this.mr[s];t&&this.Dr&&(this.vf(this.Dr.bf[0],this.Dr.Lf[0],t.bf[0],t.Lf[0],2,1,1,0,0,0,!1),this.Qs=this.Wc,this.th=this.Yc,this.$s=2,this.Js=0,542===i?this.Gt.lf(O.A.ow):6===i?(3&s||$.K.Et++,$.K.Et>=124&&(this.Gt.lf(O.A.lw),this.Gt.p4(0)),this.Gt.lf(O.A.aw)):963===i?this.Gt.lf(O.A.cw):728===i?this.Gt.lf(O.A.fw):245===i&&(3&s||$.K.Ct++,$.K.Ct>=85&&(this.Gt.lf(O.A.uw),this.Gt.p2(39596)),this.Gt.lf(O.A.dw)),this.Gt.p2(s))}else if(217===i){if(this.Dr){this.vf(this.Dr.bf[0],this.Dr.Lf[0],h,r,2,0,0,0,0,0,!1)||this.vf(this.Dr.bf[0],this.Dr.Lf[0],h,r,2,1,1,0,0,0,!1),this.Qs=this.Wc,this.th=this.Yc,this.$s=2,this.Js=0,this.Gt.lf(O.A.ww),this.Gt.p2(h+this.bn),this.Gt.p2(r+this.Ln),this.Gt.p2(s),this.Gt.p2(this.de),this.Gt.p2(this.fe),this.Gt.p2(this.ue)}}else if(1175===i){const t=s>>14&32767,i=e.A.get(t);let h;h=i.yw?i.yw:"It's a "+i.name+'.',this.$d(0,h,'')}else if(285===i)this.Jd(O.A.Aw,h,r,s);else if(881===i)this.Gt.lf(O.A.pw),this.Gt.p2(s),this.Gt.p2(h),this.Gt.p2(r),this.Gt.p2(this.de),this.Gt.p2(this.fe),this.Gt.p2(this.ue),this.me=0,this.pe=r,this.Ae=h,this.ye=2,c.A.Fo[r].zd===this.Zs&&(this.ye=1),c.A.Fo[r].zd===this.uh&&(this.ye=3);else if(391===i)this.Gt.lf(O.A.mw),this.Gt.p2(s),this.Gt.p2(h),this.Gt.p2(r),this.Gt.p2(this.Ce),this.me=0,this.pe=r,this.Ae=h,this.ye=2,c.A.Fo[r].zd===this.Zs&&(this.ye=1),c.A.Fo[r].zd===this.uh&&(this.ye=3);else if(660===i)this.sh?this.Ve?.click(h-8,r-11):this.Ve?.click(this.Wc-8,this.Yc-11);else{if(188===i)return this.ce=1,this.fe=h,this.ue=r,this.de=s,this.we=n.A.get(s).name,void(this._e=0);if(44===i)this.Ie||(this.Gt.lf(O.A.Iw),this.Gt.p2(r),this.Ie=!0);else if(1773===i){const t=n.A.get(s);let i;i=r>=1e5?r+' x '+t.name:t.yw?t.yw:"It's a "+t.name+'.',this.$d(0,i,'')}else if(900===i){const t=this.mr[s];t&&this.Dr&&(this.vf(this.Dr.bf[0],this.Dr.Lf[0],t.bf[0],t.Lf[0],2,1,1,0,0,0,!1),this.Qs=this.Wc,this.th=this.Yc,this.$s=2,this.Js=0,this.Gt.lf(O.A.gw),this.Gt.p2(s),this.Gt.p2(this.de),this.Gt.p2(this.fe),this.Gt.p2(this.ue))}else if(1373===i||1544===i||151===i||1101===i){const t=this.ar[s];t&&this.Dr&&(this.vf(this.Dr.bf[0],this.Dr.Lf[0],t.bf[0],t.Lf[0],2,1,1,0,0,0,!1),this.Qs=this.Wc,this.th=this.Yc,this.$s=2,this.Js=0,1101===i?this.Gt.lf(O.A.qd):151===i?($.K.bt++,$.K.bt>=90&&(this.Gt.lf(O.A.Ew),this.Gt.p2(31114)),this.Gt.lf(O.A._w)):1373===i?this.Gt.lf(O.A.Zd):1544===i&&this.Gt.lf(O.A.Cw),this.Gt.p2(s))}else if(265===i){const t=this.mr[s];t&&this.Dr&&(this.vf(this.Dr.bf[0],this.Dr.Lf[0],t.bf[0],t.Lf[0],2,1,1,0,0,0,!1),this.Qs=this.Wc,this.th=this.Yc,this.$s=2,this.Js=0,this.Gt.lf(O.A.Tw),this.Gt.p2(s),this.Gt.p2(this.Ce))}else if(679===i){const i=this.ah[t],s=i.indexOf('@whi@');if(-1!==s){const t=M.A._d(i.substring(s+5).trim());let h=-1;for(let i=0;i<this.jr;i++)if(this.ro[i]===t){h=i;break}-1!==h&&this.oo[h]>0&&(this.Xs=!0,this.Kh=!1,this.Gh=!0,this.Wh='',this.Yh=3,this.lo=this.ro[h],this.Hh='Enter message to send to '+this.no[h])}}else if(55===i)this.Jd(O.A.Ow,h,r,s)&&this.Gt.p2(this.Ce);else if(224===i||993===i||99===i||746===i||877===i){if(this.Dr){this.vf(this.Dr.bf[0],this.Dr.Lf[0],h,r,2,0,0,0,0,0,!1)||this.vf(this.Dr.bf[0],this.Dr.Lf[0],h,r,2,1,1,0,0,0,!1),this.Qs=this.Wc,this.th=this.Yc,this.$s=2,this.Js=0,224===i?this.Gt.lf(O.A.bw):746===i?this.Gt.lf(O.A.Lw):877===i?this.Gt.lf(O.A.Rw):99===i?this.Gt.lf(O.A.Sw):993===i&&this.Gt.lf(O.A.Mw),this.Gt.p2(h+this.bn),this.Gt.p2(r+this.Ln),this.Gt.p2(s)}}else if(1607===i){const t=this.mr[s];if(t&&t.type){let i;i=t.type.yw?t.type.yw:"It's a "+t.type.name+'.',this.$d(0,i,'')}}else if(504===i)this.Jd(O.A.kw,h,r,s);else{if(930===i){const t=c.A.Fo[r];this._e=1,this.Ce=r,this.Te=t.xw,this.ce=0;let i=t.Dw;i&&-1!==i.indexOf(' ')&&(i=i.substring(0,i.indexOf(' ')));let s=t.Dw;return s&&-1!==s.indexOf(' ')&&(s=s.substring(s.indexOf(' ')+1)),this.Oe=i+' '+t.action+' '+s,void(16===this.Te&&(this.Ks=!0,this.xh=3,this.js=!0))}if(951===i){const t=c.A.Fo[r];let i=!0;t.Dl>0&&(i=this.Nw(t)),i&&(this.Gt.lf(O.A.Pw),this.Gt.p2(r))}else if(602===i||596===i||22===i||892===i||415===i)22===i?this.Gt.lf(O.A.Fw):415===i?(3&r||$.K.vt++,$.K.vt>=55&&(this.Gt.lf(O.A.Uw),this.Gt.p4(0)),this.Gt.lf(O.A.Bw)):602===i?this.Gt.lf(O.A.Gw):892===i?(3&h||$.K.Lt++,$.K.Lt>=130&&(this.Gt.lf(O.A.Hw),this.Gt.p1(177)),this.Gt.lf(O.A.Ww)):596===i&&this.Gt.lf(O.A.Yw),this.Gt.p2(s),this.Gt.p2(h),this.Gt.p2(r),this.me=0,this.pe=r,this.Ae=h,this.ye=2,c.A.Fo[r].zd===this.Zs&&(this.ye=1),c.A.Fo[r].zd===this.uh&&(this.ye=3);else if(581===i)3&s||$.K.gt++,$.K.gt>=99&&(this.Gt.lf(O.A.Vw),this.Gt.p4(0)),this.Jd(O.A.Kw,h,r,s);else if(965===i){if(this.Dr){this.vf(this.Dr.bf[0],this.Dr.Lf[0],h,r,2,0,0,0,0,0,!1)||this.vf(this.Dr.bf[0],this.Dr.Lf[0],h,r,2,1,1,0,0,0,!1),this.Qs=this.Wc,this.th=this.Yc,this.$s=2,this.Js=0,this.Gt.lf(O.A.Xw),this.Gt.p2(h+this.bn),this.Gt.p2(r+this.Ln),this.Gt.p2(s),this.Gt.p2(this.Ce)}}else if(1501===i)$.K.Ot+=this.Ln,$.K.Ot>=92&&(this.Gt.lf(O.A.jw),this.Gt.p4(0)),this.Jd(O.A.zw,h,r,s);else if(364===i)this.Jd(O.A.Zw,h,r,s);else if(1102===i){const t=n.A.get(s);let i;i=t.yw?t.yw:"It's a "+t.name+'.',this.$d(0,i,'')}else if(960===i){this.Gt.lf(O.A.Pw),this.Gt.p2(r);const t=c.A.Fo[r];if(t.scripts&&t.scripts[0]&&5===t.scripts[0][0]){const i=t.scripts[0][1];t.ul&&this.ge[i]!==t.ul[0]&&(this.ge[i]=t.ul[0],await this.qw(i),this.Ks=!0)}}else if(34===i){const i=this.ah[t],s=i.indexOf('@whi@');if(-1!==s){this.$w(),this.De=i.substring(s+5).trim(),this.Ne=!1;for(let t=0;t<c.A.Fo.length;t++)if(c.A.Fo[t]&&c.A.Fo[t].Dl===c.A.Za){this.Pe=this.Zs=c.A.Fo[t].zd;break}}}else if(947===i)this.$w();else if(367===i){const t=this.ar[s];t&&this.Dr&&(this.vf(this.Dr.bf[0],this.Dr.Lf[0],t.bf[0],t.Lf[0],2,1,1,0,0,0,!1),this.Qs=this.Wc,this.th=this.Yc,this.$s=2,this.Js=0,this.Gt.lf(O.A.Jw),this.Gt.p2(s),this.Gt.p2(this.de),this.Gt.p2(this.fe),this.Gt.p2(this.ue))}else if(465===i){this.Gt.lf(O.A.Pw),this.Gt.p2(r);const t=c.A.Fo[r];if(t.scripts&&t.scripts[0]&&5===t.scripts[0][0]){const i=t.scripts[0][1];this.ge[i]=1-this.ge[i],await this.qw(i),this.Ks=!0}}else if(406===i||436===i||557===i||556===i){const s=this.ah[t],h=s.indexOf('@whi@');if(-1!==h){const t=M.A._d(s.substring(h+5).trim());406===i?this.Qw(t):436===i?this.ty(t):557===i?this.iy(t):556===i&&this.sy(t)}}else if(651===i){const t=this.ar[s];t&&this.Dr&&(this.vf(this.Dr.bf[0],this.Dr.Lf[0],t.bf[0],t.Lf[0],2,1,1,0,0,0,!1),this.Qs=this.Wc,this.th=this.Yc,this.$s=2,this.Js=0,this.Gt.lf(O.A.hy),this.Gt.p2(s),this.Gt.p2(this.Ce))}}}this.ce=0,this._e=0};Nw=t=>{const i=t.Dl;if(i===c.A.ey&&(this.Xs=!0,this.Kh=!1,this.Gh=!0,this.Wh='',this.Yh=1,this.Hh='Enter name of friend to add to list'),i===c.A.ny&&(this.Xs=!0,this.Kh=!1,this.Gh=!0,this.Wh='',this.Yh=2,this.Hh='Enter name of friend to delete from list'),i===c.A.oy)return this.Vt=250,!0;if(i===c.A.ly&&(this.Xs=!0,this.Kh=!1,this.Gh=!0,this.Wh='',this.Yh=4,this.Hh='Enter name of player to add to list'),i===c.A.uy&&(this.Xs=!0,this.Kh=!1,this.Gh=!0,this.Wh='',this.Yh=5,this.Hh='Enter name of player to delete from list'),i>=c.A.wy&&i<=c.A.yy){const t=(i-300)/2|0,s=1&i;let h=this.Kr[t];if(-1!==h)for(;;)if(0===s&&(h--,h<0&&(h=o.A.count-1)),1===s&&(h++,h>=o.A.count&&(h=0)),!o.A.Fo[h].disable&&o.A.Fo[h].type===t+(this.Yr?0:7)){this.Kr[t]=h,this.Vr=!0;break}}if(i>=c.A.Ay&&i<=c.A.py){const t=(i-314)/2|0,s=1&i;let h=this.Xr[t];0===s&&(h--,h<0&&(h=W.A.Ha[t].length-1)),1===s&&(h++,h>=W.A.Ha[t].length&&(h=0)),this.Xr[t]=h,this.Vr=!0}if(i!==c.A.ja||this.Yr||(this.Yr=!0,this.hf()),i===c.A.za&&this.Yr&&(this.Yr=!1,this.hf()),i===c.A.my){this.Gt.lf(O.A.Iy),this.Gt.p1(this.Yr?0:1);for(let t=0;t<7;t++)this.Gt.p1(this.Kr[t]);for(let t=0;t<5;t++)this.Gt.p1(this.Xr[t]);return!0}return i===c.A.qa&&(this.Ne=!this.Ne),i>=c.A.gy&&i<=c.A.Ey&&(this.$w(),this.De.length>0&&(this.Gt.lf(O.A._y),this.Gt.Cy(M.A._d(this.De)),this.Gt.p1(i-601),this.Gt.p1(this.Ne?1:0))),!1};hf=()=>{this.Vr=!0;for(let t=0;t<7;t++){this.Kr[t]=-1;for(let i=0;i<o.A.count;i++)if(!o.A.Fo[i].disable&&o.A.Fo[i].type===t+(this.Yr?0:7)){this.Kr[t]=i;break}}};Jd=(t,i,s,h)=>{if(!this.Dr||!this.Ve)return!1;const n=h>>14&32767,r=this.Ve.Nd(this.Fn,i,s,h);if(-1===r)return!1;const o=31&r,l=r>>6&3;if(o===P.A.Ty.id||o===P.A.Oy.id||o===P.A.vy.id){const t=e.A.get(n);let h,r;l===F.A.Bd||l===F.A.Hd?(h=t.width,r=t.length):(h=t.length,r=t.width);let o=t.by;0!==l&&(o=(o<<l&15)+(o>>4-l)),this.vf(this.Dr.bf[0],this.Dr.Lf[0],i,s,2,h,r,0,0,o,!1)}else this.vf(this.Dr.bf[0],this.Dr.Lf[0],i,s,2,0,0,l,o+1,0,!1);return this.Qs=this.Wc,this.th=this.Yc,this.$s=2,this.Js=0,this.Gt.lf(t),this.Gt.p2(i+this.bn),this.Gt.p2(s+this.Ln),this.Gt.p2(n),!0};Mf=()=>{1===this.Hc&&(this.Wc>=549&&this.Wc<=583&&this.Yc>=195&&this.Yc<231&&-1!==this.Dh[0]?(this.Ks=!0,this.xh=0,this.js=!0):this.Wc>=579&&this.Wc<=609&&this.Yc>=194&&this.Yc<231&&-1!==this.Dh[1]?(this.Ks=!0,this.xh=1,this.js=!0):this.Wc>=607&&this.Wc<=637&&this.Yc>=194&&this.Yc<231&&-1!==this.Dh[2]?(this.Ks=!0,this.xh=2,this.js=!0):this.Wc>=635&&this.Wc<=679&&this.Yc>=194&&this.Yc<229&&-1!==this.Dh[3]?(this.Ks=!0,this.xh=3,this.js=!0):this.Wc>=676&&this.Wc<=706&&this.Yc>=194&&this.Yc<231&&-1!==this.Dh[4]?(this.Ks=!0,this.xh=4,this.js=!0):this.Wc>=704&&this.Wc<=734&&this.Yc>=194&&this.Yc<231&&-1!==this.Dh[5]?(this.Ks=!0,this.xh=5,this.js=!0):this.Wc>=732&&this.Wc<=766&&this.Yc>=195&&this.Yc<231&&-1!==this.Dh[6]?(this.Ks=!0,this.xh=6,this.js=!0):this.Wc>=550&&this.Wc<=584&&this.Yc>=492&&this.Yc<528&&-1!==this.Dh[7]?(this.Ks=!0,this.xh=7,this.js=!0):this.Wc>=582&&this.Wc<=612&&this.Yc>=492&&this.Yc<529&&-1!==this.Dh[8]?(this.Ks=!0,this.xh=8,this.js=!0):this.Wc>=609&&this.Wc<=639&&this.Yc>=492&&this.Yc<529&&-1!==this.Dh[9]?(this.Ks=!0,this.xh=9,this.js=!0):this.Wc>=637&&this.Wc<=681&&this.Yc>=493&&this.Yc<528&&-1!==this.Dh[10]?(this.Ks=!0,this.xh=10,this.js=!0):this.Wc>=679&&this.Wc<=709&&this.Yc>=492&&this.Yc<529&&-1!==this.Dh[11]?(this.Ks=!0,this.xh=11,this.js=!0):this.Wc>=706&&this.Wc<=736&&this.Yc>=492&&this.Yc<529&&-1!==this.Dh[12]?(this.Ks=!0,this.xh=12,this.js=!0):this.Wc>=734&&this.Wc<=768&&this.Yc>=492&&this.Yc<528&&-1!==this.Dh[13]&&(this.Ks=!0,this.xh=13,this.js=!0),$.K.ut++,$.K.ut>150&&($.K.ut=0,this.Gt.lf(O.A.Ly),this.Gt.p1(43)))};Pf=async()=>{for(;;){let t;do{for(;;){if(t=this.Kc(),-1===t)return;if(-1!==this.Zs&&this.Zs===this.Pe){8===t&&this.De.length>0&&(this.De=this.De.substring(0,this.De.length-1));break}if(this.Gh){if(t>=32&&t<=122&&this.Wh.length<80&&(this.Wh=this.Wh+String.fromCharCode(t),this.Xs=!0),8===t&&this.Wh.length>0&&(this.Wh=this.Wh.substring(0,this.Wh.length-1),this.Xs=!0),13===t||10===t){let t;if(this.Gh=!1,this.Xs=!0,1===this.Yh&&(t=M.A._d(this.Wh),this.Qw(t)),2===this.Yh&&this.jr>0&&(t=M.A._d(this.Wh),this.iy(t)),3===this.Yh&&this.Wh.length>0&&this.lo){this.Gt.lf(O.A.Ry),this.Gt.p1(0);const t=this.Gt.qc;this.Gt.Cy(this.lo),b.A.Sy(this.Gt,this.Wh),this.Gt.tu(this.Gt.qc-t),this.Wh=M.A.My(this.Wh),this.Wh=v.A.filter(this.Wh),this.$d(6,this.Wh,M.A.Na(M.A.Pa(this.lo))),2===this.Ph&&(this.Ph=1,this.zs=!0,this.Gt.lf(O.A.ky),this.Gt.p1(this.Nh),this.Gt.p1(this.Ph),this.Gt.p1(this.Fh))}4===this.Yh&&this.Ah<100&&(t=M.A._d(this.Wh),this.ty(t)),5===this.Yh&&this.Ah>0&&(t=M.A._d(this.Wh),this.sy(t))}}else if(this.Kh){if(t>=48&&t<=57&&this.Vh.length<10&&(this.Vh=this.Vh+String.fromCharCode(t),this.Xs=!0),8===t&&this.Vh.length>0&&(this.Vh=this.Vh.substring(0,this.Vh.length-1),this.Xs=!0),13===t||10===t){if(this.Vh.length>0){let t=0;try{t=parseInt(this.Vh,10)}catch(t){}this.Gt.lf(O.A.xy),this.Gt.p4(t)}this.Kh=!1,this.Xs=!0}}else if(-1===this.uh&&(t>=32&&t<=122&&this.Qh.length<80&&(this.Qh=this.Qh+String.fromCharCode(t),this.Xs=!0),8===t&&this.Qh.length>0&&(this.Qh=this.Qh.substring(0,this.Qh.length-1),this.Xs=!0),(13===t||10===t)&&this.Qh.length>0)){if('::clientdrop'===this.Qh)await this.cf();else if(this.Wr&&'::noclip'===this.Qh)for(let t=0;t<G.A.Pn;t++)for(let i=1;i<G.A.Zn-1;i++)for(let s=1;s<G.A.Zn-1;s++){const h=this.Nn[t];h&&(h.flags[G.A.index(i,s)]=0)}else if('::debug'===this.Qh)$.K.rt=!$.K.rt;else if('::chat'===this.Qh)$.K.ot=($.K.ot+1)%3;else if('::peer'===this.Qh)999==+$.K.getParameter('world')&&this.jo();else if(this.Qh.startsWith('::fps '))try{this.Dy(parseInt(this.Qh.substring(6),10))}catch(t){}else if(this.Qh.startsWith('::camera'))$.K.lt=!$.K.lt,this.qe=$.K.lt,this.Jn=52,this.Qn=52,this.hr=52,this.er=52,this.nr=1e3,this.tr=1e3;else if(this.Qh.startsWith('::camsrc ')){const t=this.Qh.split(' ');3===t.length?(this.hr=parseInt(t[1],10),this.er=parseInt(t[2],10)):4===t.length&&(this.hr=parseInt(t[1],10),this.er=parseInt(t[2],10),this.nr=parseInt(t[3],10))}else if(this.Qh.startsWith('::camdst ')){const t=this.Qh.split(' ');3===t.length?(this.Jn=parseInt(t[1],10),this.Qn=parseInt(t[2],10)):4===t.length&&(this.Jn=parseInt(t[1],10),this.Qn=parseInt(t[2],10),this.tr=parseInt(t[3],10))}if(this.Qh.startsWith('::'))this.Gt.lf(O.A.Ny),this.Gt.p1(this.Qh.length-1),this.Gt.Jc(this.Qh.substring(2));else{let t=0;this.Qh.startsWith('yellow:')?(t=0,this.Qh=this.Qh.substring(7)):this.Qh.startsWith('red:')?(t=1,this.Qh=this.Qh.substring(4)):this.Qh.startsWith('green:')?(t=2,this.Qh=this.Qh.substring(6)):this.Qh.startsWith('cyan:')?(t=3,this.Qh=this.Qh.substring(5)):this.Qh.startsWith('purple:')?(t=4,this.Qh=this.Qh.substring(7)):this.Qh.startsWith('white:')?(t=5,this.Qh=this.Qh.substring(6)):this.Qh.startsWith('flash1:')?(t=6,this.Qh=this.Qh.substring(7)):this.Qh.startsWith('flash2:')?(t=7,this.Qh=this.Qh.substring(7)):this.Qh.startsWith('flash3:')?(t=8,this.Qh=this.Qh.substring(7)):this.Qh.startsWith('glow1:')?(t=9,this.Qh=this.Qh.substring(6)):this.Qh.startsWith('glow2:')?(t=10,this.Qh=this.Qh.substring(6)):this.Qh.startsWith('glow3:')&&(t=11,this.Qh=this.Qh.substring(6));let i=0;this.Qh.startsWith('wave:')&&(i=1,this.Qh=this.Qh.substring(5)),this.Qh.startsWith('scroll:')&&(i=2,this.Qh=this.Qh.substring(7)),this.Gt.lf(O.A.Py),this.Gt.p1(0);const s=this.Gt.qc;this.Gt.p1(t),this.Gt.p1(i),b.A.Sy(this.Gt,this.Qh),this.Gt.tu(this.Gt.qc-s),this.Qh=M.A.My(this.Qh),this.Qh=v.A.filter(this.Qh),this.Dr&&this.Dr.name&&(this.Dr.gu=this.Qh,this.Dr.Cu=t,this.Dr.Tu=i,this.Dr.Ou=150,this.$d(2,this.Dr.gu,this.Dr.name)),2===this.Nh&&(this.Nh=3,this.zs=!0,this.Gt.lf(O.A.ky),this.Gt.p1(this.Nh),this.Gt.p1(this.Ph),this.Gt.p1(this.Fh))}this.Qh='',this.Xs=!0}}}while((t<97||t>122)&&(t<65||t>90)&&(t<48||t>57)&&32!==t);this.De.length<12&&(this.De=this.De+String.fromCharCode(t))}};kf=()=>{if(1===this.Hc)if(this.Wc>=8&&this.Wc<=108&&this.Yc>=490&&this.Yc<=522)this.Nh=(this.Nh+1)%4,this.zs=!0,this.Xs=!0,this.Gt.lf(O.A.ky),this.Gt.p1(this.Nh),this.Gt.p1(this.Ph),this.Gt.p1(this.Fh);else if(this.Wc>=137&&this.Wc<=237&&this.Yc>=490&&this.Yc<=522)this.Ph=(this.Ph+1)%3,this.zs=!0,this.Xs=!0,this.Gt.lf(O.A.ky),this.Gt.p1(this.Nh),this.Gt.p1(this.Ph),this.Gt.p1(this.Fh);else if(this.Wc>=275&&this.Wc<=375&&this.Yc>=490&&this.Yc<=522)this.Fh=(this.Fh+1)%3,this.zs=!0,this.Xs=!0,this.Gt.lf(O.A.ky),this.Gt.p1(this.Nh),this.Gt.p1(this.Ph),this.Gt.p1(this.Fh);else if(this.Wc>=416&&this.Wc<=516&&this.Yc>=490&&this.Yc<=522){this.$w(),this.De='',this.Ne=!1;for(let t=0;t<c.A.Fo.length;t++)if(c.A.Fo[t]&&600===c.A.Fo[t].Dl)return void(this.Pe=this.Zs=c.A.Fo[t].zd)}};Wf=(t,i,s,h,e,n,r,o)=>{if(this.Uh?this.Bh=32:this.Bh=0,this.Uh=!1,t>=n&&t<n+16&&i>=r&&i<r+16)o.Fl-=4*this.qs,e&&(this.Ks=!0);else if(t>=n&&t<n+16&&i>=r+h-16&&i<r+h)o.Fl+=4*this.qs,e&&(this.Ks=!0);else if(t>=n-this.Bh&&t<n+this.Bh+16&&i>=r+16&&i<r+h-16&&this.qs>0){let t=(h-32)*h/s|0;t<8&&(t=8);const n=i-r-(t/2|0)-16,l=h-t-32;o.Fl=(s-h)*n/l|0,e&&(this.Ks=!0),this.Uh=!0}};ef=()=>{this.Gi||(this.Po(),this.Bo=null,this.hi=null,this.ei=null,this.ni=null,this.ri=null,this.oi=null,this.li=null,this.ai=null,this.ci=null,this.fi=null,this.Gi=new f.A(479,96),this.Ui=new f.A(168,160),u.A.clear(),this.fs?.draw(0,0),this.Fi=new f.A(190,261),this.Bi=new f.A(512,334),u.A.clear(),this.Hi=new f.A(501,61),this.Wi=new f.A(288,40),this.Yi=new f.A(269,66),this.ti=!0)};Eu=t=>{if(!t)return!1;for(let i=0;i<this.jr;i++)if(t.toLowerCase()===this.no[i]?.toLowerCase())return!0;return!!this.Dr&&t.toLowerCase()===this.Dr.name?.toLowerCase()};Qw=t=>{if(0n===t)return;if(this.jr>=100)return void this.$d(0,'Your friends list is full. Max of 100 hit','');const i=M.A.Na(M.A.Pa(t));for(let s=0;s<this.jr;s++)if(this.ro[s]===t)return void this.$d(0,i+' is already on your friend list','');for(let s=0;s<this.Ah;s++)if(this.ph[s]===t)return void this.$d(0,'Please remove '+i+' from your ignore list first','');this.Dr&&this.Dr.name&&i!==this.Dr.name&&(this.no[this.jr]=i,this.ro[this.jr]=t,this.oo[this.jr]=0,this.jr++,this.Ks=!0,this.Gt.lf(O.A.Fy),this.Gt.Cy(t))};iy=t=>{if(0n!==t)for(let i=0;i<this.jr;i++)if(this.ro[i]===t){this.jr--,this.Ks=!0;for(let t=i;t<this.jr;t++)this.no[t]=this.no[t+1],this.oo[t]=this.oo[t+1],this.ro[t]=this.ro[t+1];return this.Gt.lf(O.A.Uy),void this.Gt.Cy(t)}};ty=t=>{if(0n===t)return;if(this.Ah>=100)return void this.$d(0,'Your ignore list is full. Max of 100 hit','');const i=M.A.Na(M.A.Pa(t));for(let s=0;s<this.Ah;s++)if(this.ph[s]===t)return void this.$d(0,i+' is already on your ignore list','');for(let s=0;s<this.jr;s++)if(this.ro[s]===t)return void this.$d(0,'Please remove '+i+' from your friend list first','');this.ph[this.Ah++]=t,this.Ks=!0,this.Gt.lf(O.A.By),this.Gt.Cy(t)};sy=t=>{if(0n!==t)for(let i=0;i<this.Ah;i++)if(this.ph[i]===t){this.Ah--,this.Ks=!0;for(let t=i;t<this.Ah;t++)this.ph[t]=this.ph[t+1];return this.Gt.lf(O.A.Gy),void this.Gt.Cy(t)}};Hy=(t,i)=>{const s=this.Or[this.Fn][t][i];if(!s)return void this.Ve?.Wy(this.Fn,t,i);let h=-99999999,e=null;for(let t=s.head();t;t=s.next()){const i=n.A.get(t.index);let s=i.Yy;i.va&&(s*=t.count+1),s>h&&(h=s,e=t)}if(!e)return;s.Vy(e);let r=-1,o=-1,l=0,a=0;for(let t=s.head();t;t=s.next())t.index!==e.index&&-1===r&&(r=t.index,l=t.count),t.index!==e.index&&t.index!==r&&-1===o&&(o=t.index,a=t.count);let c=null;-1!==r&&(c=n.A.get(r).Ky(l));let f=null;-1!==o&&(f=n.A.get(o).Ky(a));const u=t+(i<<7)+1610612736|0,d=n.A.get(e.index);this.Ve?.Xy(t,i,this.Jf(this.Fn,128*t+64,128*i+64),this.Fn,u,d.Ky(e.count),f,c)};jy=(t,i,s,h,n,r,o)=>{if(i<1||s<1||i>102||s>102)return;if($.K.st&&t!==this.Fn)return;if(!this.Ve)return;let l=0;if(o===N.A.zy&&(l=this.Ve.Dd(t,i,s)),o===N.A.Zy&&(l=this.Ve.qy(t,s,i)),o===N.A.$y&&(l=this.Ve.Vd(t,i,s)),o===N.A.vy&&(l=this.Ve.Ld(t,i,s)),0!==l){const h=this.Ve.Nd(t,i,s,l),n=l>>14&32767,r=31&h,a=h>>6;if(o===N.A.zy){this.Ve?.Jy(t,i,s,1);const h=e.A.get(n);h.Qy&&this.Nn[t]?.Jy(i,s,r,a,h.tA)}if(o===N.A.Zy&&this.Ve?.iA(t,i,s),o===N.A.$y){this.Ve.sA(t,i,s);const h=e.A.get(n);if(i+h.width>G.A.Zn-1||s+h.width>G.A.Zn-1||i+h.length>G.A.Zn-1||s+h.length>G.A.Zn-1)return;h.Qy&&this.Nn[t]?.sA(i,s,h.width,h.length,a,h.tA)}if(o===N.A.vy){this.Ve?.hA(t,i,s);const h=e.A.get(n);h.Qy&&h.active&&this.Nn[t]?.eA(i,s)}}if(h>=0){let e=t;this.Xn&&t<3&&!(2&~this.Xn[1][i][s])&&(e=t+1),this.Kn&&D.A.jy(t,i,s,this.Ve,this.Kn,this.Cr,this.Nn[t],h,r,n,e)}};$w=()=>{this.Gt.lf(O.A.nA),-1!==this.fh&&(this.fh=-1,this.Ks=!0,this.Ie=!1,this.js=!0),-1!==this.uh&&(this.uh=-1,this.Xs=!0,this.Ie=!1),this.Zs=-1};cf=async()=>{this.Vt>0?await this.rA():(this.Bi?.bind(),this.pi?.Rc(257,144,'Connection lost',m.A.Jl),this.pi?.Rc(256,143,'Connection lost',m.A.xl),this.pi?.Rc(257,159,'Please wait - attempting to reestablish',m.A.Jl),this.pi?.Rc(256,158,'Please wait - attempting to reestablish',m.A.xl),this.Bi?.draw(8,11),this.ze=0,this.stream?.close(),this.Cc=!1,await this.Vc(this.username,this.password,!0),this.Cc||await this.rA())};rA=async()=>{this.stream&&this.stream.close(),this.stream=null,this.Cc=!1,this.ii=0,this.username='',this.password='',k.A.if(),this.uu(),this.Ve?.reset();for(let t=0;t<G.A.Pn;t++)this.Nn[t]?.reset();(0,z.No)(!1),this._o=null,this.Io=0,$.K.st||await this.hl('scape_main',12345678,4e4,!1)};read=async()=>{if(!this.stream)return!1;try{let t=this.stream.available;if(0===t)return!1;if(-1===this.Zt&&(await this.stream.Zc(this.in.data,0,1),this.Zt=255&this.in.data[0],this.zt&&(this.Zt=this.Zt-this.zt.oA&255),this.packetSize=E.A.lA[this.Zt],t--),-1===this.packetSize){if(t<=0)return!1;await this.stream.Zc(this.in.data,0,1),this.packetSize=255&this.in.data[0],t--}if(-2===this.packetSize){if(t<=1)return!1;await this.stream.Zc(this.in.data,0,2),this.in.qc=0,this.packetSize=this.in.aA,t-=2}if(t<this.packetSize)return!1;if(this.in.qc=0,await this.stream.Zc(this.in.data,0,this.packetSize),this.Yt=0,this.Jt=this.$t,this.$t=this.qt,this.qt=this.Zt,this.Zt===T.A.cA){const t=this.in.fA;return t>=1&&(this.Kt=this.in.el),this.Xt=t,this.Zt=-1,!0}if(this.Zt===T.A.uA){const t=this.in.aA,i=this.in.dA;return this.Ee[t]=i,this.ge[t]!==i&&(this.ge[t]=i,await this.qw(t),this.Ks=!0,-1!==this.Xh&&(this.Xs=!0)),this.Zt=-1,!0}if(this.Zt===T.A.wA){const t=this.in.$c,i=this.in.fA;let s=M.A.Na(M.A.Pa(t));for(let h=0;h<this.jr;h++)if(t===this.ro[h]){this.oo[h]!==i&&(this.oo[h]=i,this.Ks=!0,i>0&&this.$d(5,s+' has logged in.',''),0===i&&this.$d(5,s+' has logged out.','')),s=null;break}s&&this.jr<100&&(this.ro[this.jr]=t,this.no[this.jr]=s,this.oo[this.jr]=i,this.jr++,this.Ks=!0);let h=!1;for(;!h;){h=!0;for(let t=0;t<this.jr-1;t++)if(this.oo[t]!==$.K.it&&this.oo[t+1]===$.K.it||0===this.oo[t]&&0!==this.oo[t+1]){const i=this.oo[t];this.oo[t]=this.oo[t+1],this.oo[t+1]=i;const s=this.no[t];this.no[t]=this.no[t+1],this.no[t+1]=s;const e=this.ro[t];this.ro[t]=this.ro[t+1],this.ro[t+1]=e,this.Ks=!0,h=!1}}return this.Zt=-1,!0}if(this.Zt===T.A.yA)return this.jt=30*this.in.aA,this.Zt=-1,!0;if(this.Zt===T.A.AA){const t=this.in.fA,i=this.in.fA;let s=-1;if(this.Mn)for(let h=0;h<this.Mn.length;h++)this.Mn[h]===(t<<8)+i&&(s=h);if(-1!==s){const h=this.Rn;if(h){const e=h[s];-1!==s&&e&&(this.db?.sl(`m${t}_${i}`,e),this.Ke=1)}}return this.Zt=-1,!0}if(this.Zt===T.A.pA)return this.mA(this.in,this.packetSize),this.Zt=-1,!0;if(this.Zt===T.A.IA){const t=this.in.aA,i=this.in.aA;if(this.On===t&&this.vn===i&&0!==this.Ke)return this.Zt=-1,!0;this.On=t,this.vn=i,this.bn=8*(this.On-6),this.Ln=8*(this.vn-6),this.Ke=1,this.Bi?.bind(),this.pi?.Rc(257,151,'Loading - please wait.',m.A.Jl),this.pi?.Rc(256,150,'Loading - please wait.',m.A.xl),this.Bi?.draw(8,11);const s=(this.packetSize-2)/10|0;this.Rn=new q.As(s,null),this.Sn=new q.As(s,null),this.Mn=new Int32Array(s),this.Gt.lf(O.A.gA),this.Gt.p1(0);let h=0;for(let t=0;t<s;t++){const i=this.in.fA,s=this.in.fA,e=this.in.el,n=this.in.el;let r;this.Mn[t]=(i<<8)+s,0!==e&&(r=await(this.db?.$o(`m${i}_${s}`)),r&&I.A.Jo(r)!==e&&(r=void 0),r?this.Rn[t]=r:(this.Ke=0,this.Gt.p1(0),this.Gt.p1(i),this.Gt.p1(s),h+=3)),0!==n&&(r=await(this.db?.$o(`l${i}_${s}`)),r&&I.A.Jo(r)!==n&&(r=void 0),r?this.Sn[t]=r:(this.Ke=0,this.Gt.p1(1),this.Gt.p1(i),this.Gt.p1(s),h+=3))}this.Gt.tu(h),this.Bi?.bind(),0===this.Ke&&(this.pi?.Rc(257,166,'Map area updated since last visit, so load will take longer this time only',m.A.Jl),this.pi?.Rc(256,165,'Map area updated since last visit, so load will take longer this time only',m.A.xl)),this.Bi?.draw(8,11);const e=this.bn-this.kn,n=this.Ln-this.xn;this.kn=this.bn,this.xn=this.Ln;for(let t=0;t<8192;t++){const i=this.mr[t];if(i){for(let t=0;t<10;t++)i.bf[t]-=e,i.Lf[t]-=n;i.x-=128*e,i.z-=128*n}}for(let t=0;t<this.Mt;t++){const i=this.ar[t];if(i){for(let t=0;t<10;t++)i.bf[t]-=e,i.Lf[t]-=n;i.x-=128*e,i.z-=128*n}}let r=0,o=G.A.Zn,l=1;e<0&&(r=G.A.Zn-1,o=-1,l=-1);let a=0,c=G.A.Zn,f=1;n<0&&(a=G.A.Zn-1,c=-1,f=-1);for(let t=r;t!==o;t+=l)for(let i=a;i!==c;i+=f){const s=t+e,h=i+n;for(let e=0;e<G.A.Pn;e++)s>=0&&h>=0&&s<G.A.Zn&&h<G.A.Zn?this.Or[e][t][i]=this.Or[e][s][h]:this.Or[e][t][i]=null}for(let t=this.br.head();t;t=this.br.next())t.x-=e,t.z-=n,(t.x<0||t.z<0||t.x>=G.A.Zn||t.z>=G.A.Zn)&&t.EA();return 0!==this.ze&&(this.ze-=e,this.Ze-=n),this.qe=!1,this.Zt=-1,!0}if(this.Zt===T.A._A)return c.A.Fo[this.in.aA].model=this.Dr?.CA()||null,this.Zt=-1,!0;if(this.Zt===T.A.TA)return this.mh=this.in.fA,1===this.mh&&(this.Ih=this.in.aA),this.mh>=2&&this.mh<=6&&(2===this.mh&&(this.gh=64,this.Eh=64),3===this.mh&&(this.gh=0,this.Eh=64),4===this.mh&&(this.gh=128,this.Eh=64),5===this.mh&&(this.gh=64,this.Eh=0),6===this.mh&&(this.gh=64,this.Eh=128),this.mh=2,this.Ch=this.in.aA,this.Th=this.in.aA,this.Oh=this.in.fA),10===this.mh&&(this._h=this.in.aA),this.Zt=-1,!0;if(this.Zt===T.A.OA){const t=this.in.vA,i=this.in.el,s=this.in.el;return t!==this._o&&this.Eo&&!$.K.st&&await this.hl(t,i,s,!0),this._o=t,this.Co=i,this.To=s,this.Io=0,this.Zt=-1,!0}if(this.Zt===T.A.bA)return await this.rA(),this.Zt=-1,!1;if(this.Zt===T.A.LA){const t=this.in.fA,i=this.in.fA;let s=-1;if(this.Mn)for(let h=0;h<this.Mn.length;h++)this.Mn[h]===(t<<8)+i&&(s=h);if(-1!==s){const h=this.Sn;if(h){const e=h[s];-1!==s&&e&&(this.db?.sl(`l${t}_${i}`,e),this.Ke=1)}}return this.Zt=-1,!0}if(this.Zt===T.A.RA)return this.ze=0,this.Zt=-1,!0;if(this.Zt===T.A.SA)return this.Fr=this.in.aA,this.Zt=-1,!0;if(this.Zt===T.A.MA||this.Zt===T.A.kA||this.Zt===T.A.xA||this.Zt===T.A.DA||this.Zt===T.A.NA||this.Zt===T.A.PA||this.Zt===T.A.FA||this.Zt===T.A.UA||this.Zt===T.A.BA||this.Zt===T.A.GA)return this.HA(this.in,this.Zt),this.Zt=-1,!0;if(this.Zt===T.A.WA){const t=this.in.aA,i=this.in.aA;return-1!==this.uh&&(this.uh=-1,this.Xs=!0),this.Kh&&(this.Kh=!1,this.Xs=!0),this.Zs=t,this.fh=i,this.Ks=!0,this.js=!0,this.Ie=!1,this.Zt=-1,!0}if(this.Zt===T.A.YA){const t=this.in.aA,i=this.in.el;return this.Ee[t]=i,this.ge[t]!==i&&(this.ge[t]=i,await this.qw(t),this.Ks=!0,-1!==this.Xh&&(this.Xs=!0)),this.Zt=-1,!0}if(this.Zt===T.A.VA){const t=this.in.aA;return c.A.Fo[t]._l=this.in.aA,this.Zt=-1,!0}if(this.Zt===T.A.KA){let t=this.in.aA;const i=this.in.fA;return 65535===t&&(t=-1),this.Dh[i]=t,this.Ks=!0,this.js=!0,this.Zt=-1,!0}if(this.Zt===T.A.XA){const t=this.in.fA,i=this.in.fA,s=this.in.aA,h=this.in.aA;let e=-1;if(this.Mn)for(let s=0;s<this.Mn.length;s++)this.Mn[s]===(t<<8)+i&&(e=s);if(-1!==e&&this.Sn){this.Sn[e]&&this.Sn[e]?.length===h||(this.Sn[e]=new Int8Array(h));const t=this.Sn[e];t&&this.in.jA(this.packetSize-6,s,t)}return this.Zt=-1,!0}if(this.Zt===T.A.zA){const t=k.A.stop();return t&&(this.Gt.lf(O.A.af),this.Gt.p2(t.qc),this.Gt.tf(t.data,t.qc,0),t.release()),this.Zt=-1,!0}if(this.Zt===T.A.ZA){this.Ks=!0;const t=this.in.aA,i=c.A.Fo[t],s=this.in.fA;if(i.Hl&&i.Wl){for(let t=0;t<s;t++){i.Hl[t]=this.in.aA;let s=this.in.fA;255===s&&(s=this.in.el),i.Wl[t]=s}for(let t=s;t<i.Hl.length;t++)i.Hl[t]=0,i.Wl[t]=0}else for(let t=0;t<s;t++)this.in.aA,255===this.in.fA&&this.in.el;return this.Zt=-1,!0}if(this.Zt===T.A.qA)return k.A.$A(),this.Zt=-1,!0;if(this.Zt===T.A.JA)return this.Gh=!1,this.Kh=!0,this.Vh='',this.Xs=!0,this.Zt=-1,!0;if(this.Zt===T.A.QA){const t=c.A.Fo[this.in.aA];if(t.Hl)for(let i=0;i<t.Hl.length;i++)t.Hl[i]=-1,t.Hl[i]=0;return this.Zt=-1,!0}if(this.Zt===T.A.tp){if(this.Fe=this.in.el,this.Ue=this.in.aA,this.Be=this.in.fA,this.Ge=this.in.aA,0!==this.Fe&&-1===this.Zs){this.$w();let t=650;201!==this.Be&&(t=655),this.De='',this.Ne=!1;for(let i=0;i<c.A.Fo.length;i++)if(c.A.Fo[i]&&c.A.Fo[i].Dl===t){this.Zs=c.A.Fo[i].zd;break}}return this.Zt=-1,!0}if(this.Zt===T.A.ip)return this.kh=this.in.fA,this.kh===this.xh&&(3===this.kh?this.xh=1:this.xh=3,this.Ks=!0),this.Zt=-1,!0;if(this.Zt===T.A.sp){if(this.Eo&&!$.K.st){const t=this.in.aA,i=this.in.el,s=this.packetSize-6,h=R.A.read(i,Int8Array.from(this.in.data),s,this.in.qc);(0,z.nl)(h,this.Oo,!1),this.Io=t}return this.Zt=-1,!0}if(this.Zt===T.A.hp)return this.Pr=this.in.fA,this.Zt=-1,!0;if(this.Zt===T.A.ep){const t=this.in.aA,i=this.in.fA,s=this.in.aA;return this.co&&!$.K.st&&this.ao<50&&(this.fo[this.ao]=t,this.uo[this.ao]=i,this.do[this.ao]=s+L.A.np[t],this.ao++),this.Zt=-1,!0}if(this.Zt===T.A.rp){const t=this.in.aA,i=this.in.aA,s=r.A.get(i);return c.A.Fo[t].model=s.CA(),this.Zt=-1,!0}if(this.Zt===T.A.op)return this.Cn=this.in.fA,this.Tn=this.in.fA,this.Zt=-1,!0;if(this.Zt===T.A.lp){const t=this.in.aA,i=this.in.aA,s=this.in.aA,h=c.A.Fo[t].model;return h?.Ga(i,s),this.Zt=-1,!0}if(this.Zt===T.A.ap)return this.Nh=this.in.fA,this.Ph=this.in.fA,this.Fh=this.in.fA,this.zs=!0,this.Xs=!0,this.Zt=-1,!0;if(this.Zt===T.A.cp){const t=this.in.aA;return this.fp(t),-1!==this.uh&&(this.uh=-1,this.Xs=!0),this.Kh&&(this.Kh=!1,this.Xs=!0),this.fh=t,this.Ks=!0,this.js=!0,this.Zs=-1,this.Ie=!1,this.Zt=-1,!0}if(this.Zt===T.A.up){const t=this.in.aA;return this.fp(t),-1!==this.fh&&(this.fh=-1,this.Ks=!0,this.js=!0),this.uh=t,this.Xs=!0,this.Zs=-1,this.Ie=!1,this.Zt=-1,!0}if(this.Zt===T.A.dp){const t=this.in.aA,i=this.in.wp,s=this.in.wp,h=c.A.Fo[t];return h.x=i,h.y=s,this.Zt=-1,!0}if(this.Zt===T.A.yp)return this.qe=!0,this.hr=this.in.fA,this.er=this.in.fA,this.nr=this.in.aA,this.rr=this.in.fA,this.lr=this.in.fA,this.lr>=100&&(this.fn=128*this.hr+64,this.dn=128*this.er+64,this.un=this.Jf(this.Fn,this.hr,this.er)-this.nr),this.Zt=-1,!0;if(this.Zt===T.A.Ap){this.Cn=this.in.fA,this.Tn=this.in.fA;for(let t=this.Cn;t<this.Cn+8;t++)for(let i=this.Tn;i<this.Tn+8;i++)this.Or[this.Fn][t][i]&&(this.Or[this.Fn][t][i]=null,this.Hy(t,i));for(let t=this.br.head();t;t=this.br.next())t.x>=this.Cn&&t.x<this.Cn+8&&t.z>=this.Tn&&t.z<this.Tn+8&&t.pp===this.Fn&&(this.jy(t.pp,t.x,t.z,t.mp,t.Ip,t.gp,t.zd),t.EA());return this.Zt=-1,!0}if(this.Zt===T.A.Ep){const t=this.in.fA,i=this.in.fA,s=this.in.aA,h=this.in.aA;let e=-1;if(this.Mn)for(let s=0;s<this.Mn.length;s++)this.Mn[s]===(t<<8)+i&&(e=s);if(-1!==e&&this.Rn){this.Rn[e]&&this.Rn[e]?.length===h||(this.Rn[e]=new Int8Array(h));const t=this.Rn[e];t&&this.in.jA(this.packetSize-6,s,t)}return this.Zt=-1,!0}if(this.Zt===T.A.Ry){const t=this.in.$c,i=this.in.el,s=this.in.fA;let h=!1;for(let t=0;t<100;t++)if(this.Zh[t]===i){h=!0;break}if(s<=1)for(let i=0;i<this.Ah;i++)if(this.ph[i]===t){h=!0;break}if(!h&&0===this.ih)try{this.Zh[this.qh]=i,this.qh=(this.qh+1)%100;const h=b.A.mc(this.in,this.packetSize-13),e=v.A.filter(h);s>1?this.$d(7,e,M.A.Na(M.A.Pa(t))):this.$d(3,e,M.A.Na(M.A.Pa(t)))}catch(t){}return this.Zt=-1,!0}if(this.Zt===T.A._p){for(let t=0;t<this.ge.length;t++)this.ge[t]!==this.Ee[t]&&(this.ge[t]=this.Ee[t],await this.qw(t),this.Ks=!0);return this.Zt=-1,!0}if(this.Zt===T.A.Cp){const t=this.in.aA,i=this.in.aA;return c.A.Fo[t].model=p.A.model(i),this.Zt=-1,!0}if(this.Zt===T.A.Tp)return this.Xh=this.in.wp,this.Xs=!0,this.Zt=-1,!0;if(this.Zt===T.A.Op)return 12===this.xh&&(this.Ks=!0),this.Nr=this.in.fA,this.Zt=-1,!0;if(this.Zt===T.A.vp){if(this.qe=!0,this.Jn=this.in.fA,this.Qn=this.in.fA,this.tr=this.in.aA,this.ir=this.in.fA,this.sr=this.in.fA,this.sr>=100){const t=128*this.Jn+64,i=128*this.Qn+64,s=this.Jf(this.Fn,this.Jn,this.Qn)-this.tr,h=t-this.fn,e=s-this.un,n=i-this.dn,r=0|Math.sqrt(h*h+n*n);this.wn=325.949*Math.atan2(e,r)&2047,this.yn=-325.949*Math.atan2(h,n)&2047,this.wn<128&&(this.wn=128),this.wn>383&&(this.wn=383)}return this.Zt=-1,!0}if(this.Zt===T.A.bp)return this.xh=this.in.fA,this.Ks=!0,this.js=!0,this.Zt=-1,!0;if(this.Zt===T.A.Lp){const t=this.in.vA;let i;if(t.endsWith(':tradereq:')){const s=t.substring(0,t.indexOf(':'));i=M.A._d(s);let h=!1;for(let t=0;t<this.Ah;t++)if(this.ph[t]===i){h=!0;break}h||0!==this.ih||this.$d(4,'wishes to trade with you.',s)}else if(t.endsWith(':duelreq:')){const s=t.substring(0,t.indexOf(':'));i=M.A._d(s);let h=!1;for(let t=0;t<this.Ah;t++)if(this.ph[t]===i){h=!0;break}h||0!==this.ih||this.$d(8,'wishes to duel with you.',s)}else this.$d(0,t,'');return this.Zt=-1,!0}if(this.Zt===T.A.Rp){const t=this.in.aA,i=this.in.aA,s=this.in.aA,h=n.A.get(i);return c.A.Fo[t].model=h.Ky(50),c.A.Fo[t].ga=h.Sp,c.A.Fo[t].Ta=h.Mp,c.A.Fo[t].zoom=100*h.kp/s|0,this.Zt=-1,!0}if(this.Zt===T.A.xp){const t=this.in.aA;return this.fp(t),-1!==this.fh&&(this.fh=-1,this.Ks=!0,this.js=!0),-1!==this.uh&&(this.uh=-1,this.Xs=!0),this.Kh&&(this.Kh=!1,this.Xs=!0),this.Zs=t,this.Ie=!1,this.Zt=-1,!0}if(this.Zt===T.A.Dp){const t=this.in.aA,i=this.in.aA,s=i>>10&31,h=i>>5&31,e=31&i;return c.A.Fo[t].sa=(s<<19)+(h<<11)+(e<<3),this.Zt=-1,!0}if(this.Zt===T.A.Np){for(let t=0;t<this.ar.length;t++){const i=this.ar[t];i&&(i.Uu=-1)}for(let t=0;t<this.mr.length;t++){const i=this.mr[t];i&&(i.Uu=-1)}return this.Zt=-1,!0}if(this.Zt===T.A.Pp){const t=this.in.aA;return c.A.Fo[t].hide=1===this.in.fA,this.Zt=-1,!0}if(this.Zt===T.A.Fp){this.Ah=this.packetSize/8|0;for(let t=0;t<this.Ah;t++)this.ph[t]=this.in.$c;return this.Zt=-1,!0}if(this.Zt===T.A.Up){this.qe=!1;for(let t=0;t<5;t++)this.rn[t]=!1;return this.Zt=-1,!0}if(this.Zt===T.A.Bp)return-1!==this.fh&&(this.fh=-1,this.Ks=!0,this.js=!0),-1!==this.uh&&(this.uh=-1,this.Xs=!0),this.Kh&&(this.Kh=!1,this.Xs=!0),this.Zs=-1,this.Ie=!1,this.Zt=-1,!0;if(this.Zt===T.A.Gp){const t=this.in.aA;return c.A.Fo[t].text=this.in.vA,c.A.Fo[t].zd===this.Dh[this.xh]&&(this.Ks=!0),this.Zt=-1,!0}if(this.Zt===T.A.Hp){this.Ks=!0;const t=this.in.fA,i=this.in.el,s=this.in.fA;this.bh[t]=i,this.Lh[t]=s,this.Rh[t]=1;for(let s=0;s<98;s++)i>=this.Sh[s]&&(this.Rh[t]=s+2);return this.Zt=-1,!0}if(this.Zt===T.A.Wp){for(this.Cn=this.in.fA,this.Tn=this.in.fA;this.in.qc<this.packetSize;){const t=this.in.fA;this.HA(this.in,t)}return this.Zt=-1,!0}if(this.Zt===T.A.Yp)return 12===this.xh&&(this.Ks=!0),this.Ur=this.in.wp,this.Zt=-1,!0;if(this.Zt===T.A.Vp){const t=this.in.fA,i=this.in.fA,s=this.in.fA,h=this.in.fA;return this.rn[t]=!0,this.ln[t]=i,this.an[t]=s,this.cn[t]=h,this.nn[t]=0,this.Zt=-1,!0}if(this.Zt===T.A.Kp){this.Ks=!0;const t=this.in.aA,i=c.A.Fo[t];for(;this.in.qc<this.packetSize;){const t=this.in.fA,s=this.in.aA;let h=this.in.fA;255===h&&(h=this.in.el),i.Hl&&i.Wl&&t>=0&&t<i.Hl.length&&(i.Hl[t]=s,i.Wl[t]=h)}return this.Zt=-1,!0}if(this.Zt===T.A.Xp)return this.Mo=!this.Mo,this.jp(this.in,this.packetSize),1===this.Ke&&(this.Ke=2,D.A.zp=this.Fn,this.Zp()),$.K.st&&2===this.Ke&&D.A.zp!==this.Fn&&(this.Bi?.bind(),this.pi?.Rc(257,151,'Loading - please wait.',m.A.Jl),this.pi?.Rc(256,150,'Loading - please wait.',m.A.xl),this.Bi?.draw(8,11),D.A.zp=this.Fn,this.Zp()),this.Fn!==this._n&&2===this.Ke&&(this._n=this.Fn,this.Od(this.Fn)),this.Zt=-1,!0;await this.rA()}catch(t){console.log(t),await this.cf()}return!0};Zp=()=>{try{this._n=-1,this.Tr.clear(),this.Cr.clear(),this._r.clear(),this.Er.clear(),d.A.qp(),this.uu(),this.Ve?.reset();for(let t=0;t<G.A.Pn;t++)this.Nn[t]?.reset();const t=new D.A(G.A.Zn,G.A.Zn,this.Kn,this.Xn);D.A.st=$.K.st;const i=this.Rn?.length??0;if(this.Mn)for(let t=0;t<i;t++){const i=this.Mn[t]>>8,s=255&this.Mn[t];if(33===i&&s>=71&&s<=73){D.A.st=!1;break}}if($.K.st?this.Ve?.$p(this.Fn):this.Ve?.$p(0),this.Mn&&this.Rn){this.Gt.lf(O.A.Bf);for(let s=0;s<i;s++){const i=64*(this.Mn[s]>>8)-this.bn,h=64*(255&this.Mn[s])-this.Ln,e=this.Rn[s];if(e){const s=new I.A(new Uint8Array(e)).el,n=R.A.read(s,e,e.length-4,4);t.Jp(8*(this.On-6),8*(this.vn-6),i,h,n)}else this.vn<800&&t.Qp(h,i,64,64)}}if(this.Mn&&this.Sn){this.Gt.lf(O.A.Bf);for(let s=0;s<i;s++){const i=this.Sn[s];if(i){const h=new I.A(new Uint8Array(i)).el,e=R.A.read(h,i,i.length-4,4),n=64*(this.Mn[s]>>8)-this.bn,r=64*(255&this.Mn[s])-this.Ln;t.tm(this.Ve,this.Cr,this.Nn,e,n,r)}}}this.Gt.lf(O.A.Bf),t.im(this.Ve,this.Nn),this.Bi?.bind(),this.Gt.lf(O.A.Bf);for(let t=this.Cr.head();t;t=this.Cr.next())2===(this.Xn&&2&this.Xn[1][t.sm][t.hm])&&(t.nm--,t.nm<0&&t.EA());for(let t=0;t<G.A.Zn;t++)for(let i=0;i<G.A.Zn;i++)this.Hy(t,i);for(let t=this.br.head();t;t=this.br.next())this.jy(t.pp,t.x,t.z,t.rm,t.angle,t.shape,t.zd)}catch(t){}e.A.du?.clear(),d.A.Ac(20)};fp=t=>{const i=c.A.Fo[t];if(i.El)for(let t=0;t<i.El.length&&-1!==i.El[t];t++){const s=c.A.Fo[i.El[t]];1===s.type&&this.fp(s.id),s.Ol=0,s.Tl=0}};_c=()=>{let t=0;for(let i=0;i<99;i++){const s=i+1;t+=s+300*Math.pow(2,s/7)|0,this.Sh[i]=t/4|0}};$d=(t,i,s)=>{0===t&&-1!==this.Xh&&(this.Mh=i,this.Hc=0),-1===this.uh&&(this.Xs=!0);for(let t=99;t>0;t--)this.messageType[t]=this.messageType[t-1],this.zh[t]=this.zh[t-1],this.jh[t]=this.jh[t-1];$.K.rt&&0===t&&(i='['+(this.Ft/30|0)+']: '+i),this.messageType[0]=t,this.zh[0]=s,this.jh[0]=i};qw=async t=>{const i=a.A.Fo[t].om;if(0!==i){const s=this.ge[t];if(1===i&&(1===s&&d.A.yc(.9),2===s&&d.A.yc(.8),3===s&&d.A.yc(.7),4===s&&d.A.yc(.6),n.A.yu?.clear(),this.ti=!0),3===i){const t=this.Eo;0===s&&(this.Oo=256,(0,z.lm)(256),this.Eo=!0),1===s&&(this.Oo=192,(0,z.lm)(192),this.Eo=!0),2===s&&(this.Oo=128,(0,z.lm)(128),this.Eo=!0),3===s&&(this.Oo=64,(0,z.lm)(64),this.Eo=!0),4===s&&(this.Eo=!1),this.Eo!==t&&(this.Eo&&this._o?await this.hl(this._o,this.Co,this.To,!1):(0,z.No)(!1),this.Io=0)}4===i&&(0===s&&(this.wo=256,(0,z.am)(256),this.co=!0),1===s&&(this.wo=192,(0,z.am)(192),this.co=!0),2===s&&(this.wo=128,(0,z.am)(128),this.co=!0),3===s&&(this.wo=64,(0,z.am)(64),this.co=!0),4===s&&(this.co=!1)),5===i&&(this.ve=s),6===i&&(this.Jh=s),8===i&&(this.$h=s,this.Xs=!0)}};fm=(t,i)=>{let s=0;for(let t=0;t<100;t++){if(!this.jh[t])continue;const h=this.messageType[t],e=this.yh+70+4-14*s;if(e<-20)break;0===h&&s++,1!==h&&2!==h||!(1===h||0===this.Nh||1===this.Nh&&this.Eu(this.zh[t]))||(i>e-14&&i<=e&&this.Dr&&this.zh[t]!==this.Dr.name&&(this.Wr&&(this.ah[this.lh]='Report abuse @whi@'+this.zh[t],this.be[this.lh]=34,this.lh++),this.ah[this.lh]='Add ignore @whi@'+this.zh[t],this.be[this.lh]=436,this.lh++,this.ah[this.lh]='Add friend @whi@'+this.zh[t],this.be[this.lh]=406,this.lh++),s++),3!==h&&7!==h||0!==this.$h||!(7===h||0===this.Ph||1===this.Ph&&this.Eu(this.zh[t]))||(i>e-14&&i<=e&&(this.Wr&&(this.ah[this.lh]='Report abuse @whi@'+this.zh[t],this.be[this.lh]=34,this.lh++),this.ah[this.lh]='Add ignore @whi@'+this.zh[t],this.be[this.lh]=436,this.lh++,this.ah[this.lh]='Add friend @whi@'+this.zh[t],this.be[this.lh]=406,this.lh++),s++),4===h&&(0===this.Fh||1===this.Fh&&this.Eu(this.zh[t]))&&(i>e-14&&i<=e&&(this.ah[this.lh]='Accept trade @whi@'+this.zh[t],this.be[this.lh]=903,this.lh++),s++),(5===h||6===h)&&0===this.$h&&this.Ph<2&&s++,8===h&&(0===this.Fh||1===this.Fh&&this.Eu(this.zh[t]))&&(i>e-14&&i<=e&&(this.ah[this.lh]='Accept duel @whi@'+this.zh[t],this.be[this.lh]=363,this.lh++),s++)}};um=t=>{if(0===this.$h)return;let i=0;0!==this.jt&&(i=1);for(let s=0;s<100;s++)if(null!==this.jh[s]){const h=this.messageType[s];if((3===h||7===h)&&(7===h||0===this.Ph||1===this.Ph&&this.Eu(this.zh[s]))){const h=329-13*i;if(this.Xl>8&&this.Xl<520&&t-11>h-10&&t-11<=h+3&&(this.Wr&&(this.ah[this.lh]='Report abuse @whi@'+this.zh[s],this.be[this.lh]=2034,this.lh++),this.ah[this.lh]='Add ignore @whi@'+this.zh[s],this.be[this.lh]=2436,this.lh++,this.ah[this.lh]='Add friend @whi@'+this.zh[s],this.be[this.lh]=2406,this.lh++),i++,i>=5)return}if((5===h||6===h)&&this.Ph<2&&(i++,i>=5))return}};dm=(t,i,s,h,e,r)=>{if(0!==t.type||!t.El||t.hide||i<h||s<e||i>h+t.width||s>e+t.height||!t.Sl||!t.Ml)return;const o=t.El.length;for(let l=0;l<o;l++){let o=t.Sl[l]+h,a=t.Ml[l]+e-r;const f=c.A.Fo[t.El[l]];if(o+=f.x,a+=f.y,(f.wm>=0||0!==f.ea)&&i>=o&&s>=a&&i<o+f.width&&s<a+f.height&&(f.wm>=0?this.xe=f.wm:this.xe=f.id),0===f.type)this.dm(f,i,s,o,a,f.Fl),f.scroll>f.height&&this.Wf(i,s,f.scroll,f.height,!0,o+f.width,a,f);else if(2===f.type){let t=0;for(let h=0;h<f.height;h++)for(let e=0;e<f.width;e++){let r=o+e*(f.Yl+32),l=a+h*(f.Vl+32);if(t<20&&f.Bl&&f.Gl&&(r+=f.Bl[t],l+=f.Gl[t]),i<r||s<l||i>=r+32||s>=l+32){t++;continue}if(this.ke=t,this.Me=f.id,!f.Hl||f.Hl[t]<=0){t++;continue}const c=n.A.get(f.Hl[t]-1);if(1===this.ce&&f.ym)f.id===this.ue&&t===this.fe||(this.ah[this.lh]='Use '+this.we+' with @lre@'+c.name,this.be[this.lh]=881,this.Le[this.lh]=c.id,this.Re[this.lh]=t,this.Se[this.lh]=f.id,this.lh++);else if(1===this._e&&f.ym)16&~this.Te||(this.ah[this.lh]=this.Oe+' @lre@'+c.name,this.be[this.lh]=391,this.Le[this.lh]=c.id,this.Re[this.lh]=t,this.Se[this.lh]=f.id,this.lh++);else{if(f.ym)for(let i=4;i>=3;i--)c.Am&&c.Am[i]?(this.ah[this.lh]=c.Am[i]+' @lre@'+c.name,3===i?this.be[this.lh]=478:4===i&&(this.be[this.lh]=347),this.Le[this.lh]=c.id,this.Re[this.lh]=t,this.Se[this.lh]=f.id,this.lh++):4===i&&(this.ah[this.lh]='Drop @lre@'+c.name,this.be[this.lh]=347,this.Le[this.lh]=c.id,this.Re[this.lh]=t,this.Se[this.lh]=f.id,this.lh++);if(f.pm&&(this.ah[this.lh]='Use @lre@'+c.name,this.be[this.lh]=188,this.Le[this.lh]=c.id,this.Re[this.lh]=t,this.Se[this.lh]=f.id,this.lh++),f.ym&&c.Am)for(let i=2;i>=0;i--)c.Am[i]&&(this.ah[this.lh]=c.Am[i]+' @lre@'+c.name,0===i?this.be[this.lh]=405:1===i?this.be[this.lh]=38:2===i&&(this.be[this.lh]=422),this.Le[this.lh]=c.id,this.Re[this.lh]=t,this.Se[this.lh]=f.id,this.lh++);if(f.Im)for(let i=4;i>=0;i--)f.Im[i]&&(this.ah[this.lh]=f.Im[i]+' @lre@'+c.name,0===i?this.be[this.lh]=602:1===i?this.be[this.lh]=596:2===i?this.be[this.lh]=22:3===i?this.be[this.lh]=892:4===i&&(this.be[this.lh]=415),this.Le[this.lh]=c.id,this.Re[this.lh]=t,this.Se[this.lh]=f.id,this.lh++);this.ah[this.lh]='Examine @lre@'+c.name,$.K.rt&&(this.ah[this.lh]+='@whi@ ('+c.id+')'),this.be[this.lh]=1773,this.Le[this.lh]=c.id,f.Wl&&(this.Se[this.lh]=f.Wl[t]),this.lh++}t++}}else if(i>=o&&s>=a&&i<o+f.width&&s<a+f.height)if(f.oa===c.A.gm){let t=!1;0!==f.Dl&&(t=this.Em(f)),!t&&f._m&&(this.ah[this.lh]=f._m,this.be[this.lh]=951,this.Se[this.lh]=f.id,this.lh++)}else if(f.oa===c.A.Cm&&0===this._e){let t=f.Dw;t&&-1!==t.indexOf(' ')&&(t=t.substring(0,t.indexOf(' '))),this.ah[this.lh]=t+' @gre@'+f.action,this.be[this.lh]=930,this.Se[this.lh]=f.id,this.lh++}else f.oa===c.A.Tm?(this.ah[this.lh]='Close',this.be[this.lh]=947,this.Se[this.lh]=f.id,this.lh++):f.oa===c.A.Om&&f._m?(this.ah[this.lh]=f._m,this.be[this.lh]=465,this.Se[this.lh]=f.id,this.lh++):f.oa===c.A.vm&&f._m?(this.ah[this.lh]=f._m,this.be[this.lh]=960,this.Se[this.lh]=f.id,this.lh++):f.oa===c.A.la&&!this.Ie&&f._m&&(this.ah[this.lh]=f._m,this.be[this.lh]=44,this.Se[this.lh]=f.id,this.lh++)}};Em=t=>{let i=t.Dl;return i>=c.A.La&&i<=c.A.Ma?(i>=c.A.Sa?i-=c.A.Sa:i--,this.ah[this.lh]='Remove @whi@'+this.no[i],this.be[this.lh]=557,this.lh++,this.ah[this.lh]='Message @whi@'+this.no[i],this.be[this.lh]=679,this.lh++,!0):i>=c.A.xa&&i<=c.A.Da&&(this.ah[this.lh]='Remove @whi@'+t.text,this.be[this.lh]=556,this.lh++,!0)};bm=()=>{0===this.ce&&0===this._e&&(this.ah[this.lh]='Walk here',this.be[this.lh]=660,this.Re[this.lh]=this.Xl,this.Se[this.lh]=this.jl,this.lh++);let t=-1;for(let i=0;i<p.A.nu;i++){const s=p.A.Lm[i],h=127&s,r=s>>7&127,o=s>>29&3,l=s>>14&32767;if(s!==t){if(t=s,2===o&&this.Ve&&this.Ve.Nd(this.Fn,h,r,s)>=0){const t=e.A.get(l);if(1===this.ce)this.ah[this.lh]='Use '+this.we+' with @cya@'+t.name,this.be[this.lh]=450,this.Le[this.lh]=s,this.Re[this.lh]=h,this.Se[this.lh]=r,this.lh++;else if(1!==this._e){if(t.Rm)for(let i=4;i>=0;i--)t.Rm[i]&&(this.ah[this.lh]=t.Rm[i]+' @cya@'+t.name,0===i&&(this.be[this.lh]=285),1===i&&(this.be[this.lh]=504),2===i&&(this.be[this.lh]=364),3===i&&(this.be[this.lh]=581),4===i&&(this.be[this.lh]=1501),this.Le[this.lh]=s,this.Re[this.lh]=h,this.Se[this.lh]=r,this.lh++);this.ah[this.lh]='Examine @cya@'+t.name,$.K.rt&&(this.ah[this.lh]+='@whi@ ('+t.id+')'),this.be[this.lh]=1175,this.Le[this.lh]=s,this.Re[this.lh]=h,this.Se[this.lh]=r,this.lh++}else 4&~this.Te||(this.ah[this.lh]=this.Oe+' @cya@'+t.name,this.be[this.lh]=55,this.Le[this.lh]=s,this.Re[this.lh]=h,this.Se[this.lh]=r,this.lh++)}if(1===o){const t=this.mr[l];if(t&&t.type&&1===t.type.size&&64==(127&t.x)&&64==(127&t.z))for(let i=0;i<this.Ir;i++){const s=this.mr[this.gr[i]];s&&s!==t&&s.type&&1===s.type.size&&s.x===t.x&&s.z===t.z&&this.Sm(s.type,this.gr[i],h,r)}t&&t.type&&this.Sm(t.type,l,h,r)}if(0===o){const t=this.ar[l];if(t&&64==(127&t.x)&&64==(127&t.z)){for(let i=0;i<this.Ir;i++){const s=this.mr[this.gr[i]];s&&s.type&&1===s.type.size&&s.x===t.x&&s.z===t.z&&this.Sm(s.type,this.gr[i],h,r)}for(let i=0;i<this.cr;i++){const s=this.ar[this.ur[i]];s&&s!==t&&s.x===t.x&&s.z===t.z&&this.Mm(s,this.ur[i],h,r)}}t&&this.Mm(t,l,h,r)}if(3===o){const t=this.Or[this.Fn][h][r];if(!t)continue;for(let i=t.km();i;i=t.xm()){const t=n.A.get(i.index);if(1===this.ce)this.ah[this.lh]='Use '+this.we+' with @lre@'+t.name,this.be[this.lh]=217,this.Le[this.lh]=i.index,this.Re[this.lh]=h,this.Se[this.lh]=r,this.lh++;else if(1!==this._e){for(let s=4;s>=0;s--)t.Rm&&t.Rm[s]?(this.ah[this.lh]=t.Rm[s]+' @lre@'+t.name,0===s&&(this.be[this.lh]=224),1===s&&(this.be[this.lh]=993),2===s&&(this.be[this.lh]=99),3===s&&(this.be[this.lh]=746),4===s&&(this.be[this.lh]=877),this.Le[this.lh]=i.index,this.Re[this.lh]=h,this.Se[this.lh]=r,this.lh++):2===s&&(this.ah[this.lh]='Take @lre@'+t.name,this.be[this.lh]=99,this.Le[this.lh]=i.index,this.Re[this.lh]=h,this.Se[this.lh]=r,this.lh++);this.ah[this.lh]='Examine @lre@'+t.name,$.K.rt&&(this.ah[this.lh]+='@whi@ ('+i.index+')'),this.be[this.lh]=1102,this.Le[this.lh]=i.index,this.Re[this.lh]=h,this.Se[this.lh]=r,this.lh++}else 1&~this.Te||(this.ah[this.lh]=this.Oe+' @lre@'+t.name,this.be[this.lh]=965,this.Le[this.lh]=i.index,this.Re[this.lh]=h,this.Se[this.lh]=r,this.lh++)}}}}};Sm=(t,i,s,h)=>{if(this.lh>=400)return;let e=t.name;if(0!==t.Dm&&this.Dr&&(e=e+this.Nm(this.Dr.ec,t.Dm)+' (level-'+t.Dm+')'),1===this.ce)this.ah[this.lh]='Use '+this.we+' with @yel@'+e,this.be[this.lh]=900,this.Le[this.lh]=i,this.Re[this.lh]=s,this.Se[this.lh]=h,this.lh++;else if(1!==this._e){let n;if(t.Rm)for(n=4;n>=0;n--)t.Rm[n]&&'attack'!==t.Rm[n]?.toLowerCase()&&(this.ah[this.lh]=t.Rm[n]+' @yel@'+e,0===n?this.be[this.lh]=728:1===n?this.be[this.lh]=542:2===n?this.be[this.lh]=6:3===n?this.be[this.lh]=963:4===n&&(this.be[this.lh]=245),this.Le[this.lh]=i,this.Re[this.lh]=s,this.Se[this.lh]=h,this.lh++);if(t.Rm)for(n=4;n>=0;n--)if(t.Rm[n]&&'attack'===t.Rm[n]?.toLowerCase()){let r=0;this.Dr&&t.Dm>this.Dr.ec&&(r=2e3),this.ah[this.lh]=t.Rm[n]+' @yel@'+e,0===n?this.be[this.lh]=r+728:1===n?this.be[this.lh]=r+542:2===n?this.be[this.lh]=r+6:3===n?this.be[this.lh]=r+963:4===n&&(this.be[this.lh]=r+245),this.Le[this.lh]=i,this.Re[this.lh]=s,this.Se[this.lh]=h,this.lh++}this.ah[this.lh]='Examine @yel@'+e,$.K.rt&&(this.ah[this.lh]+='@whi@ ('+t.id+')'),this.be[this.lh]=1607,this.Le[this.lh]=i,this.Re[this.lh]=s,this.Se[this.lh]=h,this.lh++}else 2&~this.Te||(this.ah[this.lh]=this.Oe+' @yel@'+e,this.be[this.lh]=265,this.Le[this.lh]=i,this.Re[this.lh]=s,this.Se[this.lh]=h,this.lh++)};Mm=(t,i,s,h)=>{if(t===this.Dr||this.lh>=400)return;let e=null;this.Dr&&(e=t.name+this.Nm(this.Dr.ec,t.ec)+' (level-'+t.ec+')'),1===this.ce?(this.ah[this.lh]='Use '+this.we+' with @whi@'+e,this.be[this.lh]=367,this.Le[this.lh]=i,this.Re[this.lh]=s,this.Se[this.lh]=h,this.lh++):1!==this._e?(this.ah[this.lh]='Follow @whi@'+e,this.be[this.lh]=1544,this.Le[this.lh]=i,this.Re[this.lh]=s,this.Se[this.lh]=h,this.lh++,0===this.ih&&(this.ah[this.lh]='Trade with @whi@'+e,this.be[this.lh]=1373,this.Le[this.lh]=i,this.Re[this.lh]=s,this.Se[this.lh]=h,this.lh++),this.Gr>0&&(this.ah[this.lh]='Attack @whi@'+e,this.Dr&&this.Dr.ec>=t.ec?this.be[this.lh]=151:this.be[this.lh]=2151,this.Le[this.lh]=i,this.Re[this.lh]=s,this.Se[this.lh]=h,this.lh++),1===this.Hr&&(this.ah[this.lh]='Fight @whi@'+e,this.be[this.lh]=151,this.Le[this.lh]=i,this.Re[this.lh]=s,this.Se[this.lh]=h,this.lh++),2===this.Hr&&(this.ah[this.lh]='Duel-with @whi@'+e,this.be[this.lh]=1101,this.Le[this.lh]=i,this.Re[this.lh]=s,this.Se[this.lh]=h,this.lh++)):8&~this.Te||(this.ah[this.lh]=this.Oe+' @whi@'+e,this.be[this.lh]=651,this.Le[this.lh]=i,this.Re[this.lh]=s,this.Se[this.lh]=h,this.lh++);for(let t=0;t<this.lh;t++)if(660===this.be[t])return void(this.ah[t]='Walk here @whi@'+e)};Nm=(t,i)=>{const s=t-i;return s<-9?'@red@':s<-6?'@or3@':s<-3?'@or2@':s<0?'@or1@':s>9?'@gre@':s>6?'@gr3@':s>3?'@gr2@':s>0?'@gr1@':'@yel@'};mf=()=>{if(0===this.ne){this.ah[0]='Cancel',this.be[0]=1252,this.lh=1,this.um(this.jl),this.xe=0,this.Xl>8&&this.jl>11&&this.Xl<520&&this.jl<345&&(-1===this.Zs?this.bm():this.dm(c.A.Fo[this.Zs],this.Xl,this.jl,8,11,0)),this.xe!==this.te&&(this.te=this.xe),this.xe=0,this.Xl>562&&this.jl>231&&this.Xl<752&&this.jl<492&&(-1!==this.fh?this.dm(c.A.Fo[this.fh],this.Xl,this.jl,562,231,0):-1!==this.Dh[this.xh]&&this.dm(c.A.Fo[this.Dh[this.xh]],this.Xl,this.jl,562,231,0)),this.xe!==this.ie&&(this.Ks=!0,this.ie=this.xe),this.xe=0,this.Xl>22&&this.jl>375&&this.Xl<431&&this.jl<471&&(-1===this.uh?this.fm(this.Xl-22,this.jl-375):this.dm(c.A.Fo[this.uh],this.Xl,this.jl,22,375,0)),-1!==this.uh&&this.xe!==this.se&&(this.Xs=!0,this.se=this.xe);let t=!1;for(;!t;){t=!0;for(let i=0;i<this.lh-1;i++)if(this.be[i]<1e3&&this.be[i+1]>1e3){const s=this.ah[i];this.ah[i]=this.ah[i+1],this.ah[i+1]=s;const h=this.be[i];this.be[i]=this.be[i+1],this.be[i+1]=h;const e=this.Re[i];this.Re[i]=this.Re[i+1],this.Re[i+1]=e;const n=this.Se[i];this.Se[i]=this.Se[i+1],this.Se[i+1]=n;const r=this.Le[i];this.Le[i]=this.Le[i+1],this.Le[i+1]=r,t=!1}}}};Ef=()=>{let t=0;if(this.mi){let i;t=this.mi._u('Choose Option');for(let s=0;s<this.lh;s++)i=this.mi._u(this.ah[s]),i>t&&(t=i)}t+=8;const i=15*this.lh+21;let s,h;this.Wc>8&&this.Yc>11&&this.Wc<520&&this.Yc<345&&(s=this.Wc-(t/2|0)-8,s+t>512?s=512-t:s<0&&(s=0),h=this.Yc-11,h+i>334?h=334-i:h<0&&(h=0),this.sh=!0,this.hh=0,this.eh=s,this.nh=h,this.rh=t,this.oh=15*this.lh+22),this.Wc>562&&this.Yc>231&&this.Wc<752&&this.Yc<492&&(s=this.Wc-(t/2|0)-562,s<0?s=0:s+t>190&&(s=190-t),h=this.Yc-231,h<0?h=0:h+i>261&&(h=261-i),this.sh=!0,this.hh=1,this.eh=s,this.nh=h,this.rh=t,this.oh=15*this.lh+22),this.Wc>22&&this.Yc>375&&this.Wc<501&&this.Yc<471&&(s=this.Wc-(t/2|0)-22,s<0?s=0:s+t>479&&(s=479-t),h=this.Yc-375,h<0?h=0:h+i>96&&(h=96-i),this.sh=!0,this.hh=2,this.eh=s,this.nh=h,this.rh=t,this.oh=15*this.lh+22)};vf=(t,i,s,h,e,n,r,o,l,a,c)=>{const f=this.Nn[this.Fn];if(!f)return!1;const u=G.A.Zn,d=G.A.Zn;for(let t=0;t<u;t++)for(let i=0;i<d;i++){const s=G.A.index(t,i);this.Sr[s]=0,this.Mr[s]=99999999}let w=t,y=i;const A=G.A.index(t,i);this.Sr[A]=99,this.Mr[A]=0;let p=0,m=0;this.Lr[p]=t,this.Rr[p++]=i;let I=!1,g=this.Lr.length;const E=f.flags;for(;m!==p;){if(w=this.Lr[m],y=this.Rr[m],m=(m+1)%g,w===s&&y===h){I=!0;break}if(l!==P.A.Fd.id){if((l<P.A.Pm.id||l===P.A.Ty.id)&&f.Fm(w,y,s,h,l-1,o)){I=!0;break}if(l<P.A.Ty.id&&f.Um(w,y,s,h,l-1,o)){I=!0;break}}if(0!==n&&0!==r&&f.Bm(w,y,s,h,n,r,a)){I=!0;break}const t=this.Mr[G.A.index(w,y)]+1;let i=G.A.index(w-1,y);w>0&&0===this.Sr[i]&&(E[i]&H.A.Sd)===H.A.OPEN&&(this.Lr[p]=w-1,this.Rr[p]=y,p=(p+1)%g,this.Sr[i]=2,this.Mr[i]=t),i=G.A.index(w+1,y),w<u-1&&0===this.Sr[i]&&(E[i]&H.A.Md)===H.A.OPEN&&(this.Lr[p]=w+1,this.Rr[p]=y,p=(p+1)%g,this.Sr[i]=8,this.Mr[i]=t),i=G.A.index(w,y-1),y>0&&0===this.Sr[i]&&(E[i]&H.A.kd)===H.A.OPEN&&(this.Lr[p]=w,this.Rr[p]=y-1,p=(p+1)%g,this.Sr[i]=1,this.Mr[i]=t),i=G.A.index(w,y+1),y<d-1&&0===this.Sr[i]&&(E[i]&H.A.xd)===H.A.OPEN&&(this.Lr[p]=w,this.Rr[p]=y+1,p=(p+1)%g,this.Sr[i]=4,this.Mr[i]=t),i=G.A.index(w-1,y-1),w>0&&y>0&&0===this.Sr[i]&&!(E[i]&H.A.Gm)&&(E[G.A.index(w-1,y)]&H.A.Sd)===H.A.OPEN&&(E[G.A.index(w,y-1)]&H.A.kd)===H.A.OPEN&&(this.Lr[p]=w-1,this.Rr[p]=y-1,p=(p+1)%g,this.Sr[i]=3,this.Mr[i]=t),i=G.A.index(w+1,y-1),w<u-1&&y>0&&0===this.Sr[i]&&!(E[i]&H.A.Hm)&&(E[G.A.index(w+1,y)]&H.A.Md)===H.A.OPEN&&(E[G.A.index(w,y-1)]&H.A.kd)===H.A.OPEN&&(this.Lr[p]=w+1,this.Rr[p]=y-1,p=(p+1)%g,this.Sr[i]=9,this.Mr[i]=t),i=G.A.index(w-1,y+1),w>0&&y<d-1&&0===this.Sr[i]&&!(E[i]&H.A.Wm)&&(E[G.A.index(w-1,y)]&H.A.Sd)===H.A.OPEN&&(E[G.A.index(w,y+1)]&H.A.xd)===H.A.OPEN&&(this.Lr[p]=w-1,this.Rr[p]=y+1,p=(p+1)%g,this.Sr[i]=6,this.Mr[i]=t),i=G.A.index(w+1,y+1),w<u-1&&y<d-1&&0===this.Sr[i]&&!(E[i]&H.A.Ym)&&(E[G.A.index(w+1,y)]&H.A.Md)===H.A.OPEN&&(E[G.A.index(w,y+1)]&H.A.xd)===H.A.OPEN&&(this.Lr[p]=w+1,this.Rr[p]=y+1,p=(p+1)%g,this.Sr[i]=12,this.Mr[i]=t)}if(this.kr=0,!I){if(c){let t=100;for(let i=1;i<2;i++){for(let e=s-i;e<=s+i;e++)for(let s=h-i;s<=h+i;s++){const i=G.A.index(e,s);e>=0&&s>=0&&e<G.A.Zn&&s<G.A.Zn&&this.Mr[i]<t&&(t=this.Mr[i],w=e,y=s,this.kr=1,I=!0)}if(I)break}}if(!I)return!1}m=0,this.Lr[m]=w,this.Rr[m++]=y;let _=this.Sr[G.A.index(w,y)],C=_;for(;w!==t||y!==i;)C!==_&&(_=C,this.Lr[m]=w,this.Rr[m++]=y),C&ht.A.Hd?w++:C&ht.A.Bd&&w--,C&ht.A.Gd?y++:C&ht.A.Wd&&y--,C=this.Sr[G.A.index(w,y)];if(m>0){g=Math.min(m,25),m--;const t=this.Lr[m],i=this.Rr[m];if($.K.rt&&1===this.yf[6]&&1===this.yf[7]){for(let t=0;t<this.Ro.length;t++){const i=this.Ro[t];if(i&&i.x===x.A.Tf&&i.z===x.A.Of)return this.Ro[t]=null,!1}return this.Ro[this.So]=new st.A(this.Fn,x.A.Tf,x.A.Of),this.So=this.So+1&this.Ro.length-1,!1}0===e?(this.Gt.lf(O.A.Vm),this.Gt.p1(g+g+3)):1===e?(this.Gt.lf(O.A.Km),this.Gt.p1(g+g+3+14)):2===e&&(this.Gt.lf(O.A.Xm),this.Gt.p1(g+g+3)),1===this.yf[5]?this.Gt.p1(1):this.Gt.p1(0),this.Gt.p2(t+this.bn),this.Gt.p2(i+this.Ln),this.ze=this.Lr[0],this.Ze=this.Rr[0];for(let s=1;s<g;s++)m--,this.Gt.p1(this.Lr[m]-t),this.Gt.p1(this.Rr[m]-i);return!0}return 1!==e};jp=(t,i)=>{this.wr=0,this.dr=0,this.jm(t),this.zm(t),this.Zm(t,i),this.qm(t);for(let t=0;t<this.wr;t++){const i=this.Ar[t],s=this.ar[i];s&&(s.hu!==this.Ft&&(this.ar[i]=null))}if(t.qc!==i)throw new Error(`eek! Error packet size mismatch in getplayer pos:${t.qc} psize:${i}`);for(let t=0;t<this.cr;t++)if(!this.ar[this.ur[t]])throw new Error(`eek! ${this.username} null entry in pl list - pos:${t} size:${this.cr}`)};jm=t=>{t.$m();if(0!==t.Jm(1)){const i=t.Jm(2);if(0===i)this.yr[this.dr++]=this.kt;else if(1===i){const i=t.Jm(3);this.Dr?.step(!1,i);1===t.Jm(1)&&(this.yr[this.dr++]=this.kt)}else if(2===i){const i=t.Jm(3);this.Dr?.step(!0,i);const s=t.Jm(3);this.Dr?.step(!0,s);1===t.Jm(1)&&(this.yr[this.dr++]=this.kt)}else if(3===i){this.Fn=t.Jm(2);const i=t.Jm(7),s=t.Jm(7),h=t.Jm(1);this.Dr?.move(1===h,i,s);1===t.Jm(1)&&(this.yr[this.dr++]=this.kt)}}};zm=t=>{const i=t.Jm(8);if(i<this.cr)for(let t=i;t<this.cr;t++)this.Ar[this.wr++]=this.ur[t];if(i>this.cr)throw new Error(`eek! ${this.username} Too many players`);this.cr=0;for(let s=0;s<i;s++){const i=this.ur[s],h=this.ar[i];if(0===t.Jm(1))this.ur[this.cr++]=i,h&&(h.hu=this.Ft);else{const s=t.Jm(2);if(0===s)this.ur[this.cr++]=i,h&&(h.hu=this.Ft),this.yr[this.dr++]=i;else if(1===s){this.ur[this.cr++]=i,h&&(h.hu=this.Ft);const s=t.Jm(3);h?.step(!1,s);1===t.Jm(1)&&(this.yr[this.dr++]=i)}else if(2===s){this.ur[this.cr++]=i,h&&(h.hu=this.Ft);const s=t.Jm(3);h?.step(!0,s);const e=t.Jm(3);h?.step(!0,e);1===t.Jm(1)&&(this.yr[this.dr++]=i)}else 3===s&&(this.Ar[this.wr++]=i)}}};Zm=(t,i)=>{let s;for(;t.Qm+10<8*i&&(s=t.Jm(11),2047!==s);){if(!this.ar[s]){this.ar[s]=new W.A;const t=this.pr[s];t&&this.ar[s]?.read(t)}this.ur[this.cr++]=s;const i=this.ar[s];i&&(i.hu=this.Ft);let h=t.Jm(5);h>15&&(h-=32);let e=t.Jm(5);e>15&&(e-=32);const n=t.Jm(1);this.Dr&&i?.move(1===n,this.Dr.bf[0]+h,this.Dr.Lf[0]+e);1===t.Jm(1)&&(this.yr[this.dr++]=s)}t.tI()};qm=t=>{for(let i=0;i<this.dr;i++){const s=this.yr[i],h=this.ar[s];if(!h)continue;let e=t.fA;(e&W.A.iI)===W.A.iI&&(e+=t.fA<<8),this.sI(h,s,e,t)}};sI=(t,i,s,e)=>{if(t.Du=s,t.Nu=this.Ft,(s&W.A.Pu)===W.A.Pu){const s=e.fA,h=new Uint8Array(s),n=new I.A(h);e.jA(s,0,h),this.pr[i]=n,t.read(n)}if((s&W.A.Fu)===W.A.Fu){let i=e.aA;65535===i&&(i=-1),i===t.Uu&&(t.hI=0);const s=e.fA;(-1===i||-1===t.Uu||h.A.Fo[i].priority>h.A.Fo[t.Uu].priority||0===h.A.Fo[t.Uu].priority)&&(t.Uu=i,t.eI=0,t.nI=0,t.rI=s,t.hI=0)}if((s&W.A.Bu)===W.A.Bu&&(t.Gu=e.aA,65535===t.Gu&&(t.Gu=-1)),(s&W.A.Hu)===W.A.Hu&&(t.gu=e.vA,t.Cu=0,t.Tu=0,t.Ou=150,t.name&&this.$d(2,t.gu,t.name)),(s&W.A.Wu)===W.A.Wu&&(t.Su=e.fA,t.Ru=e.fA,t.vu=this.Ft+400,t.bu=e.fA,t.Lu=e.fA),(s&W.A.Yu)===W.A.Yu&&(t.oI=e.aA,t.lI=e.aA,t.Vu=t.oI,t.Ku=t.lI),(s&W.A.Xu)===W.A.Xu){const i=e.aA,s=e.fA,h=e.fA,n=e.qc;if(t.name){const n=M.A._d(t.name);let r=!1;if(s<=1)for(let t=0;t<this.Ah;t++)if(this.ph[t]===n){r=!0;break}if(!r&&0===this.ih)try{const n=b.A.mc(e,h),r=v.A.filter(n);t.gu=r,t.Cu=i>>8,t.Tu=255&i,t.Ou=150,s>1?this.$d(1,r,t.name):this.$d(2,r,t.name)}catch(t){}}e.qc=n+h}if((s&W.A.ju)===W.A.ju){t.zu=e.aA;const i=e.el;t.aI=i>>16,t.cI=this.Ft+(65535&i),t.fI=0,t.uI=0,t.cI>this.Ft&&(t.fI=-1),65535===t.zu&&(t.zu=-1)}(s&W.A.Zu)===W.A.Zu&&(t.dI=e.fA,t.wI=e.fA,t.yI=e.fA,t.AI=e.fA,t.Mu=e.aA+this.Ft,t.ku=e.aA+this.Ft,t.pI=e.fA,t.pathLength=0,t.bf[0]=t.yI,t.Lf[0]=t.AI)};mA=(t,i)=>{this.wr=0,this.dr=0,this.mI(t),this.II(t,i),this.gI(t);for(let t=0;t<this.wr;t++){const i=this.Ar[t],s=this.mr[i];s&&(s.hu!==this.Ft&&(s.type=null,this.mr[i]=null))}if(t.qc!==i)throw new Error(`eek! ${this.username} size mismatch in getnpcpos - pos:${t.qc} psize:${i}`);for(let t=0;t<this.Ir;t++)if(!this.mr[this.gr[t]])throw new Error(`eek! ${this.username} null entry in npc list - pos:${t} size:${this.Ir}`)};mI=t=>{t.$m();const i=t.Jm(8);if(i<this.Ir)for(let t=i;t<this.Ir;t++)this.Ar[this.wr++]=this.gr[t];if(i>this.Ir)throw new Error(`eek! ${this.username} Too many npcs`);this.Ir=0;for(let s=0;s<i;s++){const i=this.gr[s],h=this.mr[i];if(0===t.Jm(1))this.gr[this.Ir++]=i,h&&(h.hu=this.Ft);else{const s=t.Jm(2);if(0===s)this.gr[this.Ir++]=i,h&&(h.hu=this.Ft),this.yr[this.dr++]=i;else if(1===s){this.gr[this.Ir++]=i,h&&(h.hu=this.Ft);const s=t.Jm(3);h?.step(!1,s);1===t.Jm(1)&&(this.yr[this.dr++]=i)}else if(2===s){this.gr[this.Ir++]=i,h&&(h.hu=this.Ft);const s=t.Jm(3);h?.step(!0,s);const e=t.Jm(3);h?.step(!0,e);1===t.Jm(1)&&(this.yr[this.dr++]=i)}else 3===s&&(this.Ar[this.wr++]=i)}}};II=(t,i)=>{for(;t.Qm+21<8*i;){const i=t.Jm(13);if(8191===i)break;this.mr[i]||(this.mr[i]=new Y.A);const s=this.mr[i];this.gr[this.Ir++]=i,s?(s.hu=this.Ft,s.type=r.A.get(t.Jm(11)),s.size=s.type.size,s.EI=s.type._I,s.CI=s.type.TI,s.OI=s.type.vI,s.bI=s.type.LI,s.Ya=s.type.RI):t.Jm(11);let h=t.Jm(5);h>15&&(h-=32);let e=t.Jm(5);e>15&&(e-=32),this.Dr&&s?.move(!1,this.Dr.bf[0]+h,this.Dr.Lf[0]+e);1===t.Jm(1)&&(this.yr[this.dr++]=i)}t.tI()};gI=t=>{for(let i=0;i<this.dr;i++){const s=this.yr[i],e=this.mr[s];if(!e)continue;const n=t.fA;if(e.Du=n,e.Nu=this.Ft,(n&Y.A.Fu)===Y.A.Fu){let i=t.aA;65535===i&&(i=-1),i===e.Uu&&(e.hI=0);const s=t.fA;(-1===i||-1===e.Uu||h.A.Fo[i].priority>h.A.Fo[e.Uu].priority||0===h.A.Fo[e.Uu].priority)&&(e.Uu=i,e.eI=0,e.nI=0,e.rI=s,e.hI=0)}if((n&Y.A.Bu)===Y.A.Bu&&(e.Gu=t.aA,65535===e.Gu&&(e.Gu=-1)),(n&Y.A.Hu)===Y.A.Hu&&(e.gu=t.vA,e.Ou=100),(n&Y.A.Wu)===Y.A.Wu&&(e.Su=t.fA,e.Ru=t.fA,e.vu=this.Ft+400,e.bu=t.fA,e.Lu=t.fA),(n&Y.A.qu)===Y.A.qu&&(e.type=r.A.get(t.aA),e.EI=e.type._I,e.CI=e.type.TI,e.OI=e.type.vI,e.bI=e.type.LI,e.Ya=e.type.RI),(n&Y.A.ju)===Y.A.ju){e.zu=t.aA;const i=t.el;e.aI=i>>16,e.cI=this.Ft+(65535&i),e.fI=0,e.uI=0,e.cI>this.Ft&&(e.fI=-1),65535===e.zu&&(e.zu=-1)}(n&Y.A.Yu)===Y.A.Yu&&(e.oI=t.aA,e.lI=t.aA,e.Vu=e.oI,e.Ku=e.lI)}};ff=()=>{for(let t=-1;t<this.cr;t++){let i;i=-1===t?this.kt:this.ur[t];const s=this.ar[i];s&&this.SI(s)}if($.K.It++,$.K.It>1406){$.K.It=0,this.Gt.lf(O.A.MI),this.Gt.p1(0);const t=this.Gt.qc;this.Gt.p1(162),this.Gt.p1(22),2*Math.random()|0||this.Gt.p1(84),this.Gt.p2(31824),this.Gt.p2(13490),2*Math.random()|0||this.Gt.p1(123),2*Math.random()|0||this.Gt.p1(134),this.Gt.p1(100),this.Gt.p1(94),this.Gt.p2(35521),this.Gt.tu(this.Gt.qc-t)}};SI=t=>{(t.x<128||t.z<128||t.x>=13184||t.z>=13184)&&(t.Uu=-1,t.zu=-1,t.Mu=0,t.ku=0,t.x=128*t.bf[0]+64*t.size,t.z=128*t.Lf[0]+64*t.size,t.pathLength=0),t===this.Dr&&(t.x<1536||t.z<1536||t.x>=11776||t.z>=11776)&&(t.Uu=-1,t.zu=-1,t.Mu=0,t.ku=0,t.x=128*t.bf[0]+64*t.size,t.z=128*t.Lf[0]+64*t.size,t.pathLength=0),t.Mu>this.Ft?this.kI(t):t.ku>=this.Ft?this.xI(t):this.DI(t),this.NI(t),this.FI(t)};Xf=()=>{if(this.Dr){this.Dr.x>>7===this.ze&&this.Dr.z>>7===this.Ze&&(this.ze=0);for(let t=-1;t<this.cr;t++){let i,s;if(-1===t?(i=this.Dr,s=this.kt<<14):(i=this.ar[this.ur[t]],s=this.ur[t]<<14),!i||!i.isVisible())continue;i.st=($.K.st&&this.cr>50||this.cr>200)&&-1!==t&&i.UI===i.Ya;const h=i.x>>7,e=i.z>>7;if(!(h<0||h>=G.A.Zn||e<0||e>=G.A.Zn))if(!i.BI||this.Ft<i.GI||this.Ft>=i.HI){if(64==(127&i.x)&&64==(127&i.z)){if(this.jn[h][e]===this.je)continue;this.jn[h][e]=this.je}i.y=this.Jf(this.Fn,i.x,i.z),this.Ve?.WI(this.Fn,i.x,i.y,i.z,null,i,s,i.YI,60,i.VI)}else i.st=!1,i.y=this.Jf(this.Fn,i.x,i.z),this.Ve?.KI(this.Fn,i.x,i.y,i.z,i.XI,i.jI,i.zI,i.ZI,null,i,s,i.YI)}}};uf=()=>{for(let t=0;t<this.Ir;t++){const i=this.gr[t],s=this.mr[i];s&&s.type&&this.SI(s)}};jf=()=>{for(let t=0;t<this.Ir;t++){const i=this.mr[this.gr[t]],s=536870912+(this.gr[t]<<14)|0;if(!i||!i.isVisible())continue;const h=i.x>>7,e=i.z>>7;if(!(h<0||h>=G.A.Zn||e<0||e>=G.A.Zn)){if(1===i.size&&64==(127&i.x)&&64==(127&i.z)){if(this.jn[h][e]===this.je)continue;this.jn[h][e]=this.je}this.Ve?.WI(this.Fn,i.x,this.Jf(this.Fn,i.x,i.z),i.z,null,i,s,i.YI,64*(i.size-1)+60,i.VI)}}};zf=()=>{for(let t=this.Er.head();t;t=this.Er.next())if(t.level!==this.Fn||this.Ft>t.qI)t.EA();else if(this.Ft>=t.$I){if(t.target>0){const i=this.mr[t.target-1];i&&t.JI(i.x,this.Jf(t.level,i.x,i.z)-t.offsetY,i.z,this.Ft)}if(t.target<0){const i=-t.target-1;let s;s=i===this.Fr?this.Dr:this.ar[i],s&&t.JI(s.x,this.Jf(t.level,s.x,s.z)-t.offsetY,s.z,this.Ft)}t.update(this.Xe),this.Ve?.WI(this.Fn,0|t.x,0|t.y,0|t.z,null,t,-1,t.YI,60,!1)}};Zf=()=>{for(let t=this._r.head();t;t=this._r.next())t.level!==this.Fn||t.QI?t.EA():this.Ft>=t.$I&&(t.update(this.Xe),t.QI?t.EA():this.Ve?.WI(t.level,t.x,t.y,t.z,null,t,-1,0,60,!1))};qf=()=>{for(let t=this.Cr.head();t;t=this.Cr.next()){let i=!1;if(t.Tl+=this.Xe,-1===t.Ol&&(t.Ol=0,i=!0),t.tg.delay)for(;t.Tl>t.tg.delay[t.Ol];)if(t.Tl-=t.tg.delay[t.Ol]+1,t.Ol++,i=!0,t.Ol>=t.tg.vl&&(t.Ol-=t.tg.bl,t.Ol<0||t.Ol>=t.tg.vl)){t.EA(),i=!1;break}if(i&&this.Ve){const i=t.nm,s=t.sm,h=t.hm;let n=0;if(0===t.ig?n=this.Ve.Dd(i,s,h):1===t.ig?n=this.Ve.qy(i,h,s):2===t.ig?n=this.Ve.Vd(i,s,h):3===t.ig&&(n=this.Ve.Ld(i,s,h)),this.Kn&&0!==n&&(n>>14&32767)===t.index){const r=this.Kn[i][s][h],o=this.Kn[i][s+1][h],l=this.Kn[i][s+1][h+1],a=this.Kn[i][s][h+1],c=e.A.get(t.index);let f=-1;if(-1!==t.Ol&&t.tg.frames&&(f=t.tg.frames[t.Ol]),2===t.ig){const t=this.Ve.Nd(i,s,h,n);let e=31&t;const u=t>>6;e===P.A.Oy.id&&(e=P.A.Ty.id),this.Ve?.sg(i,s,h,c.Ea(e,u,r,o,l,a,f))}else if(1===t.ig)this.Ve?.hg(i,s,h,c.Ea(P.A.eg.id,0,r,o,l,a,f));else if(0===t.ig){const t=this.Ve.Nd(i,s,h,n),e=31&t,u=t>>6;if(e===P.A.Ud.id){const t=u+1&3;this.Ve?.ng(s,h,i,c.Ea(P.A.Ud.id,u+4,r,o,l,a,f),c.Ea(P.A.Ud.id,t,r,o,l,a,f))}else this.Ve?.rg(i,s,h,c.Ea(e,u,r,o,l,a,f))}else if(3===t.ig){const t=this.Ve.Nd(i,s,h,n)>>6;this.Ve?.og(i,s,h,c.Ea(P.A.vy.id,t,r,o,l,a,f))}}else t.EA()}}};df=()=>{for(let t=-1;t<this.cr;t++){let i;i=-1===t?this.kt:this.ur[t];const s=this.ar[i];s&&s.Ou>0&&(s.Ou--,0===s.Ou&&(s.gu=null))}for(let t=0;t<this.Ir;t++){const i=this.gr[t],s=this.mr[i];s&&s.Ou>0&&(s.Ou--,0===s.Ou&&(s.gu=null))}};wf=()=>{if(2===this.Ke){for(let t=this.Tr.head();t;t=this.Tr.next())this.Ft>=t.qI&&(this.jy(t.pp,t.x,t.z,t.rm,t.angle,t.shape,t.zd),t.EA());$.K.At++,$.K.At>85&&($.K.At=0,this.Gt.lf(O.A.lg))}};kI=t=>{const i=t.Mu-this.Ft,s=128*t.dI+64*t.size,h=128*t.wI+64*t.size;t.x+=(s-t.x)/i|0,t.z+=(h-t.z)/i|0,t.ag=0,0===t.pI&&(t.cg=1024),1===t.pI&&(t.cg=1536),2===t.pI&&(t.cg=0),3===t.pI&&(t.cg=512)};xI=t=>{if(t.ku===this.Ft||-1===t.Uu||0!==t.rI||t.nI+1>h.A.Fo[t.Uu].delay[t.eI]){const i=t.ku-t.Mu,s=this.Ft-t.Mu,h=128*t.dI+64*t.size,e=128*t.wI+64*t.size,n=128*t.yI+64*t.size,r=128*t.AI+64*t.size;t.x=(h*(i-s)+n*s)/i|0,t.z=(e*(i-s)+r*s)/i|0}t.ag=0,0===t.pI&&(t.cg=1024),1===t.pI&&(t.cg=1536),2===t.pI&&(t.cg=0),3===t.pI&&(t.cg=512),t.YI=t.cg};NI=t=>{if(-1!==t.Gu&&t.Gu<32768){const i=this.mr[t.Gu];if(i){const s=t.x-i.x,h=t.z-i.z;0===s&&0===h||(t.cg=325.949*Math.atan2(s,h)&2047)}}if(t.Gu>=32768){let i=t.Gu-32768;i===this.Fr&&(i=this.kt);const s=this.ar[i];if(s){const i=t.x-s.x,h=t.z-s.z;0===i&&0===h||(t.cg=325.949*Math.atan2(i,h)&2047)}}if((0!==t.oI||0!==t.lI)&&(0===t.pathLength||t.ag>0)){const i=t.x-64*(t.oI-this.bn-this.bn),s=t.z-64*(t.lI-this.Ln-this.Ln);0===i&&0===s||(t.cg=325.949*Math.atan2(i,s)&2047),t.oI=0,t.lI=0}const i=t.cg-t.YI&2047;if(0!==i&&(i<32||i>2016?t.YI=t.cg:i>1024?t.YI-=32:t.YI+=32,t.YI&=2047,t.UI===t.Ya&&t.YI!==t.cg)){if(-1!==t.fg)return void(t.UI=t.fg);t.UI=t.EI}};FI=t=>{let i;if(t.VI=!1,-1!==t.UI&&(i=h.A.Fo[t.UI],t.ug++,i.delay&&t.dg<i.vl&&t.ug>i.delay[t.dg]&&(t.ug=0,t.dg++),t.dg>=i.vl&&(t.ug=0,t.dg=0)),-1!==t.Uu&&0===t.rI){for(i=h.A.Fo[t.Uu],t.nI++;i.delay&&t.eI<i.vl&&t.nI>i.delay[t.eI];)t.nI-=i.delay[t.eI],t.eI++;t.eI>=i.vl&&(t.eI-=i.bl,t.hI++,t.hI>=i.wg&&(t.Uu=-1),(t.eI<0||t.eI>=i.vl)&&(t.Uu=-1)),t.VI=i.yg}if(t.rI>0&&t.rI--,-1!==t.zu&&this.Ft>=t.cI){for(t.fI<0&&(t.fI=0),i=l.A.Fo[t.zu].tg,t.uI++;i&&i.delay&&t.fI<i.vl&&t.uI>i.delay[t.fI];)t.uI-=i.delay[t.fI],t.fI++;i&&t.fI>=i.vl&&(t.fI<0||t.fI>=i.vl)&&(t.zu=-1)}};DI=t=>{if(t.UI=t.Ya,0===t.pathLength)return void(t.ag=0);if(-1!==t.Uu&&0===t.rI){if(!h.A.Fo[t.Uu].Ag)return void t.ag++}const i=t.x,s=t.z,e=128*t.bf[t.pathLength-1]+64*t.size,n=128*t.Lf[t.pathLength-1]+64*t.size;if(e-i<=256&&e-i>=-256&&n-s<=256&&n-s>=-256){t.cg=i<e?s<n?1280:s>n?1792:1536:i>e?s<n?768:s>n?256:512:s<n?1024:0;let h=t.cg-t.YI&2047;h>1024&&(h-=2048);let r=t.CI;h>=-256&&h<=256?r=t.EI:h>=256&&h<768?r=t.bI:h>=-768&&h<=-256&&(r=t.OI),-1===r&&(r=t.EI),t.UI=r;let o=4;t.YI!==t.cg&&-1===t.Gu&&(o=2),t.pathLength>2&&(o=6),t.pathLength>3&&(o=8),t.ag>0&&t.pathLength>1&&(o=8,t.ag--),t.pg[t.pathLength-1]&&(o<<=1),o>=8&&t.UI===t.EI&&-1!==t.mg&&(t.UI=t.mg),i<e?(t.x+=o,t.x>e&&(t.x=e)):i>e&&(t.x-=o,t.x<e&&(t.x=e)),s<n?(t.z+=o,t.z>n&&(t.z=n)):s>n&&(t.z-=o,t.z<n&&(t.z=n)),t.x===e&&t.z===n&&t.pathLength--}else t.x=e,t.z=n};su=()=>{let t=3;if(this.wn<310&&this.Dr){let i=this.fn>>7,s=this.dn>>7;const h=this.Dr.x>>7,e=this.Dr.z>>7;let n,r,o,l;if(this.Xn&&4&this.Xn[this.Fn][i][s]&&(t=this.Fn),n=h>i?h-i:i-h,r=e>s?e-s:s-e,n>r)for(o=65536*r/n|0,l=32768;i!==h;)i<h?i++:i>h&&i--,this.Xn&&4&this.Xn[this.Fn][i][s]&&(t=this.Fn),l+=o,l>=65536&&(l-=65536,s<e?s++:s>e&&s--,this.Xn&&4&this.Xn[this.Fn][i][s]&&(t=this.Fn));else for(o=65536*n/r|0,l=32768;s!==e;)s<e?s++:s>e&&s--,this.Xn&&4&this.Xn[this.Fn][i][s]&&(t=this.Fn),l+=o,l>=65536&&(l-=65536,i<h?i++:i>h&&i--,this.Xn&&4&this.Xn[this.Fn][i][s]&&(t=this.Fn))}return this.Dr&&this.Xn&&4&this.Xn[this.Fn][this.Dr.x>>7][this.Dr.z>>7]&&(t=this.Fn),t};iu=()=>{if(!this.Xn)return 0;return this.Jf(this.Fn,this.fn,this.dn)-this.un>=800||!(4&this.Xn[this.Fn][this.fn>>7][this.dn>>7])?3:this.Fn};Jf=(t,i,s)=>{if(!this.Kn)return 0;const h=Math.min(i>>7,G.A.Zn-1),e=Math.min(s>>7,G.A.Zn-1);let n=t;t<3&&this.Xn&&!(2&~this.Xn[1][h][e])&&(n=t+1);const r=127&i,o=127&s;return(this.Kn[n][h][e]*(128-r)+this.Kn[n][h+1][e]*r>>7)*(128-o)+(this.Kn[n][h][e+1]*(128-r)+this.Kn[n][h+1][e+1]*r>>7)*o>>7};$f=(t,i,s,h,e,n)=>{const r=2048-e&2047,o=2048-h&2047;let l,a,c,f=0,u=0,w=n;0!==r&&(l=d.A.sin[r],a=d.A.cos[r],c=u*a-n*l>>16,w=u*l+n*a>>16,u=c),0!==o&&(l=d.A.sin[o],a=d.A.cos[o],c=w*l+f*a>>16,w=w*a-f*l>>16,f=c),this.fn=t-f,this.un=i-u,this.dn=s-w,this.wn=e,this.yn=h};Df=()=>{if(!this.Dr)return;const t=this.Dr.x+this.Je,i=this.Dr.z+this.Qe;(this.Yn-t<-500||this.Yn-t>500||this.Vn-i<-500||this.Vn-i>500)&&(this.Yn=t,this.Vn=i),this.Yn!==t&&(this.Yn+=(t-this.Yn)/16|0),this.Vn!==i&&(this.Vn+=(i-this.Vn)/16|0),1===this.yf[1]?this.Hn+=(-this.Hn-24)/2|0:1===this.yf[2]?this.Hn+=(24-this.Hn)/2|0:this.Hn=this.Hn/2|0,1===this.yf[3]?this.Wn+=(12-this.Wn)/2|0:1===this.yf[4]?this.Wn+=(-this.Wn-12)/2|0:this.Wn=this.Wn/2|0,this.Gn=this.Gn+this.Hn/2&2047,this.Bn+=this.Wn/2|0,this.Bn<128&&(this.Bn=128),this.Bn>383&&(this.Bn=383);const s=this.Yn>>7,h=this.Vn>>7,e=this.Jf(this.Fn,this.Yn,this.Vn);let n=0;if(this.Kn&&s>3&&h>3&&s<100&&h<100)for(let t=s-4;t<=s+4;t++)for(let i=h-4;i<=h+4;i++){let s=this.Fn;s<3&&this.Xn&&!(2&~this.Xn[1][t][i])&&s++;const h=e-this.Kn[s][t][i];h>n&&(n=h)}let r=192*n;r>98048&&(r=98048),r<32768&&(r=32768),r>this.An?this.An+=(r-this.An)/24|0:r<this.An&&(this.An+=(r-this.An)/80|0)};Nf=()=>{let t=128*this.hr+64,i=128*this.er+64,s=this.Jf(this.Fn,this.hr,this.er)-this.nr;this.fn<t&&(this.fn+=this.rr+((t-this.fn)*this.lr/1e3|0),this.fn>t&&(this.fn=t)),this.fn>t&&(this.fn-=this.rr+((this.fn-t)*this.lr/1e3|0),this.fn<t&&(this.fn=t)),this.un<s&&(this.un+=this.rr+((s-this.un)*this.lr/1e3|0),this.un>s&&(this.un=s)),this.un>s&&(this.un-=this.rr+((this.un-s)*this.lr/1e3|0),this.un<s&&(this.un=s)),this.dn<i&&(this.dn+=this.rr+((i-this.dn)*this.lr/1e3|0),this.dn>i&&(this.dn=i)),this.dn>i&&(this.dn-=this.rr+((this.dn-i)*this.lr/1e3|0),this.dn<i&&(this.dn=i)),t=128*this.Jn+64,i=128*this.Qn+64,s=this.Jf(this.Fn,this.Jn,this.Qn)-this.tr;const h=t-this.fn,e=s-this.un,n=i-this.dn,r=0|Math.sqrt(h*h+n*n);let o=325.949*Math.atan2(e,r)&2047;const l=-325.949*Math.atan2(h,n)&2047;o<128&&(o=128),o>383&&(o=383),this.wn<o&&(this.wn+=this.ir+((o-this.wn)*this.sr/1e3|0),this.wn>o&&(this.wn=o)),this.wn>o&&(this.wn-=this.ir+((this.wn-o)*this.sr/1e3|0),this.wn<o&&(this.wn=o));let a=l-this.yn;a>1024&&(a-=2048),a<-1024&&(a+=2048),a>0&&(this.yn+=this.ir+(a*this.sr/1e3|0),this.yn&=2047),a<0&&(this.yn-=this.ir+(-a*this.sr/1e3|0),this.yn&=2047);let c=l-this.yn;c>1024&&(c-=2048),c<-1024&&(c+=2048),(c<0&&a>0||c>0&&a<0)&&(this.yn=l)};HA=(t,i)=>{const s=t.fA;let n=this.Cn+(s>>4&7),r=this.Tn+(7&s);if(i===T.A.GA||i===T.A.BA){const s=t.fA,h=s>>2,e=3&s,o=P.A.of(h).zd;let l;if(l=i===T.A.BA?-1:t.aA,n>=0&&r>=0&&n<G.A.Zn&&r<G.A.Zn){let t=null;for(let i=this.br.head();i;i=this.br.next())if(i.pp===this.Fn&&i.x===n&&i.z===r&&i.zd===o){t=i;break}if(!t&&this.Ve){let i=0,s=-1,h=0,e=0;if(o===N.A.zy?i=this.Ve.Dd(this.Fn,n,r):o===N.A.Zy?i=this.Ve.qy(this.Fn,r,n):o===N.A.$y?i=this.Ve.Vd(this.Fn,n,r):o===N.A.vy&&(i=this.Ve.Ld(this.Fn,n,r)),0!==i){const t=this.Ve.Nd(this.Fn,n,r,i);s=i>>14&32767,h=31&t,e=t>>6}t=new U.A(this.Fn,o,n,r,0,F.A.Bd,P.A.Fd.id,s,e,h),this.br.Ig(t)}t&&(t.rm=l,t.shape=h,t.angle=e),this.jy(this.Fn,n,r,l,e,h,o)}}else if(i===T.A.UA){const i=t.fA>>2,s=P.A.of(i).zd,e=t.aA;if(n>=0&&r>=0&&n<G.A.Zn&&r<G.A.Zn&&this.Ve){let t=0;if(s===N.A.zy?t=this.Ve.Dd(this.Fn,n,r):s===N.A.Zy?t=this.Ve.qy(this.Fn,r,n):s===N.A.$y?t=this.Ve.Vd(this.Fn,n,r):s===N.A.vy&&(t=this.Ve.Ld(this.Fn,n,r)),0!==t){const i=new K.A(t>>14&32767,this.Fn,s,n,r,h.A.Fo[e],!1);this.Cr.Ig(i)}}}else if(i===T.A.FA){const i=t.aA,s=t.aA;if(n>=0&&r>=0&&n<G.A.Zn&&r<G.A.Zn){const t=new V.A(i,s);this.Or[this.Fn][n][r]||(this.Or[this.Fn][n][r]=new S.A),this.Or[this.Fn][n][r]?.Ig(t),this.Hy(n,r)}}else if(i===T.A.PA){const i=t.aA;if(n>=0&&r>=0&&n<G.A.Zn&&r<G.A.Zn){const t=this.Or[this.Fn][n][r];if(t){for(let s=t.head();s;s=t.next())if(s.index===(32767&i)){s.EA();break}t.head()||(this.Or[this.Fn][n][r]=null),this.Hy(n,r)}}}else if(i===T.A.NA){let i=n+t.dA,s=r+t.dA;const h=t.wp,e=t.aA,o=t.fA,l=t.fA,a=t.aA,c=t.aA,f=t.fA,u=t.fA;if(n>=0&&r>=0&&n<G.A.Zn&&r<G.A.Zn&&i>=0&&s>=0&&i<G.A.Zn&&s<G.A.Zn){n=128*n+64,r=128*r+64,i=128*i+64,s=128*s+64;const t=new X.A(e,this.Fn,n,this.Jf(this.Fn,n,r)-o,r,a+this.Ft,c+this.Ft,f,u,h,l);t.JI(i,this.Jf(this.Fn,i,s)-l,s,a+this.Ft),this.Er.Ig(t)}}else if(i===T.A.DA){const i=t.aA,s=t.fA,h=t.aA;if(n>=0&&r>=0&&n<G.A.Zn&&r<G.A.Zn){n=128*n+64,r=128*r+64;const t=new j.A(i,this.Fn,n,r,this.Jf(this.Fn,n,r)-s,this.Ft,h);this._r.Ig(t)}}else if(i===T.A.xA){const i=t.aA,s=t.aA,h=t.aA;if(n>=0&&r>=0&&n<G.A.Zn&&r<G.A.Zn&&h!==this.Fr){const t=new V.A(i,s);this.Or[this.Fn][n][r]||(this.Or[this.Fn][n][r]=new S.A),this.Or[this.Fn][n][r]?.Ig(t),this.Hy(n,r)}}else if(i===T.A.kA){const i=t.fA,s=i>>2,h=3&i,o=P.A.of(s).zd,l=t.aA,a=t.aA,c=t.aA,f=t.aA;let u,d=t.dA,w=t.dA,y=t.dA,A=t.dA;if(u=f===this.Fr?this.Dr:this.ar[f],u&&this.Kn){const t=new B.A(this.Fn,o,n,r,-1,h,s,a+this.Ft);this.Tr.Ig(t);const i=new B.A(this.Fn,o,n,r,l,h,s,c+this.Ft);this.Tr.Ig(i);const f=this.Kn[this.Fn][n][r],p=this.Kn[this.Fn][n+1][r],m=this.Kn[this.Fn][n+1][r+1],I=this.Kn[this.Fn][n][r+1],g=e.A.get(l);u.GI=a+this.Ft,u.HI=c+this.Ft,u.BI=g.Ea(s,h,f,p,m,I,-1);let E,_=g.width,C=g.length;h!==F.A.Gd&&h!==F.A.Wd||(_=g.length,C=g.width),u.gg=128*n+64*_,u.Eg=128*r+64*C,u._g=this.Jf(this.Fn,u.gg,u.Eg),d>y&&(E=d,d=y,y=E),w>A&&(E=w,w=A,A=E),u.XI=n+d,u.zI=n+y,u.jI=r+w,u.ZI=r+A}}else if(i===T.A.MA){const i=t.aA,s=t.aA,h=t.aA;if(n>=0&&r>=0&&n<G.A.Zn&&r<G.A.Zn){const t=this.Or[this.Fn][n][r];if(t){for(let e=t.head();e;e=t.next())if(e.index===(32767&i)&&e.count===s){e.count=h;break}this.Hy(n,r)}}}};cu=t=>{if(!$.K.st){if(d.A.Cg[17]>=t){const t=d.A.Tg[17];if(!t)return;const i=t.width*t.height-1,s=t.width*this.Xe*2,h=t.Ic,e=this.Dn;for(let t=0;t<=i;t++)e[t]=h[t-s&i];t.Ic=e,this.Dn=h,d.A.Og(17)}if(d.A.Cg[24]>=t){const t=d.A.Tg[24];if(!t)return;const i=t.width*t.height-1,s=t.width*this.Xe*2,h=t.Ic,e=this.Dn;for(let t=0;t<=i;t++)e[t]=h[t-s&i];t.Ic=e,this.Dn=h,d.A.Og(24)}}};kc=()=>{if(!(this.vi&&this.bi&&this.Oi&&this.ki))return;for(let t=10;t<117;t++){(100*Math.random()|0)<50&&(this.vi[t+32512]=255)}for(let t=0;t<100;t++){const t=2+(124*Math.random()|0)+(128+(128*Math.random()|0)<<7);this.vi[t]=192}for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);this.bi[s]=(this.vi[s-1]+this.vi[s+1]+this.vi[s-128]+this.vi[s+128])/4|0}this.xi+=128,this.xi>this.Oi.length&&(this.xi-=this.Oi.length,this.Nc(this.gi[12*Math.random()|0]));for(let t=1;t<255;t++)for(let i=1;i<127;i++){const s=i+(t<<7);let h=this.bi[s+128]-(this.Oi[s+this.xi&this.Oi.length-1]/5|0);h<0&&(h=0),this.vi[s]=h}for(let t=0;t<255;t++)this.ki[t]=this.ki[t+1];if(this.ki[255]=16*Math.sin(this.Ft/14)+14*Math.sin(this.Ft/15)+12*Math.sin(this.Ft/16)|0,this.Di>0&&(this.Di-=4),this.Ni>0&&(this.Ni-=4),0===this.Di&&0===this.Ni){const t=2e3*Math.random()|0;0===t?this.Di=1024:1===t&&(this.Ni=1024)}};vg=(t,i,s)=>{const h=256-i;return((16711935&t)*h+(16711935&s)*i&4278255360)+((65280&t)*h+(65280&s)*i&16711680)>>8};xc=()=>{if(!(this.Li&&this.Ri&&this.Si&&this.Mi&&this.ki&&this.vi))return;const t=256;if(this.Di>0)for(let t=0;t<256;t++)this.Di>768?this.Li[t]=this.vg(this.Ri[t],1024-this.Di,this.Si[t]):this.Di>256?this.Li[t]=this.Si[t]:this.Li[t]=this.vg(this.Si[t],256-this.Di,this.Ri[t]);else if(this.Ni>0)for(let t=0;t<256;t++)this.Ni>768?this.Li[t]=this.vg(this.Ri[t],1024-this.Ni,this.Mi[t]):this.Ni>256?this.Li[t]=this.Mi[t]:this.Li[t]=this.vg(this.Mi[t],256-this.Ni,this.Ri[t]);else for(let t=0;t<256;t++)this.Li[t]=this.Ri[t];for(let t=0;t<33920;t++)this.ri&&this._i&&(this.ri.Ic[t]=this._i.Ic[t]);let i=0,s=1152;for(let h=1;h<255;h++){let e=(this.ki[h]*(t-h)/t|0)+22;e<0&&(e=0),i+=e;for(let t=e;t<128;t++){let t=this.vi[i++];if(0===t)s++;else{const i=t,h=256-t;if(t=this.Li[t],this.ri){const e=this.ri.Ic[s];this.ri.Ic[s++]=((16711935&t)*i+(16711935&e)*h&4278255360)+((65280&t)*i+(65280&e)*h&16711680)>>8}}}s+=e}this.ri?.draw(0,0);for(let t=0;t<33920;t++)this.oi&&this.Ci&&(this.oi.Ic[t]=this.Ci.Ic[t]);i=0,s=1176;for(let h=1;h<255;h++){const e=this.ki[h]*(t-h)/t|0,n=103-e;s+=e;for(let t=0;t<n;t++){let t=this.vi[i++];if(0===t)s++;else{const i=t,h=256-t;if(t=this.Li[t],this.oi){const e=this.oi.Ic[s];this.oi.Ic[s++]=((16711935&t)*i+(16711935&e)*h&4278255360)+((65280&t)*i+(65280&e)*h&16711680)>>8}}}i+=128-n,s+=128-n-e}this.oi?.draw(661,0)}}console.log(`RS2 user client - release #${$.K.tt}`),(0,nt.J)(),await(0,it.w)(),(new t).run().then((()=>{})),i()}catch(t){i(t)}}),1)},7046:(t,i,s)=>{s.d(i,{A:()=>a});var h=s(1183),e=s(4583),n=s(9234),r=s(9091),o=s(2595),l=s(7854);class a{static getParameter(t){return new URLSearchParams(window.location.search).get(t)??''}static setParameter(t,i){const s=new URL(window.location.toString());s.searchParams.set(t,i),window.history.pushState(null,'',s.toString())}nd=0;bg=[];Lg=0;Bo=null;state=0;hd=20;Rg=1;Sg=[];sd=0;Mg=0;kg=[];xg=!0;Dg=!1;Ng=50;hasFocus=!0;Cc=!1;sf=Date.now();pf=0;Xl=0;jl=0;Hc=0;Wc=0;Yc=0;yf=[];Pg=[];Fg=0;Ug=0;input=null;Bg=!1;Gg=!1;Hg=!1;time=-1;Wg=0;Yg=0;Vg=0;Kg=0;Xg=0;jg=0;constructor(t=!1){l.zg.tabIndex=-1,l.ol.fillStyle='black',l.ol.fillRect(0,0,l.zg.width,l.zg.height),this.Dg=t,this.Dg?this.resize(window.innerWidth,window.innerHeight):this.resize(l.zg.width,l.zg.height)}get width(){return l.zg.width}get height(){return l.zg.height}resize=(t,i)=>{l.zg.width=t,l.zg.height=i,this.Bo=new h.A(t,i),e.A.Zg()};run=async()=>{l.zg.addEventListener('resize',(()=>{this.Dg&&this.resize(window.innerWidth,window.innerHeight)}),!1),l.zg.onmousedown=this.onmousedown,l.zg.onmouseup=this.onmouseup,l.zg.onmouseenter=this.onmouseenter,l.zg.onmouseleave=this.onmouseleave,l.zg.onmousemove=this.onmousemove,window.onbeforeunload=this.ko,l.zg.onfocus=this.onfocus,l.zg.onblur=this.onblur,this.qg?(l.zg.ontouchstart=this.ontouchstart,l.zg.ontouchend=this.ontouchend,l.zg.ontouchmove=this.ontouchmove):(l.zg.onkeydown=this.onkeydown,l.zg.onkeyup=this.onkeyup),l.zg.oncontextmenu=t=>{t.preventDefault()},window.oncontextmenu=t=>{t.preventDefault()},this.qg&&'low'===a.getParameter('detail')&&(this.Ng=30),await this.Qo(0,'Loading...'),await this.load();for(let t=0;t<10;t++)this.Sg[t]=performance.now();let t,i=0,s=256,h=1,e=0;for(;this.state>=0;){if(this.state>0&&(this.state--,0===this.state))return void this.$g();const r=s,o=h;s=300,h=1,t=performance.now();const l=this.Sg[i];if(0===l?(s=r,h=o):t>l&&(s=2560*this.hd/(t-l)|0),s<25?s=25:s>256&&(s=256,h=this.hd-(t-l)/10|0),this.Sg[i]=t,i=(i+1)%10,h>1)for(let t=0;t<10;t++)0!==this.Sg[t]&&(this.Sg[t]+=h);for(h<this.Rg&&(h=this.Rg),await(0,n.il)(h);e<256;)await this.update(),this.Hc=0,this.Fg=this.Ug,e+=s;e&=255,this.hd>0&&(this.sd=1e3*s/(256*this.hd)|0);const a=performance.now();if(this.xg&&this.refresh(),await this.draw(),this.kg[this.Mg]=(performance.now()-a)/1e3,this.Mg=(this.Mg+1)%this.kg.length,this.Ng<50){const i=1e3/this.Ng-(performance.now()-t);i>0&&await(0,n.il)(i)}}-1===this.state&&this.$g()};$g=()=>{this.state=-2,this.ko()};ll=t=>{this.hd=1e3/t|0};Dy=t=>{this.Ng=Math.max(Math.min(50,0|t),0)};start=()=>{this.state>=0&&(this.state=0)};stop=()=>{this.state>=0&&(this.state=4e3/this.hd|0)};destroy=()=>{this.state=-1};load=async()=>{};update=async()=>{};ko=()=>{};draw=async()=>{};refresh=()=>{};async Qo(t,i){const s=this.width,h=this.height;this.xg&&(l.ol.fillStyle='black',l.ol.fillRect(0,0,s,h),this.xg=!1);const e=h/2-18;l.ol.fillStyle='rgb(140, 17, 17)',l.ol.rect((s/2|0)-152,e,304,34),l.ol.fillRect((s/2|0)-150,e+2,3*t,30),l.ol.fillStyle='black',l.ol.fillRect((s/2|0)-150+3*t,e+2,300-3*t,30),l.ol.font='bold 13px helvetica, sans-serif',l.ol.textAlign='center',l.ol.fillStyle='white',l.ol.fillText(i,s/2|0,e+22),await(0,n.il)(5)}Kc=()=>{let t=-1;return this.Ug!==this.Fg&&(t=this.Pg[this.Fg],this.Fg=this.Fg+1&127),t};get ms(){const t=this.kg.length;let i=0;for(let s=0;s<t;s++)i+=this.kg[s];const s=i/t*1e3;return s>this.nd&&(this.nd=s),this.bg[this.Lg]=s,this.Lg=(this.Lg+1)%250,s}get ed(){return this.bg.reduce(((t,i)=>t+i),0)/250}onkeydown=t=>{const i=t.key;this.sf=Date.now();const s=r.c[i];if(!s||0===t.code.length&&!t.isTrusted)return void console.warn(`Unhandled key: ${i}`);const h=s.code;let e=s.ch;t.ctrlKey&&(e>='A'.charCodeAt(0)&&e<=']'.charCodeAt(0)||e=='_'.charCodeAt(0)?e-='A'.charCodeAt(0)-1:e>='a'.charCodeAt(0)&&e<='z'.charCodeAt(0)&&(e-='a'.charCodeAt(0)-1)),e<30&&(e=0),h===r.c.ArrowLeft.code?e=1:h===r.c.ArrowRight.code?e=2:h===r.c.ArrowUp.code?e=3:h===r.c.ArrowDown.code?e=4:h===r.c.Control.code?e=5:h===r.c.Shift.code?e=6:h===r.c.Alt.code?e=7:h===r.c.Backspace.code||h===r.c.Delete.code?e=8:h===r.c.Tab.code?e=9:h===r.c.Enter.code?e=10:h>=r.c.F1.code&&h<=r.c.F12.code?e=h+1008-r.c.F1.code:h===r.c.Home.code?e=1e3:h===r.c.End.code?e=1001:h===r.c.PageUp.code?e=1002:h===r.c.PageDown.code&&(e=1003),e>0&&e<128&&(this.yf[e]=1),e>4&&(this.Pg[this.Ug]=e,this.Ug=this.Ug+1&127),o.A.enabled&&o.A.Jg(e),r.g.includes(i)||t.preventDefault()};onkeyup=t=>{const i=t.key;this.sf=Date.now();const s=r.c[i];if(!s||0===t.code.length&&!t.isTrusted)return void console.warn(`Unhandled key: ${i}`);const h=s.code;let e=s.ch;e<30&&(e=0),h===r.c.ArrowLeft.code?e=1:h===r.c.ArrowRight.code?e=2:h===r.c.ArrowUp.code?e=3:h===r.c.ArrowDown.code?e=4:h===r.c.Control.code?e=5:h===r.c.Shift.code?e=6:h===r.c.Alt.code?e=7:h===r.c.Backspace.code||h===r.c.Delete.code?e=8:h===r.c.Tab.code?e=9:h===r.c.Enter.code?e=10:h>=r.c.F1.code&&h<=r.c.F12.code?e=h+1008-r.c.F1.code:h===r.c.Home.code?e=1e3:h===r.c.End.code?e=1001:h===r.c.PageUp.code?e=1002:h===r.c.PageDown.code&&(e=1003),e>0&&e<128&&(this.yf[e]=0),o.A.enabled&&o.A.Qg(e),r.g.includes(i)||t.preventDefault()};onmousedown=t=>{if(this.Bg=!1,(t.clientX>0||t.clientY>0)&&this.tE(t),this.sf=Date.now(),this.Wc=this.Xl,this.Yc=this.jl,this.qg&&!this.iE){if(this.sE()||this.hE()||this.eE())return this.Hc=1,void(this.pf=1);t.timeStamp>=this.time+500?(this.Hc=2,this.pf=2):(this.Hc=1,this.pf=1)}else 2===t.button?(this.Hc=2,this.pf=2):(this.Hc=1,this.pf=1);o.A.enabled&&o.A.nE(this.Wc,this.Yc,t.buttons)};onmouseup=t=>{this.tE(t),this.sf=Date.now(),this.pf=0,o.A.enabled&&o.A.rE(t.buttons)};onmouseenter=t=>{this.tE(t),o.A.enabled&&o.A.oE()};onmouseleave=t=>{this.tE(t),this.sf=Date.now(),this.Xl=-1,this.jl=-1,this.pf=0,this.Wc=-1,this.Yc=-1,o.A.enabled&&o.A.lE()};onmousemove=t=>{this.tE(t),this.sf=Date.now(),o.A.enabled&&o.A.aE(this.Xl,this.jl)};onfocus=t=>{this.hasFocus=!0,this.xg=!0,this.refresh(),o.A.enabled&&o.A.cE()};onblur=t=>{this.hasFocus=!1,o.A.enabled&&o.A.fE()};ontouchstart=t=>{if(!this.qg)return;null!==this.input&&(this.input.parentNode?.removeChild(this.input),this.input=null),this.Bg=!0;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.Wg=this.Xg=this.Vg=0|i.screenX,this.Yg=this.jg=this.Kg=0|i.screenY,this.time=t.timeStamp,this.Gg=this.uE(),this.Hg=this.dE()};ontouchend=t=>{if(!this.qg||!this.Bg)return;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;if(this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.Xg=0|i.screenX,this.jg=0|i.screenY,this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowLeft',code:'ArrowLeft'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowUp',code:'ArrowUp'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowRight',code:'ArrowRight'})),this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowDown',code:'ArrowDown'})),this.Gg&&!this.uE())return void(this.Bg=!1);if(this.Hg&&!this.dE())return void(this.Bg=!1);if(this.sE()||this.wE()||this.hE()||this.eE()){null!==this.input&&(this.input.parentNode?.contains(this.input)&&this.input.parentNode?.removeChild(this.input),this.input=null);const t=document.createElement('input');return this.hE()?(t.setAttribute('id','username'),t.setAttribute('placeholder','Username')):this.eE()?(t.setAttribute('id','password'),t.setAttribute('placeholder','Password')):this.sE()?(t.setAttribute('id','chatinput'),t.setAttribute('placeholder','Chatinput')):this.wE()&&(t.setAttribute('id','chatpopup'),t.setAttribute('placeholder','Chatpopup')),this.yE?t.setAttribute('type','password'):t.setAttribute('type',this.eE()?'password':'text'),t.setAttribute('autofocus','autofocus'),t.setAttribute('spellcheck','false'),t.setAttribute('autocomplete','off'),t.setAttribute('style',`position: fixed; left: ${s}px; top: ${h}px; width: 1px; height: 1px; opacity: 0;`),document.body.appendChild(t),t.focus(),t.click(),this.yE&&(t.oninput=t=>{if(!(t instanceof InputEvent))return;const i=t,s=i.data;null!==s&&'insertText'===i.inputType&&this.onkeydown(new KeyboardEvent('keydown',{key:s,code:s}))}),t.onkeydown=t=>{this.yE&&'Enter'!==t.key&&'Backspace'!==t.key||this.onkeydown(new KeyboardEvent('keydown',{key:t.key,code:t.key}))},t.onkeyup=t=>{this.yE&&'Enter'!==t.key&&'Backspace'!==t.key||this.onkeyup(new KeyboardEvent('keyup',{key:t.key,code:t.key}))},t.onfocus=t=>{this.input?.parentNode?.removeChild(this.input),this.input=null,this.onfocus(t)},this.input=t,void(this.Bg=!1)}const e=t.timeStamp>=this.time+500,n=Math.abs(this.Wg-this.Xg)>16||Math.abs(this.Yg-this.jg)>16;e&&!n?(this.Bg=!0,this.onmousedown(new MouseEvent('mousedown',{buttons:2}))):(this.pf=0,this.Bg=!1)};ontouchmove=t=>{if(!this.qg||!this.Bg)return;const i=t.changedTouches[0],s=0|i.clientX,h=0|i.clientY;this.onmousemove(new MouseEvent('mousemove',{clientX:s,clientY:h})),this.Xg=0|i.screenX,this.jg=0|i.screenY,this.Gg&&-1===this.Vo()?(this.Vg-this.Xg>0?this.rotate(2):this.Vg-this.Xg<0&&this.rotate(0),this.Kg-this.jg>0?this.rotate(3):this.Kg-this.jg<0&&this.rotate(1)):(this.Hg||-1!==this.Vo())&&this.onmousedown(new MouseEvent('mousedown',{buttons:1})),this.Vg=this.Xg,this.Kg=this.jg};get qg(){return['Android','webOS','iPhone','iPad','iPod','BlackBerry','Windows Phone'].some((t=>navigator.userAgent.includes(t)))}get yE(){return['Android'].some((t=>navigator.userAgent.includes(t)))}get iE(){return['Capacitor'].some((t=>navigator.userAgent.includes(t)))}uE=()=>this.Cc&&this.Xl>=8&&this.Xl<=520&&this.jl>=11&&this.jl<=345;sE=()=>this.Cc&&-1===this.Yo()&&!this.Ho()&&!this.Wo()&&this.Xl>=11&&this.Xl<=506&&this.jl>=449&&this.jl<=482;wE=()=>this.Cc&&(this.Ho()||this.Wo())&&this.Xl>=11&&this.Xl<=506&&this.jl>=383&&this.jl<=482;dE=()=>this.Cc&&this.Xl>=562&&this.Xl<=752&&this.jl>=231&&this.jl<=492;hE=()=>!this.Cc&&2===this.Go()&&this.Xl>=301&&this.Xl<=562&&this.jl>=262&&this.jl<=279;eE=()=>!this.Cc&&2===this.Go()&&this.Xl>=301&&this.Xl<=562&&this.jl>=279&&this.jl<=296;rotate=t=>{0===t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowRight',code:'ArrowRight'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowLeft',code:'ArrowLeft'}))):1===t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowDown',code:'ArrowDown'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowUp',code:'ArrowUp'}))):2===t?(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowLeft',code:'ArrowLeft'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowRight',code:'ArrowRight'}))):3===t&&(this.onkeyup(new KeyboardEvent('keyup',{key:'ArrowUp',code:'ArrowUp'})),this.onkeydown(new KeyboardEvent('keydown',{key:'ArrowDown',code:'ArrowDown'})))};AE=()=>null!==document.fullscreenElement;tE=t=>{if(this.AE()){const i=t.target.getBoundingClientRect(),s=window.innerHeight/l.zg.height,h=(window.innerWidth-l.zg.width*s)/2;this.Xl=0|this.pE(t.clientX-i.left-h,0,l.zg.width*s,0,789),this.jl=0|this.pE(t.clientY-i.top,0,l.zg.height*s,0,532)}else{const i=l.zg.getBoundingClientRect(),s=l.zg.width/i.width,h=l.zg.height/i.height;this.Xl=(t.clientX-i.left)*s|0,this.jl=(t.clientY-i.top)*h|0}this.Xl<0&&(this.Xl=0),this.jl<0&&(this.jl=0),this.Xl>789&&(this.Xl=789),this.jl>532&&(this.jl=532)};pE=(t,i,s,h,e)=>(t-i)*(e-h)/(s-i)+h}},2595:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1069);class e{static enabled=!1;static mE=null;static IE=null;static gE=0;static EE=0;static _E=0;static CE=0;static TE=0;static $A=()=>{this.mE=h.A.Bt(1),this.IE=null,this.gE=performance.now(),this.enabled=!0};static if=()=>{this.enabled=!1,this.mE=null};static flush=()=>{let t=null;return this.IE&&this.enabled&&(t=this.IE),this.IE=null,t};static stop=()=>{let t=null;return this.mE&&this.mE.qc>0&&this.enabled&&(t=this.mE),this.if(),t};static nE=(t,i,s)=>{if(!(this.enabled&&t>=0&&t<789&&i>=0&&i<532))return;this.EE++;const h=performance.now();let e=(h-this.gE)/10|0;e>250&&(e=250),this.gE=h,this.OE(5),1===s?this.mE?.p1(1):this.mE?.p1(2),this.mE?.p1(e),this.mE?.p3(t+(i<<10))};static rE=t=>{if(!this.enabled)return;this.EE++;const i=performance.now();let s=(i-this.gE)/10|0;s>250&&(s=250),this.gE=i,this.OE(2),1===t?this.mE?.p1(3):this.mE?.p1(4),this.mE?.p1(s)};static aE=(t,i)=>{if(!(this.enabled&&t>=0&&t<789&&i>=0&&i<532))return;const s=performance.now();if(s-this._E>=50){this._E=s,this.EE++;let h=(s-this.gE)/10|0;h>250&&(h=250),this.gE=s,t-this.CE<8&&t-this.CE>=-8&&i-this.TE<8&&i-this.TE>=-8?(this.OE(3),this.mE?.p1(5),this.mE?.p1(h),this.mE?.p1(t+(i-this.TE+8<<4)+8-this.CE)):t-this.CE<128&&t-this.CE>=-128&&i-this.TE<128&&i-this.TE>=-128?(this.OE(4),this.mE?.p1(6),this.mE?.p1(h),this.mE?.p1(t+128-this.CE),this.mE?.p1(i+128-this.TE)):(this.OE(5),this.mE?.p1(7),this.mE?.p1(h),this.mE?.p3(t+(i<<10))),this.CE=t,this.TE=i}};static Jg=t=>{if(!this.enabled)return;this.EE++;const i=performance.now();let s=(i-this.gE)/10|0;s>250&&(s=250),this.gE=i,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.OE(3),this.mE?.p1(8),this.mE?.p1(s),this.mE?.p1(t)};static Qg=t=>{if(!this.enabled)return;this.EE++;const i=performance.now();let s=(i-this.gE)/10|0;s>250&&(s=250),this.gE=i,1e3===t?t=11:1001===t?t=12:1002===t?t=14:1003===t?t=15:t>=1008&&(t-=992),this.OE(3),this.mE?.p1(9),this.mE?.p1(s),this.mE?.p1(t)};static cE=()=>{if(!this.enabled)return;this.EE++;const t=performance.now();let i=(t-this.gE)/10|0;i>250&&(i=250),this.gE=t,this.OE(2),this.mE?.p1(10),this.mE?.p1(i)};static fE=()=>{if(!this.enabled)return;this.EE++;const t=performance.now();let i=(t-this.gE)/10|0;i>250&&(i=250),this.gE=t,this.OE(2),this.mE?.p1(11),this.mE?.p1(i)};static oE=()=>{if(!this.enabled)return;this.EE++;const t=performance.now();let i=(t-this.gE)/10|0;i>250&&(i=250),this.gE=t,this.OE(2),this.mE?.p1(12),this.mE?.p1(i)};static lE=()=>{if(!this.enabled)return;this.EE++;const t=performance.now();let i=(t-this.gE)/10|0;i>250&&(i=250),this.gE=t,this.OE(2),this.mE?.p1(13),this.mE?.p1(i)};static OE=t=>{if(this.mE&&this.mE.qc+t>=500){const t=this.mE;this.mE=h.A.Bt(1),this.IE=t}}}},9091:(t,i,s)=>{s.d(i,{c:()=>e,g:()=>h});const h=['F11','F12'],e={'Backspace':{code:8,ch:8},'Enter':{code:10,ch:10},'Shift':{code:16,ch:65535},'Escape':{code:27,ch:27},'Tab':{code:9,ch:9},'CapsLock':{code:20,ch:65535},' ':{code:32,ch:32},'Control':{code:17,ch:65535},'Alt':{code:18,ch:65535},'Meta':{code:524,ch:65535},'ArrowLeft':{code:37,ch:65535},'ArrowRight':{code:39,ch:65535},'ArrowUp':{code:38,ch:65535},'ArrowDown':{code:40,ch:65535},'Insert':{code:155,ch:65535},'Home':{code:36,ch:65535},'PageUp':{code:33,ch:65535},'Delete':{code:127,ch:127},'End':{code:35,ch:65535},'PageDown':{code:34,ch:65535},'`':{code:192,ch:96},'~':{code:192,ch:126},'!':{code:49,ch:33},'@':{code:50,ch:64},'#':{code:51,ch:35},'$':{code:52,ch:36},'%':{code:53,ch:37},'^':{code:54,ch:94},'&':{code:55,ch:38},'*':{code:56,ch:42},'(':{code:57,ch:40},')':{code:48,ch:41},'-':{code:45,ch:45},'_':{code:45,ch:95},'=':{code:61,ch:61},'+':{code:61,ch:43},'[':{code:91,ch:91},'{':{code:91,ch:123},']':{code:93,ch:93},'}':{code:93,ch:125},'\\':{code:92,ch:92},'|':{code:92,ch:124},';':{code:59,ch:59},':':{code:59,ch:58},"'":{code:222,ch:39},'"':{code:222,ch:34},',':{code:44,ch:44},'<':{code:44,ch:60},'.':{code:46,ch:46},'>':{code:46,ch:62},'/':{code:47,ch:47},'?':{code:47,ch:63},'F1':{code:112,ch:65535},'F2':{code:113,ch:65535},'F3':{code:114,ch:65535},'F4':{code:115,ch:65535},'F5':{code:116,ch:65535},'F6':{code:117,ch:65535},'F7':{code:118,ch:65535},'F8':{code:119,ch:65535},'F9':{code:120,ch:65535},'F10':{code:121,ch:65535},'F11':{code:122,ch:65535},'F12':{code:123,ch:65535},0:{code:48,ch:48},1:{code:49,ch:49},2:{code:50,ch:50},3:{code:51,ch:51},4:{code:52,ch:52},5:{code:53,ch:53},6:{code:54,ch:54},7:{code:55,ch:55},8:{code:56,ch:56},9:{code:57,ch:57},'a':{code:65,ch:97},'b':{code:66,ch:98},'c':{code:67,ch:99},'d':{code:68,ch:100},'e':{code:69,ch:101},'f':{code:70,ch:102},'g':{code:71,ch:103},'h':{code:72,ch:104},'i':{code:73,ch:105},'j':{code:74,ch:106},'k':{code:75,ch:107},'l':{code:76,ch:108},'m':{code:77,ch:109},'n':{code:78,ch:110},'o':{code:79,ch:111},'p':{code:80,ch:112},'q':{code:81,ch:113},'r':{code:82,ch:114},'s':{code:83,ch:115},'t':{code:84,ch:116},'u':{code:85,ch:117},'v':{code:86,ch:118},'w':{code:87,ch:119},'x':{code:88,ch:120},'y':{code:89,ch:121},'z':{code:90,ch:122},'A':{code:65,ch:65},'B':{code:66,ch:66},'C':{code:67,ch:67},'D':{code:68,ch:68},'E':{code:69,ch:69},'F':{code:70,ch:70},'G':{code:71,ch:71},'H':{code:72,ch:72},'I':{code:73,ch:73},'J':{code:74,ch:74},'K':{code:75,ch:75},'L':{code:76,ch:76},'M':{code:77,ch:77},'N':{code:78,ch:78},'O':{code:79,ch:79},'P':{code:80,ch:80},'Q':{code:81,ch:81},'R':{code:82,ch:82},'S':{code:83,ch:83},'T':{code:84,ch:84},'U':{code:85,ch:85},'V':{code:86,ch:86},'W':{code:87,ch:87},'X':{code:88,ch:88},'Y':{code:89,ch:89},'Z':{code:90,ch:90}}},1120:(t,i,s)=>{s.d(i,{A:()=>c});var h=s(1069),e=s(8665),n=s(2679),r=s(2511),o=s(3819),l=s(3867),a=s(8950);class c{static Fo=[];static vE=null;static Uo=null;static Pl=0;static bE=1;static Ul=2;static ia=3;static ha=4;static wa=5;static pa=6;static Oa=7;static gm=1;static Cm=2;static Tm=3;static Om=4;static vm=5;static la=6;static La=1;static Ra=100;static Sa=101;static Ma=200;static ey=201;static ny=202;static ka=203;static oy=205;static wy=300;static LE=301;static RE=302;static SE=303;static ME=304;static kE=305;static xE=306;static DE=307;static NE=308;static PE=309;static FE=310;static UE=311;static BE=312;static yy=313;static Ay=314;static GE=315;static HE=316;static WE=317;static YE=318;static VE=319;static KE=320;static XE=321;static jE=322;static py=323;static ja=324;static za=325;static my=326;static Ua=327;static xa=401;static Da=500;static ly=501;static uy=502;static Fa=503;static Za=600;static gy=601;static zE=602;static ZE=603;static qE=604;static $E=605;static JE=606;static QE=607;static t_=608;static i_=609;static s_=610;static h_=611;static Ey=612;static qa=613;static $a=650;static tc=651;static ic=652;static sc=653;static hc=654;static Ja=655;static mc=(t,i,s)=>{this.vE=new n.A(5e4),this.Uo=new n.A(5e4);const e=new h.A(t.read('data'));let r=-1;for(e.qc+=2;e.qc<e.length;){let t=e.aA;65535===t&&(r=e.aA,t=e.aA);const h=this.Fo[t]=new c;h.id=t,h.zd=r,h.type=e.fA,h.oa=e.fA,h.Dl=e.aA,h.width=e.aA,h.height=e.aA,h.wm=e.fA,0===h.wm?h.wm=-1:h.wm=(h.wm-1<<8)+e.fA;const n=e.fA;if(n>0){h.cl=new Uint8Array(n),h.ul=new Uint16Array(n);for(let t=0;t<n;t++)h.cl[t]=e.fA,h.ul[t]=e.aA}const o=e.fA;if(o>0){h.scripts=new l.As(o,null);for(let t=0;t<o;t++){const i=e.aA,s=new Uint16Array(i);h.scripts[t]=s;for(let t=0;t<i;t++)s[t]=e.aA}}if(h.type===c.Pl){h.scroll=e.aA,h.hide=1===e.fA;const t=e.fA;h.El=new Array(t),h.Sl=new Array(t),h.Ml=new Array(t);for(let i=0;i<t;i++)h.El[i]=e.aA,h.Sl[i]=e.wp,h.Ml[i]=e.wp}if(h.type===c.bE&&(e.qc+=3),h.type===c.Ul){h.Hl=new Int32Array(h.width*h.height),h.Wl=new Int32Array(h.width*h.height),h.draggable=1===e.fA,h.ym=1===e.fA,h.pm=1===e.fA,h.Yl=e.fA,h.Vl=e.fA,h.Bl=new Int16Array(20),h.Gl=new Int16Array(20),h.ta=new l.As(20,null);for(let t=0;t<20;t++)if(1===e.fA){h.Bl[t]=e.wp,h.Gl[t]=e.wp;const s=e.vA;if(s.length>0){const e=s.lastIndexOf(',');h.ta[t]=this.e_(i,s.substring(0,e),parseInt(s.substring(e+1),10))}}h.Im=new l.As(5,null);for(let t=0;t<5;t++){const i=e.vA;h.Im[t]=i,0===i.length&&(h.Im[t]=null)}}if(h.type===c.ia&&(h.fill=1===e.fA),h.type===c.ha||h.type===c.bE){h.ca=1===e.fA;const t=e.fA;s&&(h.font=s[t]),h.ua=1===e.fA}if(h.type===c.ha&&(h.text=e.vA,h.ra=e.vA),h.type!==c.bE&&h.type!==c.ia&&h.type!==c.ha||(h.sa=e.el),h.type!==c.ia&&h.type!==c.ha||(h.na=e.el,h.ea=e.el),h.type===c.wa){const t=e.vA;if(t.length>0){const s=t.lastIndexOf(',');h.Aa=this.e_(i,t.substring(0,s),parseInt(t.substring(s+1),10))}const s=e.vA;if(s.length>0){const t=s.lastIndexOf(',');h.ya=this.e_(i,s.substring(0,t),parseInt(s.substring(t+1),10))}}if(h.type===c.pa){const t=e.fA;0!==t&&(h.model=this.Ea((t-1<<8)+e.fA));const i=e.fA;0!==i&&(h.n_=this.Ea((i-1<<8)+e.fA)),h._l=e.fA,0===h._l?h._l=-1:h._l=(h._l-1<<8)+e.fA,h.Cl=e.fA,0===h.Cl?h.Cl=-1:h.Cl=(h.Cl-1<<8)+e.fA,h.zoom=e.aA,h.ga=e.aA,h.Ta=e.aA}if(h.type===c.Oa){h.Hl=new Int32Array(h.width*h.height),h.Wl=new Int32Array(h.width*h.height),h.ca=1===e.fA;const t=e.fA;s&&(h.font=s[t]),h.ua=1===e.fA,h.sa=e.el,h.Yl=e.wp,h.Vl=e.wp,h.ym=1===e.fA,h.Im=new l.As(5,null);for(let t=0;t<5;t++){const i=e.vA;h.Im[t]=i,0===i.length&&(h.Im[t]=null)}}h.oa!==c.Cm&&h.type!==c.Ul||(h.Dw=e.vA,h.action=e.vA,h.xw=e.aA),h.oa!==c.gm&&h.oa!==c.Om&&h.oa!==c.vm&&h.oa!==c.la||(h._m=e.vA,0===h._m.length&&(h.oa===c.gm?h._m='Ok':h.oa===c.Om||h.oa===c.vm?h._m='Select':h.oa===c.la&&(h._m='Continue')))}this.vE=null,this.Uo=null};static e_=(t,i,s)=>{const h=o.A.r_(i)<<8n|BigInt(s);if(this.vE){const t=this.vE.get(h);if(t)return t}let e;try{e=r.A.rc(t,i,s),this.vE?.put(h,e)}catch(t){return null}return e};static Ea=t=>{if(this.Uo){const i=this.Uo.get(BigInt(t));if(i)return i}const i=e.A.model(t);return this.Uo?.put(BigInt(t),i),i};id=-1;zd=-1;type=-1;oa=-1;Dl=0;width=0;height=0;wm=-1;cl=null;ul=null;scripts=null;scroll=0;hide=!1;draggable=!1;ym=!1;pm=!1;Yl=0;Vl=0;Bl=null;Gl=null;ta=null;Im=null;fill=!1;ca=!1;font=null;ua=!1;text=null;ra=null;sa=0;na=0;ea=0;Aa=null;ya=null;model=null;n_=null;_l=-1;Cl=-1;zoom=0;ga=0;Ta=0;Dw=null;action=null;xw=-1;_m=null;El=null;Sl=null;Ml=null;x=0;y=0;Fl=0;Hl=null;Wl=null;Ol=0;Tl=0;Ea(t,i,s){let h=this.model;if(s&&(h=this.n_),!h)return null;if(-1===t&&-1===i&&!h.o_)return h;const n=e.A.l_(h,!0,!0,!1);return-1===t&&-1===i||n.Va(),-1!==t&&n.Ka(t),-1!==i&&n.Ka(i),n.Xa(64,768,-50,-10,-50,!0),n}a_(){if(this.zd===this.id)return this.x;let t=c.Fo[this.zd];if(!t.El||!t.Sl||!t.Ml)return this.x;let i=t.El.indexOf(this.id);if(-1===i)return this.x;let s=t.Sl[i];for(;t.zd!==t.id;){const h=c.Fo[t.zd];h.El&&h.Sl&&h.Ml&&(i=h.El.indexOf(t.id),-1!==i&&(s+=h.Sl[i])),t=h}return s}c_(){if(this.zd===this.id)return this.y;let t=c.Fo[this.zd];if(!t.El||!t.Sl||!t.Ml)return this.y;let i=t.El.indexOf(this.id);if(-1===i)return this.y;let s=t.Ml[i];for(;t.zd!==t.id;){const h=c.Fo[t.zd];h.El&&h.Sl&&h.Ml&&(i=h.El.indexOf(t.id),-1!==i&&(s+=h.Ml[i])),t=h}return s}outline(t){const i=this.a_(),s=this.c_();a.A.kl(i,s,this.width,this.height,t)}move(t,i){if(this.zd===this.id)return;this.x=0,this.y=0;const s=c.Fo[this.zd];if(s.El&&s.Sl&&s.Ml){const h=s.El.indexOf(this.id);-1!==h&&(s.Sl[h]=t,s.Ml[h]=i)}}delete(){if(this.zd===this.id)return;const t=c.Fo[this.zd];if(t.El&&t.Sl&&t.Ml){const i=t.El.indexOf(this.id);-1!==i&&(t.El.splice(i,1),t.Sl.splice(i,1),t.Ml.splice(i,1))}}}},6333:(t,i,s)=>{s.d(i,{$:()=>h});class h{id;f_=null;constructor(t){this.id=t}u_(t){for(;;){const i=t.fA;if(0===i)break;this.decode(i,t)}return this}}},2164:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1069),e=s(6333);class n extends e.${static count=0;static Fo=[];static mc=t=>{const i=new h.A(t.read('flo.dat'));this.count=i.aA;for(let t=0;t<this.count;t++)this.Fo[t]=new n(t).u_(i)};static d_=(t,i,s)=>(s>179&&(i=i/2|0),s>192&&(i=i/2|0),s>217&&(i=i/2|0),s>243&&(i=i/2|0),(t/4<<10)+(i/32<<7)+(s/2|0));static w_=(t,i)=>-1===t?12345678:((i=i*(127&t)/128|0)<2?i=2:i>126&&(i=126),(65408&t)+i);static y_=(t,i)=>-2===t?12345678:-1===t?(i<0?i=0:i>127&&(i=127),127-i):((i=i*(127&t)/128|0)<2?i=2:i>126&&(i=126),(65408&t)+i);A_=0;texture=-1;p_=!1;m_=!0;I_=0;g_=0;E_=0;__=0;C_=0;T_=0;decode(t,i){1===t?(this.A_=i.O_,this.setColor(this.A_)):2===t?this.texture=i.fA:3===t?this.p_=!0:5===t?this.m_=!1:6===t?this.f_=i.vA:console.log('Error unrecognised config code: ',t)}setColor(t){const i=(t>>16&255)/256,s=(t>>8&255)/256,h=(255&t)/256;let e=i;s<i&&(e=s),h<e&&(e=h);let r=i;s>i&&(r=s),h>r&&(r=h);let o=0,l=0;const a=(e+r)/2;e!==r&&(a<.5&&(l=(r-e)/(r+e)),a>=.5&&(l=(r-e)/(2-r-e)),i===r?o=(s-h)/(r-e):s===r?o=(h-i)/(r-e)+2:h===r&&(o=(i-s)/(r-e)+4)),o/=6,this.I_=256*o|0,this.g_=256*l|0,this.E_=256*a|0,this.g_<0?this.g_=0:this.g_>255&&(this.g_=255),this.E_<0?this.E_=0:this.E_>255&&(this.E_=255),this.__=a>.5?(1-a)*l*512|0:a*l*512|0,this.__<1&&(this.__=1),this.C_=o*this.__|0;let c=this.I_+(16*Math.random()|0)-8;c<0?c=0:c>255&&(c=255);let f=this.g_+(48*Math.random()|0)-24;f<0?f=0:f>255&&(f=255);let u=this.E_+(48*Math.random()|0)-24;u<0?u=0:u>255&&(u=255),this.T_=n.d_(c,f,u)}}},8317:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(1069),e=s(6333),n=s(8665),r=s(3867);class o extends e.${static count=0;static Fo=[];static mc=t=>{const i=new h.A(t.read('idk.dat'));this.count=i.aA;for(let t=0;t<this.count;t++)this.Fo[t]=new o(t).u_(i)};type=-1;v_=null;b_=new Int32Array(5).fill(-1);L_=new Int32Array(6);R_=new Int32Array(6);disable=!1;decode(t,i){if(1===t)this.type=i.fA;else if(2===t){const t=i.fA;this.v_=new Int32Array(t);for(let s=0;s<t;s++)this.v_[s]=i.aA}else 3===t?this.disable=!0:t>=40&&t<50?this.L_[t-40]=i.aA:t>=50&&t<60?this.R_[t-50]=i.aA:t>=60&&t<70?this.b_[t-60]=i.aA:console.log('Error unrecognised config code: ',t)}Ea(){if(!this.v_)return null;const t=new r.As(this.v_.length,null);for(let i=0;i<this.v_.length;i++)t[i]=n.A.model(this.v_[i]);let i;i=1===t.length?t[0]:n.A.Ba(t,t.length);for(let t=0;t<6&&0!==this.L_[t];t++)i?.Ga(this.L_[t],this.R_[t]);return i}CA(){let t=0;const i=new r.As(5,null);for(let s=0;s<5;s++)-1!==this.b_[s]&&(i[t++]=n.A.model(this.b_[s]));const s=n.A.Ba(i,t);for(let t=0;t<6&&0!==this.L_[t];t++)s.Ga(this.L_[t],this.R_[t]);return s}}},5637:(t,i,s)=>{s.d(i,{A:()=>c});var h=s(6333),e=s(1069),n=s(2679),r=s(8665),o=s(1023),l=s(6169),a=s(3867);class c extends h.${static count=0;static cache=null;static S_=null;static M_=null;static k_=0;static du=new n.A(500);static wu=new n.A(30);static mc=t=>{this.S_=new e.A(t.read('loc.dat'));const i=new e.A(t.read('loc.idx'));this.count=i.aA,this.M_=new Int32Array(this.count);let s=2;for(let t=0;t<this.count;t++)this.M_[t]=s,s+=i.aA;this.cache=new a.As(10,null);for(let t=0;t<10;t++)this.cache[t]=new c(-1)};static get=t=>{if(!this.cache||!this.M_||!this.S_)throw new Error('LocType not loaded!!!');for(let i=0;i<10;i++){const s=this.cache[i];if(s&&s.id===t)return s}this.k_=(this.k_+1)%10;const i=this.cache[this.k_];return this.S_.qc=this.M_[t],i.id=t,i.reset(),i.u_(this.S_),i.x_||(i.x_=new Int32Array(1)),-1===i.D_&&i.x_&&(i.active=i.x_.length>0&&i.x_[0]===o.A.Ty.id,i.Rm&&(i.active=!0)),i};static ko=()=>{this.du=null,this.wu=null,this.M_=null,this.cache=null,this.S_=null};v_=null;x_=null;name=null;yw=null;L_=null;R_=null;width=1;length=1;Qy=!0;tA=!0;active=!1;D_=-1;N_=!1;P_=!1;m_=!1;_l=-1;F_=!1;U_=16;B_=0;G_=0;Rm=null;Rd=-1;Pd=-1;H_=!1;W_=!0;Y_=128;V_=128;K_=128;by=0;X_=0;j_=0;z_=0;Z_=!1;decode(t,i){if(1===t){const t=i.fA;this.v_=new Int32Array(t),this.x_=new Int32Array(t);for(let s=0;s<t;s++)this.v_[s]=i.aA,this.x_[s]=i.fA}else if(2===t)this.name=i.vA;else if(3===t)this.yw=i.vA;else if(14===t)this.width=i.fA;else if(15===t)this.length=i.fA;else if(17===t)this.Qy=!1;else if(18===t)this.tA=!1;else if(19===t)this.D_=i.fA,1===this.D_&&(this.active=!0);else if(21===t)this.N_=!0;else if(22===t)this.P_=!0;else if(23===t)this.m_=!0;else if(24===t)this._l=i.aA,65535===this._l&&(this._l=-1);else if(25===t)this.F_=!0;else if(28===t)this.U_=i.fA;else if(29===t)this.B_=i.dA;else if(39===t)this.G_=i.dA;else if(t>=30&&t<39)this.Rm||(this.Rm=new a.As(5,null)),this.Rm[t-30]=i.vA,'hidden'===this.Rm[t-30]?.toLowerCase()&&(this.Rm[t-30]=null);else if(40===t){const t=i.fA;this.L_=new Uint16Array(t),this.R_=new Uint16Array(t);for(let s=0;s<t;s++)this.L_[s]=i.aA,this.R_[s]=i.aA}else 60===t?this.Rd=i.aA:62===t?this.H_=!0:64===t?this.W_=!1:65===t?this.Y_=i.aA:66===t?this.V_=i.aA:67===t?this.K_=i.aA:68===t?this.Pd=i.aA:69===t?this.by=i.fA:70===t?this.X_=i.wp:71===t?this.j_=i.wp:72===t?this.z_=i.wp:73===t&&(this.Z_=!0)}Ea(t,i,s,h,e,n,o){if(!this.x_)return null;let a=-1;for(let i=0;i<this.x_.length;i++)if(this.x_[i]===t){a=i;break}if(-1===a)return null;const f=BigInt(BigInt(this.id)<<6n)+BigInt(BigInt(a)<<3n)+BigInt(i)+BigInt(BigInt(o)+1n<<32n);let u=c.wu?.get(f);if(u){if((this.N_||this.P_)&&(u=r.A.q_(u,this.N_,this.P_)),this.N_){const t=(s+h+e+n)/4|0;for(let i=0;i<u.J_;i++){const r=u.Q_[i],o=s+((h-s)*(r+64)/128|0),l=o+((n+((e-n)*(r+64)/128|0)-o)*(u.tC[i]+64)/128|0);u.iC[i]+=l-t}u.sC()}return u}if(!this.v_)return null;if(a>=this.v_.length)return null;let d=this.v_[a];if(-1===d)return null;const w=this.H_!==i>3;w&&(d+=65536);let y=c.du?.get(BigInt(d));y||(y=r.A.model(65535&d),w&&y.hC(),c.du?.put(BigInt(d),y));const A=128!==this.Y_||128!==this.V_||128!==this.K_,p=0!==this.X_||0!==this.j_||0!==this.z_;let m=r.A.l_(y,!this.L_,!this.F_,i===l.A.Bd&&-1===o&&!A&&!p);for(-1!==o&&(m.Va(),m.Ka(o),m.eC=null,m.nC=null);i-- >0;)m.rC();if(this.L_&&this.R_)for(let t=0;t<this.L_.length;t++)m.Ga(this.L_[t],this.R_[t]);if(A&&m.scale(this.Y_,this.V_,this.K_),p&&m.translate(this.j_,this.X_,this.z_),m.Xa(64+(255&this.B_),5*(255&this.G_)+768,-50,-10,-50,!this.P_),this.Qy&&(m.oC=m.lC),c.wu?.put(f,m),(this.N_||this.P_)&&(m=r.A.q_(m,this.N_,this.P_)),this.N_){const t=(s+h+e+n)/4|0;for(let i=0;i<m.J_;i++){const r=m.Q_[i],o=s+((h-s)*(r+64)/128|0),l=o+((n+((e-n)*(r+64)/128|0)-o)*(m.tC[i]+64)/128|0);m.iC[i]+=l-t}m.sC()}return m}reset(){this.v_=null,this.x_=null,this.name=null,this.yw=null,this.L_=null,this.R_=null,this.width=1,this.length=1,this.Qy=!0,this.tA=!0,this.active=!1,this.D_=-1,this.N_=!1,this.P_=!1,this.m_=!1,this._l=-1,this.U_=16,this.B_=0,this.G_=0,this.Rm=null,this.F_=!1,this.Rd=-1,this.Pd=-1,this.H_=!1,this.W_=!0,this.Y_=128,this.V_=128,this.K_=128,this.by=0,this.X_=0,this.j_=0,this.z_=0,this.Z_=!1}}},6948:(t,i,s)=>{s.d(i,{A:()=>l});var h=s(6333),e=s(1069),n=s(2679),r=s(8665),o=s(3867);class l extends h.${static count=0;static cache=null;static S_=null;static M_=null;static k_=0;static Uo=new n.A(30);static mc=t=>{this.S_=new e.A(t.read('npc.dat'));const i=new e.A(t.read('npc.idx'));this.count=i.aA,this.M_=new Int32Array(this.count);let s=2;for(let t=0;t<this.count;t++)this.M_[t]=s,s+=i.aA;this.cache=new o.As(20,null);for(let t=0;t<20;t++)this.cache[t]=new l(-1)};static get=t=>{if(!this.cache||!this.M_||!this.S_)throw new Error('NpcType not loaded!!!');for(let i=0;i<20;i++){const s=this.cache[i];if(s&&s.id===t)return s}this.k_=(this.k_+1)%20;const i=this.cache[this.k_]=new l(t);return this.S_.qc=this.M_[t],i.u_(this.S_),i};static ko=()=>{this.Uo=null,this.M_=null,this.cache=null,this.S_=null};name=null;yw=null;size=1;v_=null;b_=null;F_=!1;RI=-1;_I=-1;TI=-1;vI=-1;LI=-1;L_=null;R_=null;Rm=null;Y_=-1;V_=-1;K_=-1;Ed=!0;Dm=-1;aC=128;cC=128;decode(t,i){if(1===t){const t=i.fA;this.v_=new Uint16Array(t);for(let s=0;s<t;s++)this.v_[s]=i.aA}else if(2===t)this.name=i.vA;else if(3===t)this.yw=i.vA;else if(12===t)this.size=i.dA;else if(13===t)this.RI=i.aA;else if(14===t)this._I=i.aA;else if(16===t)this.F_=!0;else if(17===t)this._I=i.aA,this.TI=i.aA,this.vI=i.aA,this.LI=i.aA;else if(t>=30&&t<40)this.Rm||(this.Rm=new o.As(5,null)),this.Rm[t-30]=i.vA,'hidden'===this.Rm[t-30]?.toLowerCase()&&(this.Rm[t-30]=null);else if(40===t){const t=i.fA;this.L_=new Uint16Array(t),this.R_=new Uint16Array(t);for(let s=0;s<t;s++)this.L_[s]=i.aA,this.R_[s]=i.aA}else if(60===t){const t=i.fA;this.b_=new Uint16Array(t);for(let s=0;s<t;s++)this.b_[s]=i.aA}else 90===t?this.Y_=i.aA:91===t?this.V_=i.aA:92===t?this.K_=i.aA:93===t?this.Ed=!1:95===t?this.Dm=i.aA:97===t?this.aC=i.aA:98===t&&(this.cC=i.aA)}fC(t,i,s){let h=null,e=null;if(l.Uo&&(e=l.Uo.get(BigInt(this.id)),!e&&this.v_)){const t=new o.As(this.v_.length,null);for(let i=0;i<this.v_.length;i++)t[i]=r.A.model(this.v_[i]);if(e=1===t.length?t[0]:r.A.Ba(t,t.length),this.L_&&this.R_)for(let t=0;t<this.L_.length;t++)e?.Ga(this.L_[t],this.R_[t]);e?.Va(),e?.Xa(64,850,-30,-50,-30,!0),e&&l.Uo.put(BigInt(this.id),e)}return e?(h=r.A.uC(e,!this.F_),-1!==t&&-1!==i?h.dC(t,i,s):-1!==t&&h.Ka(t),128===this.aC&&128===this.cC||h.scale(this.aC,this.cC,this.aC),h.wC(),h.eC=null,h.nC=null,1===this.size&&(h.yC=!0),h):null}CA(){if(!this.b_)return null;const t=new o.As(this.b_.length,null);for(let i=0;i<this.b_.length;i++)t[i]=r.A.model(this.b_[i]);let i;if(i=1===t.length?t[0]:r.A.Ba(t,t.length),this.L_&&this.R_)for(let t=0;t<this.L_.length;t++)i?.Ga(this.L_[t],this.R_[t]);return i}}},1302:(t,i,s)=>{s.d(i,{A:()=>u});var h=s(6333),e=s(1069),n=s(2511),r=s(2679),o=s(8665),l=s(4583),a=s(8950),c=s(9298),f=s(3867);class u extends h.${static count=0;static cache=null;static S_=null;static M_=null;static k_=0;static AC=!0;static Uo=new r.A(50);static yu=new r.A(200);static mc=(t,i)=>{this.AC=i,this.S_=new e.A(t.read('obj.dat'));const s=new e.A(t.read('obj.idx'));this.count=s.aA,this.M_=new Int32Array(this.count);let h=2;for(let t=0;t<this.count;t++)this.M_[t]=h,h+=s.aA;this.cache=new f.As(10,null);for(let t=0;t<10;t++)this.cache[t]=new u(-1)};static get=t=>{if(!this.cache||!this.M_||!this.S_)throw new Error('ObjType not loaded!!!');for(let i=0;i<10;i++){const s=this.cache[i];if(s&&s.id===t)return s}this.k_=(this.k_+1)%10;const i=this.cache[this.k_];return this.S_.qc=this.M_[t],i.id=t,i.reset(),i.u_(this.S_),-1!==i.pC&&i.mC(),!this.AC&&i.members&&(i.name='Members Object',i.yw="Login to a members' server to use this object.",i.Rm=null,i.Am=null),i};static ko=()=>{this.Uo=null,this.yu=null,this.M_=null,this.cache=null,this.S_=null};static Kl=(t,i)=>{if(u.yu){let s=u.yu.get(BigInt(t));if(s&&s.Td!==i&&-1!==s.Td&&(s.EA(),s=null),s)return s}let s=u.get(t);if(s.IC||(i=-1),s.IC&&s.gC&&i>1){let t=-1;for(let h=0;h<10;h++)i>=s.gC[h]&&0!==s.gC[h]&&(t=s.IC[h]);-1!==t&&(s=u.get(t))}const h=new n.A(32,32),e=l.A.ma,r=l.A.Ia,o=l.A.Ec,f=a.A.Ic,d=a.A.EC,w=a.A._C,y=a.A.left,A=a.A.right,p=a.A.top,m=a.A.bottom;l.A.CC=!1,a.A.bind(h.Ic,32,32),a.A.fillRect(0,0,32,32,c.A.Jl),l.A.Zg();const I=s.Ky(1),g=l.A.sin[s.Sp]*s.kp>>16,E=l.A.cos[s.Sp]*s.kp>>16;I.Ca(0,s.Mp,s.TC,s.Sp,s.OC,g+(I.lC/2|0)+s.vC,E+s.vC);for(let t=31;t>=0;t--)for(let i=31;i>=0;i--)0===h.Ic[t+32*i]&&(t>0&&h.Ic[t+32*i-1]>1||i>0&&h.Ic[t+32*(i-1)]>1||t<31&&h.Ic[t+32*i+1]>1||i<31&&h.Ic[t+32*(i+1)]>1)&&(h.Ic[t+32*i]=1);for(let t=31;t>=0;t--)for(let i=31;i>=0;i--)0===h.Ic[t+32*i]&&t>0&&i>0&&h.Ic[t+32*(i-1)-1]>0&&(h.Ic[t+32*i]=3153952);if(-1!==s.pC){const t=this.Kl(s.bC,10),i=t.Zl,h=t.Td;t.Zl=32,t.Td=32,t.LC(5,5,22,22),t.Zl=i,t.Td=h}return u.yu?.put(BigInt(t),h),a.A.bind(f,d,w),a.A.Rl(y,p,A,m),l.A.ma=e,l.A.Ia=r,l.A.Ec=o,l.A.CC=!0,s.va?h.Zl=33:h.Zl=32,h.Td=i,h};model=0;name=null;yw=null;L_=null;R_=null;kp=2e3;Sp=0;Mp=0;TC=0;OC=0;vC=0;RC=!1;SC=-1;va=!1;Yy=1;members=!1;Rm=null;Am=null;MC=-1;kC=-1;xC=0;DC=-1;NC=-1;PC=0;FC=-1;UC=-1;BC=-1;GC=-1;HC=-1;WC=-1;IC=null;gC=null;bC=-1;pC=-1;decode(t,i){if(1===t)this.model=i.aA;else if(2===t)this.name=i.vA;else if(3===t)this.yw=i.vA;else if(4===t)this.kp=i.aA;else if(5===t)this.Sp=i.aA;else if(6===t)this.Mp=i.aA;else if(7===t)this.OC=i.wp,this.OC>32767&&(this.OC-=65536);else if(8===t)this.vC=i.wp,this.vC>32767&&(this.vC-=65536);else if(9===t)this.RC=!0;else if(10===t)this.SC=i.aA;else if(11===t)this.va=!0;else if(12===t)this.Yy=i.el;else if(16===t)this.members=!0;else if(23===t)this.MC=i.aA,this.xC=i.dA;else if(24===t)this.kC=i.aA;else if(25===t)this.DC=i.aA,this.PC=i.dA;else if(26===t)this.NC=i.aA;else if(t>=30&&t<35)this.Rm||(this.Rm=new f.As(5,null)),this.Rm[t-30]=i.vA,'hidden'===this.Rm[t-30]?.toLowerCase()&&(this.Rm[t-30]=null);else if(t>=35&&t<40)this.Am||(this.Am=new f.As(5,null)),this.Am[t-35]=i.vA;else if(40===t){const t=i.fA;this.L_=new Uint16Array(t),this.R_=new Uint16Array(t);for(let s=0;s<t;s++)this.L_[s]=i.aA,this.R_[s]=i.aA}else 78===t?this.FC=i.aA:79===t?this.UC=i.aA:90===t?this.BC=i.aA:91===t?this.HC=i.aA:92===t?this.GC=i.aA:93===t?this.WC=i.aA:95===t?this.TC=i.aA:97===t?this.bC=i.aA:98===t?this.pC=i.aA:t>=100&&t<110&&(this.IC&&this.gC||(this.IC=new Uint16Array(10),this.gC=new Uint16Array(10)),this.IC[t-100]=i.aA,this.gC[t-100]=i.aA)}YC(t){let i=this.MC;if(1===t&&(i=this.DC),-1===i)return null;let s=this.kC,h=this.FC;1===t&&(s=this.NC,h=this.UC);let e=o.A.model(i);if(-1!==s){const t=o.A.model(s);if(-1===h){const i=[e,t];e=o.A.Ba(i,2)}else{const i=[e,t,o.A.model(h)];e=o.A.Ba(i,3)}}if(0===t&&0!==this.xC&&e.translate(this.xC,0,0),1===t&&0!==this.PC&&e.translate(this.PC,0,0),this.L_&&this.R_)for(let t=0;t<this.L_.length;t++)e.Ga(this.L_[t],this.R_[t]);return e}CA(t){let i=this.BC;if(1===t&&(i=this.HC),-1===i)return null;let s=this.GC;1===t&&(s=this.WC);let h=o.A.model(i);if(-1!==s){const t=[h,o.A.model(s)];h=o.A.Ba(t,2)}if(this.L_&&this.R_)for(let t=0;t<this.L_.length;t++)h.Ga(this.L_[t],this.R_[t]);return h}Ky(t){if(this.IC&&this.gC&&t>1){let i=-1;for(let s=0;s<10;s++)t>=this.gC[s]&&0!==this.gC[s]&&(i=this.IC[s]);if(-1!==i)return u.get(i).Ky(1)}if(u.Uo){const t=u.Uo.get(BigInt(this.id));if(t)return t}const i=o.A.model(this.model);if(this.L_&&this.R_)for(let t=0;t<this.L_.length;t++)i.Ga(this.L_[t],this.R_[t]);return i.Xa(64,768,-50,-10,-50,!0),i.yC=!0,u.Uo?.put(BigInt(this.id),i),i}mC(){const t=u.get(this.pC);this.model=t.model,this.kp=t.kp,this.Sp=t.Sp,this.Mp=t.Mp,this.TC=t.TC,this.OC=t.OC,this.vC=t.vC,this.L_=t.L_,this.R_=t.R_;const i=u.get(this.bC);this.name=i.name,this.members=i.members,this.Yy=i.Yy;let s='a';const h=(i.name||'').toLowerCase().charAt(0);'a'!==h&&'e'!==h&&'i'!==h&&'o'!==h&&'u'!==h||(s='an'),this.yw=`Swap this note at any bank for ${s} ${i.name}.`,this.va=!0}reset(){this.model=0,this.name=null,this.yw=null,this.L_=null,this.R_=null,this.kp=2e3,this.Sp=0,this.Mp=0,this.TC=0,this.OC=0,this.vC=0,this.RC=!1,this.SC=-1,this.va=!1,this.Yy=1,this.members=!1,this.Rm=null,this.Am=null,this.MC=-1,this.kC=-1,this.xC=0,this.DC=-1,this.NC=-1,this.PC=0,this.FC=-1,this.UC=-1,this.BC=-1,this.GC=-1,this.HC=-1,this.WC=-1,this.IC=null,this.gC=null,this.bC=-1,this.pC=-1}}},1312:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(6333),e=s(1069),n=s(6730);class r extends h.${static count=0;static Fo=[];static mc=t=>{const i=new e.A(t.read('seq.dat'));this.count=i.aA;for(let t=0;t<this.count;t++){const s=new r(t).u_(i);0===s.vl&&(s.vl=1,s.frames=new Int16Array(1),s.frames[0]=-1,s._a=new Int16Array(1),s._a[0]=-1,s.delay=new Int16Array(1),s.delay[0]=-1),this.Fo[t]=s}};vl=0;frames=null;_a=null;delay=null;bl=-1;Ag=null;yg=!1;priority=5;VC=-1;KC=-1;wg=99;duration=0;decode(t,i){if(1===t){this.vl=i.fA,this.frames=new Int16Array(this.vl),this._a=new Int16Array(this.vl),this.delay=new Int16Array(this.vl);for(let t=0;t<this.vl;t++)this.frames[t]=i.aA,this._a[t]=i.aA,65535===this._a[t]&&(this._a[t]=-1),this.delay[t]=i.aA,0===this.delay[t]&&(this.delay[t]=n.A.Fo[this.frames[t]].delay),0===this.delay[t]&&(this.delay[t]=1),this.duration+=this.delay[t]}else if(2===t)this.bl=i.aA;else if(3===t){const t=i.fA;this.Ag=new Int32Array(t+1);for(let s=0;s<t;s++)this.Ag[s]=i.fA;this.Ag[t]=9999999}else 4===t?this.yg=!0:5===t?this.priority=i.fA:6===t?this.VC=i.aA:7===t?this.KC=i.aA:8===t?this.wg=i.fA:console.log('Error unrecognised seq config code: ',t)}}},8738:(t,i,s)=>{s.d(i,{A:()=>l});var h=s(6333),e=s(1069),n=s(1312),r=s(8665),o=s(2679);class l extends h.${static count=0;static Fo=[];static Uo=new o.A(30);static mc=t=>{const i=new e.A(t.read('spotanim.dat'));this.count=i.aA;for(let t=0;t<this.count;t++)this.Fo[t]=new l(t).u_(i)};model=0;_l=-1;tg=null;F_=!1;L_=new Uint16Array(6);R_=new Uint16Array(6);aC=128;cC=128;orientation=0;B_=0;G_=0;decode(t,i){1===t?this.model=i.aA:2===t?(this._l=i.aA,n.A.Fo&&(this.tg=n.A.Fo[this._l])):3===t?this.F_=!0:4===t?this.aC=i.aA:5===t?this.cC=i.aA:6===t?this.orientation=i.aA:7===t?this.B_=i.fA:8===t?this.G_=i.fA:t>=40&&t<50?this.L_[t-40]=i.aA:t>=50&&t<60?this.R_[t-50]=i.aA:console.log('Error unrecognised spotanim config code: ',t)}Ea(){let t=l.Uo?.get(BigInt(this.id));if(t)return t;t=r.A.model(this.model);for(let i=0;i<6;i++)0!==this.L_[0]&&t.Ga(this.L_[i],this.R_[i]);return l.Uo?.put(BigInt(this.id),t),t}}},3764:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(6333),e=s(1069);class n extends h.${static count=0;static Fo=[];static XC=[];static jC=0;static mc=t=>{const i=new e.A(t.read('varp.dat'));this.count=i.aA;for(let t=0;t<this.count;t++)this.Fo[t]=new n(t).u_(i)};scope=0;type=0;XC=!1;zC=!0;om=0;ZC=0;qC=!1;$C=!1;decode(t,i){1===t?this.scope=i.fA:2===t?this.type=i.fA:3===t?(this.XC=!0,n.XC[n.jC++]=this.id):4===t?this.zC=!1:5===t?this.om=i.aA:6===t?this.qC=!0:7===t?this.ZC=i.el:8===t?this.$C=!0:10===t?this.f_=i.vA:console.log('Error unrecognised config code: ',t)}}},9456:(t,i,s)=>{s.d(i,{A:()=>h});class h{static OPEN=0;static JC=1;static QC=2;static tT=4;static iT=8;static sT=h.JC<<4;static hT=h.QC<<4;static eT=h.tT<<4;static nT=h.iT<<4;static rT=256;static oT=512;static lT=1024;static aT=2048;static cT=4096;static fT=h.oT<<4;static uT=h.lT<<4;static dT=h.aT<<4;static wT=h.cT<<4;static yT=h.rT<<9;static AT=524288;static pT=2097152;static mT=h.pT|h.AT;static IT=h.rT|h.mT;static kd=h.QC|h.IT;static Sd=h.iT|h.IT;static Gm=h.QC|h.tT|h.Sd;static xd=h.hT|h.IT;static Wm=h.iT|h.sT|h.xd;static Md=h.nT|h.IT;static Hm=h.JC|h.QC|h.Md;static Ym=h.hT|h.eT|h.Md;static gT=16777215}},670:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(9456),e=s(6169),n=s(1023),r=s(4909);class o{static Pn=4;static Zn=104;static index=(t,i)=>t*o.Zn+i;offsetX;ET;sizeX;sizeZ;flags;constructor(){this.offsetX=0,this.ET=0,this.sizeX=o.Zn,this.sizeZ=o.Zn,this.flags=new Int32Array(this.sizeX*this.sizeZ),this.reset()}reset=()=>{for(let t=0;t<this.sizeX;t++)for(let i=0;i<this.sizeZ;i++){const s=o.index(t,i);0===t||0===i||t===this.sizeX-1||i===this.sizeZ-1?this.flags[s]=h.A.gT:this.flags[s]=h.A.OPEN}};_T=(t,i)=>{this.flags[o.index(t-this.offsetX,i-this.ET)]|=h.A.pT};eA=(t,i)=>{this.flags[o.index(t-this.offsetX,i-this.ET)]&=~h.A.pT};jy=(t,i,s,n,r,o)=>{let l=h.A.rT;o&&(l|=h.A.yT);const a=t-this.offsetX,c=i-this.ET;if(r===e.A.Gd||r===e.A.Wd){const t=s;s=n,n=t}for(let t=a;t<a+s;t++)if(t>=0&&t<this.sizeX)for(let i=c;i<c+n;i++)i>=0&&i<this.sizeZ&&this.add(t,i,l)};sA=(t,i,s,n,r,o)=>{let l=h.A.rT;o&&(l|=h.A.yT);const a=t-this.offsetX,c=i-this.ET;if(r===e.A.Gd||r===e.A.Wd){const t=s;s=n,n=t}for(let t=a;t<a+s;t++)if(t>=0&&t<this.sizeX)for(let i=c;i<c+n;i++)i>=0&&i<this.sizeZ&&this.remove(t,i,l)};CT=(t,i,s,r,o)=>{const l=t-this.offsetX,a=i-this.ET,c=o?h.A.wT:h.A.nT,f=o?h.A.cT:h.A.iT,u=o?h.A.lT:h.A.QC,d=o?h.A.uT:h.A.hT,w=o?h.A.oT:h.A.JC,y=o?h.A.fT:h.A.sT,A=o?h.A.aT:h.A.tT,p=o?h.A.dT:h.A.eT;s===n.A.Fd.id?r===e.A.Bd?(this.add(l,a,c),this.add(l-1,a,f)):r===e.A.Gd?(this.add(l,a,u),this.add(l,a+1,d)):r===e.A.Hd?(this.add(l,a,f),this.add(l+1,a,c)):r===e.A.Wd&&(this.add(l,a,d),this.add(l,a-1,u)):s===n.A.TT.id||s===n.A.Yd.id?r===e.A.Bd?(this.add(l,a,w),this.add(l-1,a+1,y)):r===e.A.Gd?(this.add(l,a,A),this.add(l+1,a+1,p)):r===e.A.Hd?(this.add(l,a,y),this.add(l+1,a-1,w)):r===e.A.Wd&&(this.add(l,a,p),this.add(l-1,a-1,A)):s===n.A.Ud.id&&(r===e.A.Bd?(this.add(l,a,u|c),this.add(l-1,a,f),this.add(l,a+1,d)):r===e.A.Gd?(this.add(l,a,u|f),this.add(l,a+1,d),this.add(l+1,a,c)):r===e.A.Hd?(this.add(l,a,d|f),this.add(l+1,a,c),this.add(l,a-1,u)):r===e.A.Wd&&(this.add(l,a,d|c),this.add(l,a-1,u),this.add(l-1,a,f))),o&&this.CT(t,i,s,r,!1)};Jy=(t,i,s,r,o)=>{const l=t-this.offsetX,a=i-this.ET,c=o?h.A.wT:h.A.nT,f=o?h.A.cT:h.A.iT,u=o?h.A.lT:h.A.QC,d=o?h.A.uT:h.A.hT,w=o?h.A.oT:h.A.JC,y=o?h.A.fT:h.A.sT,A=o?h.A.aT:h.A.tT,p=o?h.A.dT:h.A.eT;s===n.A.Fd.id?r===e.A.Bd?(this.remove(l,a,c),this.remove(l-1,a,f)):r===e.A.Gd?(this.remove(l,a,u),this.remove(l,a+1,d)):r===e.A.Hd?(this.remove(l,a,f),this.remove(l+1,a,c)):r===e.A.Wd&&(this.remove(l,a,d),this.remove(l,a-1,u)):s===n.A.TT.id||s===n.A.Yd.id?r===e.A.Bd?(this.remove(l,a,w),this.remove(l-1,a+1,y)):r===e.A.Gd?(this.remove(l,a,A),this.remove(l+1,a+1,p)):r===e.A.Hd?(this.remove(l,a,y),this.remove(l+1,a-1,w)):r===e.A.Wd&&(this.remove(l,a,p),this.remove(l-1,a-1,A)):s===n.A.Ud.id&&(r===e.A.Bd?(this.remove(l,a,u|c),this.remove(l-1,a,f),this.remove(l,a+1,d)):r===e.A.Gd?(this.remove(l,a,u|f),this.remove(l,a+1,d),this.remove(l+1,a,c)):r===e.A.Hd?(this.remove(l,a,d|f),this.remove(l+1,a,c),this.remove(l,a-1,u)):r===e.A.Wd&&(this.remove(l,a,d|c),this.remove(l,a-1,u),this.remove(l-1,a,f))),o&&this.Jy(t,i,s,r,!1)};Fm=(t,i,s,r,l,a)=>{if(t===s&&i===r)return!0;const c=t-this.offsetX,f=i-this.ET,u=s-this.offsetX,d=r-this.ET,w=o.index(c,f);if(l===n.A.Fd.id){if(a===e.A.Bd){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.xd)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.kd)===h.A.OPEN)return!0}else if(a===e.A.Gd){if(c===u&&f===d+1)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.Sd)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.Md)===h.A.OPEN)return!0}else if(a===e.A.Hd){if(c===u+1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.xd)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.kd)===h.A.OPEN)return!0}else if(a===e.A.Wd){if(c===u&&f===d-1)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.Sd)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.Md)===h.A.OPEN)return!0}}else if(l===n.A.Ud.id){if(a===e.A.Bd){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.Md)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.kd)===h.A.OPEN)return!0}else if(a===e.A.Gd){if(c===u-1&&f===d&&(this.flags[w]&h.A.Sd)===h.A.OPEN)return!0;if(c===u&&f===d+1)return!0;if(c===u+1&&f===d)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.kd)===h.A.OPEN)return!0}else if(a===e.A.Hd){if(c===u-1&&f===d&&(this.flags[w]&h.A.Sd)===h.A.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.xd)===h.A.OPEN)return!0;if(c===u+1&&f===d)return!0;if(c===u&&f===d-1)return!0}else if(a===e.A.Wd){if(c===u-1&&f===d)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.xd)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.Md)===h.A.OPEN)return!0;if(c===u&&f===d-1)return!0}}else if(l===n.A.Kd.id){if(c===u&&f===d+1&&(this.flags[w]&h.A.hT)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.QC)===h.A.OPEN)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.iT)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.nT)===h.A.OPEN)return!0}return!1};Um=(t,i,s,r,l,a)=>{if(t===s&&i===r)return!0;const c=t-this.offsetX,f=i-this.ET,u=s-this.offsetX,d=r-this.ET,w=o.index(c,f);if(l===n.A.OT.id||l===n.A.vT.id){if(l===n.A.vT.id&&(a=a+2&3),a===e.A.Bd){if(c===u+1&&f===d&&(this.flags[w]&h.A.nT)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.QC)===h.A.OPEN)return!0}else if(a===e.A.Gd){if(c===u-1&&f===d&&(this.flags[w]&h.A.iT)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.QC)===h.A.OPEN)return!0}else if(a===e.A.Hd){if(c===u-1&&f===d&&(this.flags[w]&h.A.iT)===h.A.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.hT)===h.A.OPEN)return!0}else if(a===e.A.Wd){if(c===u+1&&f===d&&(this.flags[w]&h.A.nT)===h.A.OPEN)return!0;if(c===u&&f===d+1&&(this.flags[w]&h.A.hT)===h.A.OPEN)return!0}}else if(l===n.A.bT.id){if(c===u&&f===d+1&&(this.flags[w]&h.A.hT)===h.A.OPEN)return!0;if(c===u&&f===d-1&&(this.flags[w]&h.A.QC)===h.A.OPEN)return!0;if(c===u-1&&f===d&&(this.flags[w]&h.A.iT)===h.A.OPEN)return!0;if(c===u+1&&f===d&&(this.flags[w]&h.A.nT)===h.A.OPEN)return!0}return!1};Bm=(t,i,s,e,n,l,a)=>{const c=s+n-1,f=e+l-1,u=o.index(t-this.offsetX,i-this.ET);return t>=s&&t<=c&&i>=e&&i<=f||(t===s-1&&i>=e&&i<=f&&(this.flags[u]&h.A.iT)===h.A.OPEN&&(a&r.A.Bd)===h.A.OPEN||(t===c+1&&i>=e&&i<=f&&(this.flags[u]&h.A.nT)===h.A.OPEN&&(a&r.A.Hd)===h.A.OPEN||(i===e-1&&t>=s&&t<=c&&(this.flags[u]&h.A.QC)===h.A.OPEN&&(a&r.A.Wd)===h.A.OPEN||i===f+1&&t>=s&&t<=c&&(this.flags[u]&h.A.hT)===h.A.OPEN&&(a&r.A.Gd)===h.A.OPEN)))};add=(t,i,s)=>{this.flags[o.index(t,i)]|=s};remove=(t,i,s)=>{this.flags[o.index(t,i)]&=h.A.gT-s}}},4909:(t,i,s)=>{s.d(i,{A:()=>h});class h{static Gd=1;static Hd=2;static Wd=4;static Bd=8}},6169:(t,i,s)=>{s.d(i,{A:()=>h});class h{static Bd=0;static Gd=1;static Hd=2;static Wd=3}},5599:(t,i,s)=>{s.d(i,{A:()=>h});class h{static zy=0;static Zy=1;static $y=2;static vy=3}},1023:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(5599);class e{static Fd=new e(0,h.A.zy);static TT=new e(1,h.A.zy);static Ud=new e(2,h.A.zy);static Yd=new e(3,h.A.zy);static eg=new e(4,h.A.Zy);static Pm=new e(5,h.A.Zy);static OT=new e(6,h.A.Zy);static vT=new e(7,h.A.Zy);static bT=new e(8,h.A.Zy);static Kd=new e(9,h.A.$y);static Ty=new e(10,h.A.$y);static Oy=new e(11,h.A.$y);static LT=new e(12,h.A.$y);static RT=new e(13,h.A.$y);static ST=new e(14,h.A.$y);static MT=new e(15,h.A.$y);static kT=new e(16,h.A.$y);static xT=new e(17,h.A.$y);static DT=new e(18,h.A.$y);static NT=new e(19,h.A.$y);static PT=new e(20,h.A.$y);static FT=new e(21,h.A.$y);static vy=new e(22,h.A.vy);static values(){return[this.Fd,this.TT,this.xT,this.MT,this.Ud,this.ST,this.Kd,this.Yd,this.vy,this.LT,this.Oy,this.OT,this.PT,this.Ty,this.Pm,this.RT,this.vT,this.eg,this.kT,this.bT,this.NT,this.FT,this.DT]}static of(t){const i=this.values();for(let s=0;s<i.length;s++){const h=i[s];if(h.id===t)return h}throw Error('shape not found')}id;zd;constructor(t,i){this.id=t,this.zd=i}}},818:(t,i,s)=>{s.d(i,{A:()=>A});var h=s(670),e=s(2164),n=s(1069),r=s(4583),o=s(3045),l=s(5637),a=s(4197),c=s(1312),f=s(1023),u=s(6169),d=s(9298),w=s(5518),y=s(3867);class A{static UT=Int8Array.of(1,2,4,8);static BT=Uint8Array.of(16,32,64,128);static GT=Int8Array.of(1,0,-1,0);static HT=Int8Array.of(0,-1,0,1);static WT=(17*Math.random()|0)-8;static YT=(33*Math.random()|0)-16;static st=!0;static zp=0;static VT=!1;static KT=(t,i)=>{let s=this.XT(t+45365,i+91923,4)+(this.XT(t+10294,i+37821,2)-128>>1)+(this.XT(t,i,1)-128>>2)-128;return s=35+(.3*s|0),s<10?s=10:s>60&&(s=60),s};static XT=(t,i,s)=>{const h=t/s|0,e=t&s-1,n=i/s|0,r=i&s-1,o=this.jT(h,n),l=this.jT(h+1,n),a=this.jT(h,n+1),c=this.jT(h+1,n+1),f=this.zT(o,l,e,s),u=this.zT(a,c,e,s);return this.zT(f,u,r,s)};static zT=(t,i,s,h)=>{const e=65536-r.A.cos[1024*s/h|0]>>1;return(t*(65536-e)>>16)+(i*e>>16)};static jT=(t,i)=>((this.ZT(t-1,i-1)+this.ZT(t+1,i-1)+this.ZT(t-1,i+1)+this.ZT(t+1,i+1))/16|0)+((this.ZT(t-1,i)+this.ZT(t+1,i)+this.ZT(t,i-1)+this.ZT(t,i+1))/8|0)+(this.ZT(t,i)/4|0);static ZT=(t,i)=>{const s=t+57*i,h=BigInt(s<<13^s);return 255&Number((h*(h*h*15731n+789221n)+1376312589n&0x7fffffffn)>>19n)};static jy=(t,i,s,h,e,n,r,o,d,w,y)=>{const p=e[y][i][s],m=e[y][i+1][s],I=e[y][i+1][s+1],g=e[y][i][s+1],E=p+m+I+g>>2,_=l.A.get(o);let C=i+(s<<7)+(o<<14)+1073741824|0;_.active||(C+=-2147483648),C|=0;const T=(w<<6)+d<<24>>24;if(d===f.A.vy.id)h?.qT(_.Ea(f.A.vy.id,w,p,m,I,g,-1),t,i,s,E,C,T),_.Qy&&_.active&&r?._T(i,s),-1!==_._l&&n.Ig(new a.A(o,t,3,i,s,c.A.Fo[_._l],!0));else if(d===f.A.Ty.id||d===f.A.Oy.id){const e=_.Ea(f.A.Ty.id,w,p,m,I,g,-1);if(e){let n,r,o=0;d===f.A.Oy.id&&(o+=256),w===u.A.Gd||w===u.A.Wd?(n=_.length,r=_.width):(n=_.width,r=_.length),h?.jy(t,i,s,E,e,null,C,T,n,r,o)}_.Qy&&r?.jy(i,s,_.width,_.length,w,_.tA),-1!==_._l&&n.Ig(new a.A(o,t,2,i,s,c.A.Fo[_._l],!0))}else if(d>=f.A.LT.id)h?.jy(t,i,s,E,_.Ea(d,w,p,m,I,g,-1),null,C,T,1,1,0),_.Qy&&r?.jy(i,s,_.width,_.length,w,_.tA),-1!==_._l&&n.Ig(new a.A(o,t,2,i,s,c.A.Fo[_._l],!0));else if(d===f.A.Fd.id)h?.CT(t,i,s,E,A.UT[w],0,_.Ea(f.A.Fd.id,w,p,m,I,g,-1),null,C,T),_.Qy&&r?.CT(i,s,d,w,_.tA),-1!==_._l&&n.Ig(new a.A(o,t,0,i,s,c.A.Fo[_._l],!0));else if(d===f.A.TT.id)h?.CT(t,i,s,E,A.BT[w],0,_.Ea(f.A.TT.id,w,p,m,I,g,-1),null,C,T),_.Qy&&r?.CT(i,s,d,w,_.tA),-1!==_._l&&n.Ig(new a.A(o,t,0,i,s,c.A.Fo[_._l],!0));else if(d===f.A.Ud.id){const e=w+1&3;h?.CT(t,i,s,E,A.UT[w],A.UT[e],_.Ea(f.A.Ud.id,w+4,p,m,I,g,-1),_.Ea(f.A.Ud.id,e,p,m,I,g,-1),C,T),_.Qy&&r?.CT(i,s,d,w,_.tA),-1!==_._l&&n.Ig(new a.A(o,t,0,i,s,c.A.Fo[_._l],!0))}else if(d===f.A.Yd.id)h?.CT(t,i,s,E,A.BT[w],0,_.Ea(f.A.Yd.id,w,p,m,I,g,-1),null,C,T),_.Qy&&r?.CT(i,s,d,w,_.tA),-1!==_._l&&n.Ig(new a.A(o,t,0,i,s,c.A.Fo[_._l],!0));else if(d===f.A.Kd.id)h?.jy(t,i,s,E,_.Ea(d,w,p,m,I,g,-1),null,C,T,1,1,0),_.Qy&&r?.jy(i,s,_.width,_.length,w,_.tA),-1!==_._l&&n.Ig(new a.A(o,t,2,i,s,c.A.Fo[_._l],!0));else if(d===f.A.eg.id)h?.$T(t,i,s,E,0,0,C,_.Ea(f.A.eg.id,u.A.Bd,p,m,I,g,-1),T,512*w,A.UT[w]),-1!==_._l&&n.Ig(new a.A(o,t,1,i,s,c.A.Fo[_._l],!0));else if(d===f.A.Pm.id){let e=16;if(h){const n=h.Dd(t,i,s);n>0&&(e=l.A.get(n>>14&32767).U_)}h?.$T(t,i,s,E,A.GT[w]*e,A.HT[w]*e,C,_.Ea(f.A.eg.id,u.A.Bd,p,m,I,g,-1),T,512*w,A.UT[w]),-1!==_._l&&n.Ig(new a.A(o,t,1,i,s,c.A.Fo[_._l],!0))}else d===f.A.OT.id?(h?.$T(t,i,s,E,0,0,C,_.Ea(f.A.eg.id,u.A.Bd,p,m,I,g,-1),T,w,256),-1!==_._l&&n.Ig(new a.A(o,t,1,i,s,c.A.Fo[_._l],!0))):d===f.A.vT.id?(h?.$T(t,i,s,E,0,0,C,_.Ea(f.A.eg.id,u.A.Bd,p,m,I,g,-1),T,w,512),-1!==_._l&&n.Ig(new a.A(o,t,1,i,s,c.A.Fo[_._l],!0))):d===f.A.bT.id&&(h?.$T(t,i,s,E,0,0,C,_.Ea(f.A.eg.id,u.A.Bd,p,m,I,g,-1),T,w,768),-1!==_._l&&n.Ig(new a.A(o,t,1,i,s,c.A.Fo[_._l],!0)))};zI;ZI;Kn;Xn;JT;QT;tO;iO;sO;hO;eO;nO;rO;oO;lO;aO;constructor(t,i,s,e){this.zI=t,this.ZI=i,this.Kn=s,this.Xn=e,this.JT=new y.ac(h.A.Pn,t,i),this.QT=new y.ac(h.A.Pn,t,i),this.tO=new y.ac(h.A.Pn,t,i),this.iO=new y.ac(h.A.Pn,t,i),this.aO=new y.cc(h.A.Pn,t+1,i+1),this.sO=new y.ac(h.A.Pn,t+1,i+1),this.hO=new y.zn(t+1,i+1),this.eO=new Int32Array(i),this.nO=new Int32Array(i),this.rO=new Int32Array(i),this.oO=new Int32Array(i),this.lO=new Int32Array(i)}im=(t,i)=>{for(let t=0;t<h.A.Pn;t++)for(let s=0;s<h.A.Zn;s++)for(let e=0;e<h.A.Zn;e++)if(!(1&~this.Xn[t][s][e])){let h=t;2&~this.Xn[1][s][e]||h--,h>=0&&i[h]?._T(s,e)}A.WT+=(5*Math.random()|0)-2,A.WT<-8?A.WT=-8:A.WT>8&&(A.WT=8),A.YT+=(5*Math.random()|0)-2,A.YT<-16?A.YT=-16:A.YT>16&&(A.YT=16);for(let i=0;i<h.A.Pn;i++){const s=this.sO[i],h=96,n=-50,o=-10,l=-50,a=768*(0|Math.sqrt(n*n+o*o+l*l))>>8;for(let t=1;t<this.ZI-1;t++)for(let e=1;e<this.zI-1;e++){const r=this.Kn[i][e+1][t]-this.Kn[i][e-1][t],c=this.Kn[i][e][t+1]-this.Kn[i][e][t-1],f=0|Math.sqrt(r*r+c*c+65536),u=h+((n*((r<<8)/f|0)+o*(65536/f|0)+l*((c<<8)/f|0))/a|0),d=(s[e-1][t]>>2)+(s[e+1][t]>>3)+(s[e][t-1]>>2)+(s[e][t+1]>>3)+(s[e][t]>>1);this.hO[e][t]=u-d}for(let t=0;t<this.ZI;t++)this.eO[t]=0,this.nO[t]=0,this.rO[t]=0,this.oO[t]=0,this.lO[t]=0;for(let s=-5;s<this.zI+5;s++){for(let t=0;t<this.ZI;t++){const h=s+5;let n;if(h>=0&&h<this.zI){const s=255&this.JT[i][h][t];if(s>0){const i=e.A.Fo[s-1];this.eO[t]+=i.C_,this.nO[t]+=i.g_,this.rO[t]+=i.E_,this.oO[t]+=i.__,n=this.lO[t]++}}const r=s-5;if(r>=0&&r<this.zI){const s=255&this.JT[i][r][t];if(s>0){const i=e.A.Fo[s-1];this.eO[t]-=i.C_,this.nO[t]-=i.g_,this.rO[t]-=i.E_,this.oO[t]-=i.__,n=this.lO[t]--}}}if(s>=1&&s<this.zI-1){let h=0,n=0,o=0,l=0,a=0;for(let c=-5;c<this.ZI+5;c++){const f=c+5;f>=0&&f<this.ZI&&(h+=this.eO[f],n+=this.nO[f],o+=this.rO[f],l+=this.oO[f],a+=this.lO[f]);const y=c-5;if(y>=0&&y<this.ZI&&(h-=this.eO[y],n-=this.nO[y],o-=this.rO[y],l-=this.oO[y],a-=this.lO[y]),c>=1&&c<this.ZI-1&&(!A.st||!(16&this.Xn[i][s][c])&&this.cO(i,s,c)===A.zp)){const f=255&this.JT[i][s][c],y=255&this.QT[i][s][c];if(f>0||y>0){const p=this.Kn[i][s][c],m=this.Kn[i][s+1][c],I=this.Kn[i][s+1][c+1],g=this.Kn[i][s][c+1],E=this.hO[s][c],_=this.hO[s+1][c],C=this.hO[s+1][c+1],T=this.hO[s][c+1];let O=-1,v=-1;if(f>0){const t=256*h/l|0,i=n/a|0;let s=o/a|0;O=e.A.d_(t,i,s);const r=t+A.WT&255;s+=A.YT,s<0?s=0:s>255&&(s=255),v=e.A.d_(r,i,s)}if(i>0){let t=0!==f||this.tO[i][s][c]===w.A.fO;y>0&&!e.A.Fo[y-1].m_&&(t=!1),t&&p===m&&p===I&&p===g&&(this.aO[i][s][c]|=2340)}let b=0;if(-1!==O&&(b=r.A.palette[e.A.w_(v,96)]),0===y)t?.uO(i,s,c,w.A.fO,u.A.Bd,-1,p,m,I,g,e.A.w_(O,E),e.A.w_(O,_),e.A.w_(O,C),e.A.w_(O,T),d.A.Jl,d.A.Jl,d.A.Jl,d.A.Jl,b,d.A.Jl);else{const h=this.tO[i][s][c]+1,n=this.iO[i][s][c],o=e.A.Fo[y-1];let l,a,f=o.texture;f>=0?(a=r.A.dO(f),l=-1):o.A_===d.A.Gc?(a=0,l=-2,f=-1):(l=e.A.d_(o.I_,o.g_,o.E_),a=r.A.palette[e.A.y_(o.T_,96)]),t?.uO(i,s,c,h,n,f,p,m,I,g,e.A.w_(O,E),e.A.w_(O,_),e.A.w_(O,C),e.A.w_(O,T),e.A.y_(l,E),e.A.y_(l,_),e.A.y_(l,C),e.A.y_(l,T),b,a)}}}}}}for(let s=1;s<this.ZI-1;s++)for(let h=1;h<this.zI-1;h++)t?.wO(i,h,s,this.cO(i,h,s))}A.VT||t?.yO(64,768,-50,-10,-50);for(let i=0;i<this.zI;i++)for(let s=0;s<this.ZI;s++)2&~this.Xn[1][i][s]||t?.AO(i,s);if(!A.VT){let t=1,i=2,s=4;for(let e=0;e<h.A.Pn;e++){e>0&&(t<<=3,i<<=3,s<<=3);for(let h=0;h<=e;h++)for(let n=0;n<=this.ZI;n++)for(let r=0;r<=this.zI;r++){if(this.aO[h][r][n]&t){let i=n,s=n,l=h,a=h;for(;i>0&&this.aO[h][r][i-1]&t;)i--;for(;s<this.ZI&&this.aO[h][r][s+1]&t;)s++;t:for(;l>0;){for(let h=i;h<=s;h++)if(!(this.aO[l-1][r][h]&t))break t;l--}t:for(;a<e;){for(let h=i;h<=s;h++)if(!(this.aO[a+1][r][h]&t))break t;a++}if((a+1-l)*(s+1-i)>=8){const h=this.Kn[a][r][i]-240,n=this.Kn[l][r][i];o.A.pO(e,1,128*r,h,128*i,128*r,n,128*s+128);for(let h=l;h<=a;h++)for(let e=i;e<=s;e++)this.aO[h][r][e]&=~t}}if(this.aO[h][r][n]&i){let t=r,s=r,l=h,a=h;for(;t>0&&this.aO[h][t-1][n]&i;)t--;for(;s<this.zI&&this.aO[h][s+1][n]&i;)s++;t:for(;l>0;){for(let h=t;h<=s;h++)if(!(this.aO[l-1][h][n]&i))break t;l--}t:for(;a<e;){for(let h=t;h<=s;h++)if(!(this.aO[a+1][h][n]&i))break t;a++}if((a+1-l)*(s+1-t)>=8){const h=this.Kn[a][t][n]-240,r=this.Kn[l][t][n];o.A.pO(e,2,128*t,h,128*n,128*s+128,r,128*n);for(let h=l;h<=a;h++)for(let e=t;e<=s;e++)this.aO[h][e][n]&=~i}}if(this.aO[h][r][n]&s){let t=r,i=r,l=n,a=n;for(;l>0&&this.aO[h][r][l-1]&s;)l--;for(;a<this.ZI&&this.aO[h][r][a+1]&s;)a++;t:for(;t>0;){for(let i=l;i<=a;i++)if(!(this.aO[h][t-1][i]&s))break t;t--}t:for(;i<this.zI;){for(let t=l;t<=a;t++)if(!(this.aO[h][i+1][t]&s))break t;i++}if((i+1-t)*(a+1-l)>=4){const n=this.Kn[h][t][l];o.A.pO(e,4,128*t,n,128*l,128*i+128,n,128*a+128);for(let e=t;e<=i;e++)for(let t=l;t<=a;t++)this.aO[h][e][t]&=~s}}}}}};Qp=(t,i,s,n)=>{let r=0;for(let t=0;t<e.A.count;t++)if('water'===e.A.Fo[t].f_?.toLowerCase()){r=t+1<<24>>24;break}for(let e=t;e<t+s;e++)for(let t=i;t<i+n;t++)if(t>=0&&t<this.zI&&e>=0&&e<this.ZI){this.QT[0][t][e]=r;for(let i=0;i<h.A.Pn;i++)this.Kn[i][t][e]=0,this.Xn[i][t][e]=0}};Jp=(t,i,s,e,r)=>{const o=new n.A(new Uint8Array(r));for(let n=0;n<h.A.Pn;n++)for(let r=0;r<64;r++)for(let l=0;l<64;l++){const a=r+s,c=l+e;let f;if(a>=0&&a<h.A.Zn&&c>=0&&c<h.A.Zn)for(this.Xn[n][a][c]=0;;){if(f=o.fA,0===f){0===n?this.Kn[0][a][c]=8*-A.KT(a+t+932731,c+556238+i):this.Kn[n][a][c]=this.Kn[n-1][a][c]-240;break}if(1===f){let t=o.fA;1===t&&(t=0),0===n?this.Kn[0][a][c]=8*-t:this.Kn[n][a][c]=this.Kn[n-1][a][c]-8*t;break}f<=49?(this.QT[n][a][c]=o.dA,this.tO[n][a][c]=(f-2)/4<<24>>24,this.iO[n][a][c]=(f-2&3)<<24>>24):f<=81?this.Xn[n][a][c]=f-49<<24>>24:this.JT[n][a][c]=f-81<<24>>24}else for(;f=o.fA,0!==f;){if(1===f){o.fA;break}f<=49&&o.fA}}};tm=(t,i,s,e,r,o)=>{const l=new n.A(new Uint8Array(e));let a=-1;for(;;){const e=l.mO;if(0===e)return;a+=e;let n=0;for(;;){const e=l.mO;if(0===e)break;n+=e-1;const c=63&n,f=n>>6&63,u=n>>12,d=l.fA,w=d>>2,y=3&d,A=f+r,p=c+o;if(A>0&&p>0&&A<h.A.Zn-1&&p<h.A.Zn-1){let h=u;2&~this.Xn[1][A][p]||(h=u-1);let e=null;h>=0&&(e=s[h]),this.jy(u,A,p,t,i,e,a,w,y)}}}};jy=(t,i,s,h,e,n,r,o,d)=>{if(A.st){if(16&this.Xn[t][i][s])return;if(this.cO(t,i,s)!==A.zp)return}const w=this.Kn[t][i][s],y=this.Kn[t][i+1][s],p=this.Kn[t][i+1][s+1],m=this.Kn[t][i][s+1],I=w+y+p+m>>2,g=l.A.get(r);let E=i+(s<<7)+(r<<14)+1073741824|0;g.active||(E+=-2147483648),E|=0;const _=(d<<6)+o<<24>>24;if(o===f.A.vy.id)(!A.st||g.active||g.Z_)&&(h?.qT(g.Ea(f.A.vy.id,d,w,y,p,m,-1),t,i,s,I,E,_),g.Qy&&g.active&&n?._T(i,s),-1!==g._l&&e.Ig(new a.A(r,t,3,i,s,c.A.Fo[g._l],!0)));else if(o===f.A.Ty.id||o===f.A.Oy.id){const l=g.Ea(f.A.Ty.id,d,w,y,p,m,-1);if(l){let e,n,r=0;if(o===f.A.Oy.id&&(r+=256),d===u.A.Gd||d===u.A.Wd?(e=g.length,n=g.width):(e=g.width,n=g.length),h?.jy(t,i,s,I,l,null,E,_,e,n,r)&&g.W_)for(let h=0;h<=e;h++)for(let e=0;e<=n;e++){let n=l.IO/4|0;n>30&&(n=30),n>this.sO[t][i+h][s+e]&&(this.sO[t][i+h][s+e]=n<<24>>24)}}g.Qy&&n?.jy(i,s,g.width,g.length,d,g.tA),-1!==g._l&&e.Ig(new a.A(r,t,2,i,s,c.A.Fo[g._l],!0))}else if(o>=f.A.LT.id)h?.jy(t,i,s,I,g.Ea(o,d,w,y,p,m,-1),null,E,_,1,1,0),o>=f.A.LT.id&&o<=f.A.xT.id&&o!==f.A.RT.id&&t>0&&(this.aO[t][i][s]|=2340),g.Qy&&n?.jy(i,s,g.width,g.length,d,g.tA),-1!==g._l&&e.Ig(new a.A(r,t,2,i,s,c.A.Fo[g._l],!0));else if(o===f.A.Fd.id)h?.CT(t,i,s,I,A.UT[d],0,g.Ea(f.A.Fd.id,d,w,y,p,m,-1),null,E,_),d===u.A.Bd?(g.W_&&(this.sO[t][i][s]=50,this.sO[t][i][s+1]=50),g.m_&&(this.aO[t][i][s]|=585)):d===u.A.Gd?(g.W_&&(this.sO[t][i][s+1]=50,this.sO[t][i+1][s+1]=50),g.m_&&(this.aO[t][i][s+1]|=1170)):d===u.A.Hd?(g.W_&&(this.sO[t][i+1][s]=50,this.sO[t][i+1][s+1]=50),g.m_&&(this.aO[t][i+1][s]|=585)):d===u.A.Wd&&(g.W_&&(this.sO[t][i][s]=50,this.sO[t][i+1][s]=50),g.m_&&(this.aO[t][i][s]|=1170)),g.Qy&&n?.CT(i,s,o,d,g.tA),-1!==g._l&&e.Ig(new a.A(r,t,0,i,s,c.A.Fo[g._l],!0)),16!==g.U_&&h?.gO(t,i,s,g.U_);else if(o===f.A.TT.id)h?.CT(t,i,s,I,A.BT[d],0,g.Ea(f.A.TT.id,d,w,y,p,m,-1),null,E,_),g.W_&&(d===u.A.Bd?this.sO[t][i][s+1]=50:d===u.A.Gd?this.sO[t][i+1][s+1]=50:d===u.A.Hd?this.sO[t][i+1][s]=50:d===u.A.Wd&&(this.sO[t][i][s]=50)),g.Qy&&n?.CT(i,s,o,d,g.tA),-1!==g._l&&e.Ig(new a.A(r,t,0,i,s,c.A.Fo[g._l],!0));else if(o===f.A.Ud.id){const l=d+1&3;h?.CT(t,i,s,I,A.UT[d],A.UT[l],g.Ea(f.A.Ud.id,d+4,w,y,p,m,-1),g.Ea(f.A.Ud.id,l,w,y,p,m,-1),E,_),g.m_&&(d===u.A.Bd?(this.aO[t][i][s]|=265,this.aO[t][i][s+1]|=1170):d===u.A.Gd?(this.aO[t][i][s+1]|=1170,this.aO[t][i+1][s]|=585):d===u.A.Hd?(this.aO[t][i+1][s]|=585,this.aO[t][i][s]|=1170):d===u.A.Wd&&(this.aO[t][i][s]|=1170,this.aO[t][i][s]|=585)),g.Qy&&n?.CT(i,s,o,d,g.tA),-1!==g._l&&e.Ig(new a.A(r,t,0,i,s,c.A.Fo[g._l],!0)),16!==g.U_&&h?.gO(t,i,s,g.U_)}else if(o===f.A.Yd.id)h?.CT(t,i,s,I,A.BT[d],0,g.Ea(f.A.Yd.id,d,w,y,p,m,-1),null,E,_),g.W_&&(d===u.A.Bd?this.sO[t][i][s+1]=50:d===u.A.Gd?this.sO[t][i+1][s+1]=50:d===u.A.Hd?this.sO[t][i+1][s]=50:d===u.A.Wd&&(this.sO[t][i][s]=50)),g.Qy&&n?.CT(i,s,o,d,g.tA),-1!==g._l&&e.Ig(new a.A(r,t,0,i,s,c.A.Fo[g._l],!0));else if(o===f.A.Kd.id)h?.jy(t,i,s,I,g.Ea(o,d,w,y,p,m,-1),null,E,_,1,1,0),g.Qy&&n?.jy(i,s,g.width,g.length,d,g.tA),-1!==g._l&&e.Ig(new a.A(r,t,2,i,s,c.A.Fo[g._l],!0));else if(o===f.A.eg.id)h?.$T(t,i,s,I,0,0,E,g.Ea(f.A.eg.id,u.A.Bd,w,y,p,m,-1),_,512*d,A.UT[d]),-1!==g._l&&e.Ig(new a.A(r,t,1,i,s,c.A.Fo[g._l],!0));else if(o===f.A.Pm.id){let n=16;if(h){const e=h.Dd(t,i,s);e>0&&(n=l.A.get(e>>14&32767).U_)}h?.$T(t,i,s,I,A.GT[d]*n,A.HT[d]*n,E,g.Ea(f.A.eg.id,u.A.Bd,w,y,p,m,-1),_,512*d,A.UT[d]),-1!==g._l&&e.Ig(new a.A(r,t,1,i,s,c.A.Fo[g._l],!0))}else o===f.A.OT.id?(h?.$T(t,i,s,I,0,0,E,g.Ea(f.A.eg.id,u.A.Bd,w,y,p,m,-1),_,d,256),-1!==g._l&&e.Ig(new a.A(r,t,1,i,s,c.A.Fo[g._l],!0))):o===f.A.vT.id?(h?.$T(t,i,s,I,0,0,E,g.Ea(f.A.eg.id,u.A.Bd,w,y,p,m,-1),_,d,512),-1!==g._l&&e.Ig(new a.A(r,t,1,i,s,c.A.Fo[g._l],!0))):o===f.A.bT.id&&(h?.$T(t,i,s,I,0,0,E,g.Ea(f.A.eg.id,u.A.Bd,w,y,p,m,-1),_,d,768),-1!==g._l&&e.Ig(new a.A(r,t,1,i,s,c.A.Fo[g._l],!0)))};cO=(t,i,s)=>8&this.Xn[t][i][s]?0:t<=0||!(2&this.Xn[1][i][s])?t:t-1}},3045:(t,i,s)=>{s.d(i,{A:()=>I});var h=s(4583),e=s(1161),n=s(3795),r=s(8256),o=s(670),l=s(9222),a=s(6855),c=s(7441),f=s(6666),u=s(5748),d=s(3479),w=s(8950),y=s(2771),A=s(5518),p=s(6169),m=s(3867);class I{static EO=new m._O(8,32,51,51,!1);static CO=new m.As(100,null);static rd=new Int32Array(o.A.Pn);static TO=new m.OO(o.A.Pn,500,null);static vO=new m.As(500,null);static bO=new f.A;static hu=0;static LO=0;static RO=0;static SO=0;static MO=0;static kO=0;static xO=0;static DO=0;static NO=0;static PO=0;static FO=0;static UO=0;static BO=0;static GO=0;static HO=0;static WO=0;static YO=0;static VO=0;static KO=0;static XO=0;static od=0;static jO=0;static zO=!1;static ZO=null;static qO=Uint8Array.of(19,55,38,155,255,110,137,205,76);static $O=Uint8Array.of(160,192,80,96,0,144,80,48,160);static JO=Uint8Array.of(76,8,137,4,0,1,38,2,19);static QO=Int8Array.of(0,0,2,0,0,2,1,1,0);static tv=Int8Array.of(2,0,0,2,0,0,0,4,4);static iv=Int8Array.of(0,4,4,8,0,0,8,0,0);static sv=Int8Array.of(1,1,0,0,0,8,0,0,8);static hv=Int8Array.of(53,-53,-53,53);static ev=Int8Array.of(-53,-53,53,53);static nv=Int8Array.of(-45,45,45,-45);static rv=Int8Array.of(45,45,-45,-45);static ov=[new Int8Array(16),Int8Array.of(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),Int8Array.of(1,0,0,0,1,1,0,0,1,1,1,0,1,1,1,1),Int8Array.of(1,1,0,0,1,1,0,0,1,0,0,0,1,0,0,0),Int8Array.of(0,0,1,1,0,0,1,1,0,0,0,1,0,0,0,1),Int8Array.of(0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1),Int8Array.of(1,1,1,0,1,1,1,0,1,1,1,1,1,1,1,1),Int8Array.of(1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0),Int8Array.of(0,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0),Int8Array.of(1,1,1,1,1,1,1,1,0,1,1,1,0,0,1,1),Int8Array.of(1,1,1,1,1,1,0,0,1,0,0,0,1,0,0,0),Int8Array.of(0,0,0,0,0,0,1,1,0,1,1,1,0,1,1,1),Int8Array.of(0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1)];static lv=[Int8Array.of(0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15),Int8Array.of(12,8,4,0,13,9,5,1,14,10,6,2,15,11,7,3),Int8Array.of(15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0),Int8Array.of(3,7,11,15,2,6,10,14,1,5,9,13,0,4,8,12)];static av=Int32Array.of(41,39248,41,4643,41,41,41,41,41,41,41,41,41,41,41,43086,41,41,41,41,41,41,41,8602,41,28992,41,41,41,41,41,5056,41,41,41,41,41,41,41,41,41,41,41,41,41,41,3131,41,41,41);static ld=0;static Xl=0;static jl=0;static Tf=-1;static Of=-1;static st=!0;static init=(t,i,s,e,n)=>{this.LO=0,this.RO=0,this.SO=t,this.MO=i,this.kO=t/2|0,this.xO=i/2|0;const r=new m._O(9,32,53,53,!1);for(let t=128;t<=384;t+=32)for(let i=0;i<2048;i+=64){this.DO=h.A.sin[t],this.NO=h.A.cos[t],this.PO=h.A.sin[i],this.FO=h.A.cos[i];const o=(t-128)/32|0,l=i/64|0;for(let t=-26;t<=26;t++)for(let i=-26;i<=26;i++){const h=128*t,a=128*i;let c=!1;for(let t=-s;t<=e;t+=128)if(this.cv(h,a,n[o]+t)){c=!0;break}r[o][l][t+25+1][i+25+1]=c}}for(let t=0;t<8;t++)for(let i=0;i<32;i++)for(let s=-25;s<25;s++)for(let h=-25;h<25;h++){let e=!1;t:for(let n=-1;n<=1;n++)for(let o=-1;o<=1;o++){if(r[t][i][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t][(i+1)%31][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t+1][i][s+n+25+1][h+o+25+1]){e=!0;break t}if(r[t+1][(i+1)%31][s+n+25+1][h+o+25+1]){e=!0;break t}}this.EO[t][i][s+25][h+25]=e}};static ko=()=>{this.CO=null,this.rd=null,this.TO=null,this.bO=null,this.EO=null,this.vO=null,this.ZO=null,console.log('World3D unloaded!')};static pO=(t,i,s,h,e,n,o,l)=>{I.TO[t][I.rd[t]++]=new r.A(s/128|0,n/128|0,e/128|0,l/128|0,i,s,n,e,l,h,o)};static cv=(t,i,s)=>{const h=i*this.PO+t*this.FO>>16,e=i*this.FO-t*this.PO>>16,n=s*this.DO+e*this.NO>>16,r=s*this.NO-e*this.DO>>16;if(n<50||n>3500)return!1;const o=this.kO+((h<<9)/n|0),l=this.xO+((r<<9)/n|0);return o>=this.LO&&o<=this.SO&&l>=this.RO&&l<=this.MO};fv;zI;ZI;uv;dv;Tr;wv;yv;Av;pv=0;mv=0;Iv=0;constructor(t,i,s,h){this.fv=s,this.zI=h,this.ZI=i,this.dv=new m.vr(s,h,i,null),this.wv=new m.cc(s,h+1,i+1),this.uv=t,this.Tr=new m.As(5e3,null),this.yv=new Int32Array(1e4),this.Av=new Int32Array(1e4),this.reset()}reset=()=>{for(let t=0;t<this.fv;t++)for(let i=0;i<this.zI;i++)for(let s=0;s<this.ZI;s++)this.dv[t][i][s]=null;for(let t=0;t<o.A.Pn;t++){for(let i=0;i<I.rd[t];i++)I.TO[t][i]=null;I.rd[t]=0}for(let t=0;t<this.pv;t++)this.Tr[t]=null;this.pv=0,I.CO.fill(null)};$p=t=>{this.mv=t;for(let i=0;i<this.zI;i++)for(let s=0;s<this.ZI;s++)this.dv[t][i][s]=new n.A(t,i,s)};AO=(t,i)=>{const s=this.dv[0][t][i];for(let s=0;s<3;s++){this.dv[s][t][i]=this.dv[s+1][t][i];const h=this.dv[s][t][i];h&&h.level--}this.dv[0][t][i]||(this.dv[0][t][i]=new n.A(0,t,i));const h=this.dv[0][t][i];h&&(h.gv=s),this.dv[3][t][i]=null};wO=(t,i,s,h)=>{const e=this.dv[t][i][s];e&&(e.Ev=h)};uO=(t,i,s,h,e,r,o,l,a,c,f,u,w,p,m,I,g,E,_,C)=>{if(h===A.A.fO){for(let h=t;h>=0;h--)this.dv[h][i][s]||(this.dv[h][i][s]=new n.A(h,i,s));const h=this.dv[t][i][s];h&&(h._v=new d.A(f,u,w,p,-1,_,!1))}else if(h===A.A.Cv){for(let h=t;h>=0;h--)this.dv[h][i][s]||(this.dv[h][i][s]=new n.A(h,i,s));const h=this.dv[t][i][s];h&&(h._v=new d.A(m,I,g,E,r,C,o===l&&o===a&&o===c))}else{for(let h=t;h>=0;h--)this.dv[h][i][s]||(this.dv[h][i][s]=new n.A(h,i,s));const d=this.dv[t][i][s];d&&(d.Tv=new y.A(i,h,I,l,w,e,f,c,C,m,r,E,_,a,g,p,o,s,u))}};qT=(t,i,s,h,e,r,o)=>{this.dv[i][s][h]||(this.dv[i][s][h]=new n.A(i,s,h));const a=this.dv[i][s][h];a&&(a.Ov=new l.A(e,128*s+64,128*h+64,t,r,o))};hA=(t,i,s)=>{const h=this.dv[t][i][s];h&&(h.Ov=null)};Xy=(t,i,s,h,e,r,o,l)=>{let a=0;const c=this.dv[h][t][i];if(c)for(let t=0;t<c.vv;t++){const i=c.bv[t];if(!i||!i.model)continue;const s=i.model.oC;s>a&&(a=s)}else this.dv[h][t][i]=new n.A(h,t,i);const f=this.dv[h][t][i];f&&(f.Lv=new u.A(s,128*t+64,128*i+64,r,o,l,e,a))};Wy=(t,i,s)=>{const h=this.dv[t][i][s];h&&(h.Lv=null)};CT=(t,i,s,h,e,r,o,l,c,f)=>{if(!o&&!l)return;for(let h=t;h>=0;h--)this.dv[h][i][s]||(this.dv[h][i][s]=new n.A(h,i,s));const u=this.dv[t][i][s];u&&(u.Rv=new a.A(h,128*i+64,128*s+64,e,r,o,l,c,f))};Jy=(t,i,s,h)=>{const e=this.dv[t][i][s];1===h&&e&&(e.Rv=null)};$T=(t,i,s,h,e,r,o,l,a,f,u)=>{if(!l)return;for(let h=t;h>=0;h--)this.dv[h][i][s]||(this.dv[h][i][s]=new n.A(h,i,s));const d=this.dv[t][i][s];d&&(d.Sv=new c.A(h,128*i+e+64,128*s+r+64,u,f,l,o,a))};iA=(t,i,s)=>{const h=this.dv[t][i][s];h&&(h.Sv=null)};gO=(t,i,s,h)=>{const e=this.dv[t][i][s];if(!e)return;const n=e.Sv;if(!n)return;const r=128*i+64,o=128*s+64;n.x=r+((n.x-r)*h/16|0),n.z=o+((n.z-o)*h/16|0)};hg=(t,i,s,h)=>{if(!h)return;const e=this.dv[t][i][s];if(!e)return;const n=e.Sv;n&&(n.model=h)};og=(t,i,s,h)=>{if(!h)return;const e=this.dv[t][i][s];if(!e)return;const n=e.Ov;n&&(n.model=h)};rg=(t,i,s,h)=>{if(!h)return;const e=this.dv[t][i][s];if(!e)return;const n=e.Rv;n&&(n.Mv=h)};ng=(t,i,s,h,e)=>{if(!h)return;const n=this.dv[s][t][i];if(!n)return;const r=n.Rv;r&&(r.Mv=h,r.kv=e)};jy=(t,i,s,h,e,n,r,o,l,a,c)=>{if(!e&&!n)return!0;const f=128*i+64*l,u=128*s+64*a;return this.xv(f,u,h,t,i,s,l,a,e,n,r,o,c,!1)};WI=(t,i,s,h,e,n,r,o,l,a)=>{if(!e&&!n)return!0;let c=i-l,f=h-l,u=i+l,d=h+l;return a&&(o>640&&o<1408&&(d+=128),o>1152&&o<1920&&(u+=128),(o>1664||o<384)&&(f-=128),o>128&&o<896&&(c-=128)),c=c/128|0,f=f/128|0,u=u/128|0,d=d/128|0,this.xv(i,h,s,t,c,f,u+1-c,d-f+1,e,n,r,0,o,!0)};KI=(t,i,s,h,e,n,r,o,l,a,c,f)=>!l&&!a||this.xv(i,h,s,t,e,n,r+1-e,o-n+1,l,a,c,0,f,!0);sA=(t,i,s)=>{const h=this.dv[t][i][s];if(h)for(let t=0;t<h.vv;t++){const e=h.bv[t];if(e&&2==(e.Dv>>29&3)&&e.Nv===i&&e.Pv===s)return void this.Fv(e)}};sg=(t,i,s,h)=>{if(!h)return;const e=this.dv[t][i][s];if(e)for(let t=0;t<e.vv;t++){const i=e.bv[t];if(i&&2==(i.Dv>>29&3))return void(i.model=h)}};ru=()=>{for(let t=0;t<this.pv;t++){const i=this.Tr[t];i&&this.Fv(i),this.Tr[t]=null}this.pv=0};Dd=(t,i,s)=>{const h=this.dv[t][i][s];return h&&h.Rv?h.Rv.Dv:0};qy=(t,i,s)=>{const h=this.dv[t][s][i];return h&&h.Sv?h.Sv.Dv:0};Vd=(t,i,s)=>{const h=this.dv[t][i][s];if(!h)return 0;for(let t=0;t<h.vv;t++){const e=h.bv[t];if(e&&2==(e.Dv>>29&3)&&e.Nv===i&&e.Pv===s)return e.Dv}return 0};Ld=(t,i,s)=>{const h=this.dv[t][i][s];return h&&h.Ov?h.Ov.Dv:0};Nd=(t,i,s,h)=>{const e=this.dv[t][i][s];if(e){if(e.Rv&&e.Rv.Dv===h)return 255&e.Rv.info;if(e.Sv&&e.Sv.Dv===h)return 255&e.Sv.info;if(e.Ov&&e.Ov.Dv===h)return 255&e.Ov.info;for(let t=0;t<e.vv;t++){const i=e.bv[t];if(i&&i.Dv===h)return 255&i.info}return-1}return-1};yO=(t,i,s,h,e)=>{const n=i*(0|Math.sqrt(s*s+h*h+e*e))>>8;for(let i=0;i<this.fv;i++)for(let r=0;r<this.zI;r++)for(let o=0;o<this.ZI;o++){const l=this.dv[i][r][o];if(!l)continue;const a=l.Rv;a&&a.Mv&&a.Mv.Uv&&(this.Bv(i,r,o,1,1,a.Mv),a.kv&&a.kv.Uv&&(this.Bv(i,r,o,1,1,a.kv),this.Gv(a.Mv,a.kv,0,0,0,!1),a.kv.Hv(t,n,s,h,e)),a.Mv.Hv(t,n,s,h,e));for(let a=0;a<l.vv;a++){const c=l.bv[a];c&&c.model&&c.model.Uv&&(this.Bv(i,r,o,c.Wv+1-c.Nv,c.Yv-c.Pv+1,c.model),c.model.Hv(t,n,s,h,e))}const c=l.Ov;c&&c.model&&c.model.Uv&&(this.Vv(i,r,o,c.model),c.model.Hv(t,n,s,h,e))}};Vv=(t,i,s,h)=>{if(i<this.zI){const e=this.dv[t][i+1][s];e&&e.Ov&&e.Ov.model&&e.Ov.model.Uv&&this.Gv(h,e.Ov.model,128,0,0,!0)}if(s<this.zI){const e=this.dv[t][i][s+1];e&&e.Ov&&e.Ov.model&&e.Ov.model.Uv&&this.Gv(h,e.Ov.model,0,0,128,!0)}if(i<this.zI&&s<this.ZI){const e=this.dv[t][i+1][s+1];e&&e.Ov&&e.Ov.model&&e.Ov.model.Uv&&this.Gv(h,e.Ov.model,128,0,128,!0)}if(i<this.zI&&s>0){const e=this.dv[t][i+1][s-1];e&&e.Ov&&e.Ov.model&&e.Ov.model.Uv&&this.Gv(h,e.Ov.model,128,0,-128,!0)}};Bv=(t,i,s,h,e,n)=>{let r=!0,o=i;const l=i+h,a=s-1,c=s+e;for(let f=t;f<=t+1;f++)if(f!==this.fv){for(let u=o;u<=l;u++)if(!(u<0||u>=this.zI))for(let o=a;o<=c;o++){if(o<0||o>=this.ZI||r&&u<l&&o<c&&(o>=s||u===i))continue;const a=this.dv[f][u][o];if(!a)continue;const d=128*(u-i)+64*(1-h),w=128*(o-s)+64*(1-e),y=((this.uv[f][u][o]+this.uv[f][u+1][o]+this.uv[f][u][o+1]+this.uv[f][u+1][o+1])/4|0)-((this.uv[t][i][s]+this.uv[t][i+1][s]+this.uv[t][i][s+1]+this.uv[t][i+1][s+1])/4|0),A=a.Rv;A&&A.Mv&&A.Mv.Uv&&this.Gv(n,A.Mv,d,y,w,r),A&&A.kv&&A.kv.Uv&&this.Gv(n,A.kv,d,y,w,r);for(let t=0;t<a.vv;t++){const o=a.bv[t];if(!o||!o.model||!o.model.Uv)continue;const l=o.Wv+1-o.Nv,c=o.Yv+1-o.Pv;this.Gv(n,o.model,128*(o.Nv-i)+64*(l-h),y,128*(o.Pv-s)+64*(c-e),r)}}o--,r=!1}};Gv=(t,i,s,h,e,n)=>{this.Iv++;let r=0;const o=i.Q_,l=i.J_;if(t.Uv&&t.Kv)for(let n=0;n<t.J_;n++){const a=t.Uv[n],c=t.Kv[n];if(c&&0!==c.w){const f=t.iC[n]-h;if(f>i.Xv)continue;const u=t.Q_[n]-s;if(u<i.jv||u>i.zv)continue;const d=t.tC[n]-e;if(d<i.Zv||d>i.qv)continue;if(i.Uv&&i.Kv)for(let t=0;t<l;t++){const s=i.Uv[t],h=i.Kv[t];u!==o[t]||d!==i.tC[t]||f!==i.iC[t]||h&&0===h.w||(a&&s&&h&&(a.x+=h.x,a.y+=h.y,a.z+=h.z,a.w+=h.w,s.x+=c.x,s.y+=c.y,s.z+=c.z,s.w+=c.w,r++),this.yv[n]=this.Iv,this.Av[t]=this.Iv)}}}if(!(r<3)&&n){if(t.$v)for(let i=0;i<t.Jv;i++)this.yv[t.Qv[i]]===this.Iv&&this.yv[t.tb[i]]===this.Iv&&this.yv[t.ib[i]]===this.Iv&&(t.$v[i]=-1);if(i.$v)for(let t=0;t<i.Jv;t++)this.Av[i.Qv[t]]===this.Iv&&this.Av[i.tb[t]]===this.Iv&&this.Av[i.ib[t]]===this.Iv&&(i.$v[t]=-1)}};vd=(t,i,s,h,e,n)=>{const r=this.dv[t][i][s];if(!r)return;const o=r._v;if(o){const t=o.color;if(0!==t)for(let i=0;i<4;i++)h[e]=t,h[e+1]=t,h[e+2]=t,h[e+3]=t,e+=n;return}const l=r.Tv;if(!l)return;const a=l.shape,c=l.angle,f=l.sb,u=l.hb,d=I.ov[a],w=I.lv[c];let y=0;if(0===f)for(let t=0;t<4;t++)0!==d[w[y++]]&&(h[e]=u),0!==d[w[y++]]&&(h[e+1]=u),0!==d[w[y++]]&&(h[e+2]=u),0!==d[w[y++]]&&(h[e+3]=u),e+=n;else for(let t=0;t<4;t++)h[e]=0===d[w[y++]]?f:u,h[e+1]=0===d[w[y++]]?f:u,h[e+2]=0===d[w[y++]]?f:u,h[e+3]=0===d[w[y++]]?f:u,e+=n};click=(t,i)=>{I.zO=!0,I.Xl=t,I.jl=i,I.Tf=-1,I.Of=-1};draw=(t,i,s,e,n,r,o)=>{t<0?t=0:t>=128*this.zI&&(t=128*this.zI-1),s<0?s=0:s>=128*this.ZI&&(s=128*this.ZI-1),I.hu++,I.DO=h.A.sin[r],I.NO=h.A.cos[r],I.PO=h.A.sin[n],I.FO=h.A.cos[n],I.ZO=I.EO[(r-128)/32|0][n/64|0],I.UO=t,I.BO=i,I.GO=s,I.HO=t/128|0,I.WO=s/128|0,I.od=e,I.YO=I.HO-25,I.YO<0&&(I.YO=0),I.KO=I.WO-25,I.KO<0&&(I.KO=0),I.VO=I.HO+25,I.VO>this.zI&&(I.VO=this.zI),I.XO=I.WO+25,I.XO>this.ZI&&(I.XO=this.ZI),this.eb(),I.jO=0;for(let t=this.mv;t<this.fv;t++){const s=this.dv[t];for(let h=I.YO;h<I.VO;h++)for(let n=I.KO;n<I.XO;n++){const r=s[h][n];r&&(r.Ev<=e&&(I.ZO[h+25-I.HO][n+25-I.WO]||this.uv[t][h][n]-i>=2e3)?(r.visible=!0,r.update=!0,r.nb=r.vv>0,I.jO++):(r.visible=!1,r.update=!1,r.rb=0))}}for(let t=this.mv;t<this.fv;t++){const i=this.dv[t];for(let t=-25;t<=0;t++){const s=I.HO+t,h=I.HO-t;if(!(s<I.YO&&h>=I.VO))for(let t=-25;t<=0;t++){const e=I.WO+t,n=I.WO-t;let r;if(s>=I.YO&&(e>=I.KO&&(r=i[s][e],r&&r.visible&&this.ob(r,!0,o)),n<I.XO&&(r=i[s][n],r&&r.visible&&this.ob(r,!0,o))),h<I.VO&&(e>=I.KO&&(r=i[h][e],r&&r.visible&&this.ob(r,!0,o)),n<I.XO&&(r=i[h][n],r&&r.visible&&this.ob(r,!0,o))),0===I.jO)return void(I.zO=!1)}}}for(let t=this.mv;t<this.fv;t++){const i=this.dv[t];for(let t=-25;t<=0;t++){const s=I.HO+t,h=I.HO-t;if(!(s<I.YO&&h>=I.VO))for(let t=-25;t<=0;t++){const e=I.WO+t,n=I.WO-t;let r;if(s>=I.YO&&(e>=I.KO&&(r=i[s][e],r&&r.visible&&this.ob(r,!1,o)),n<I.XO&&(r=i[s][n],r&&r.visible&&this.ob(r,!1,o))),h<I.VO&&(e>=I.KO&&(r=i[h][e],r&&r.visible&&this.ob(r,!1,o)),n<I.XO&&(r=i[h][n],r&&r.visible&&this.ob(r,!1,o))),0===I.jO)return void(I.zO=!1)}}}};xv=(t,i,s,h,r,o,l,a,c,f,u,d,w,y)=>{if(!c&&!f)return!1;for(let t=r;t<r+l;t++)for(let i=o;i<o+a;i++){if(t<0||i<0||t>=this.zI||i>=this.ZI)return!1;const s=this.dv[h][t][i];if(s&&s.vv>=5)return!1}const A=new e.A(h,s,t,i,c,f,w,r,r+l-1,o,o+a-1,u,d);for(let t=r;t<r+l;t++)for(let i=o;i<o+a;i++){let s=0;t>r&&(s|=1),t<r+l-1&&(s+=4),i>o&&(s+=8),i<o+a-1&&(s+=2);for(let s=h;s>=0;s--)this.dv[s][t][i]||(this.dv[s][t][i]=new n.A(s,t,i));const e=this.dv[h][t][i];e&&(e.bv[e.vv]=A,e.lb[e.vv]=s,e.ab|=s,e.vv++)}return y&&(this.Tr[this.pv++]=A),!0};Fv=t=>{for(let i=t.Nv;i<=t.Wv;i++)for(let s=t.Pv;s<=t.Yv;s++){const h=this.dv[t.level][i][s];if(h){for(let i=0;i<h.vv;i++)if(h.bv[i]===t){h.vv--;for(let t=i;t<h.vv;t++)h.bv[t]=h.bv[t+1],h.lb[t]=h.lb[t+1];h.bv[h.vv]=null;break}h.ab=0;for(let t=0;t<h.vv;t++)h.ab|=h.lb[t]}}};eb=()=>{const t=I.rd[I.od],i=I.TO[I.od];I.ld=0;for(let s=0;s<t;s++){const t=i[s];if(!t)continue;let h,e,n,r;if(1===t.type){if(h=t.XI+25-I.HO,h>=0&&h<=50){e=t.jI+25-I.WO,e<0&&(e=0),n=t.ZI+25-I.WO,n>50&&(n=50);let i=!1;for(;e<=n;)if(I.ZO&&I.ZO[h][e++]){i=!0;break}if(i){if(r=I.UO-t.jv,r>32)t.mode=1;else{if(r>=-32)continue;t.mode=2,r=-r}t.cb=(t.Zv-I.GO<<8)/r|0,t.fb=(t.qv-I.GO<<8)/r|0,t.ub=(t.Xv-I.BO<<8)/r|0,t.wb=(t.lC-I.BO<<8)/r|0,I.vO[I.ld++]=t}}}else if(2===t.type){if(h=t.jI+25-I.WO,h>=0&&h<=50){e=t.XI+25-I.HO,e<0&&(e=0),n=t.zI+25-I.HO,n>50&&(n=50);let i=!1;for(;e<=n;)if(I.ZO&&I.ZO[e++][h]){i=!0;break}if(i){if(r=I.GO-t.Zv,r>32)t.mode=3;else{if(r>=-32)continue;t.mode=4,r=-r}t.yb=(t.jv-I.UO<<8)/r|0,t.Ab=(t.zv-I.UO<<8)/r|0,t.ub=(t.Xv-I.BO<<8)/r|0,t.wb=(t.lC-I.BO<<8)/r|0,I.vO[I.ld++]=t}}}else if(4===t.type&&(h=t.Xv-I.BO,h>128&&(e=t.jI+25-I.WO,e<0&&(e=0),n=t.ZI+25-I.WO,n>50&&(n=50),e<=n))){let i=t.XI+25-I.HO;i<0&&(i=0),r=t.zI+25-I.HO,r>50&&(r=50);let s=!1;t:for(let t=i;t<=r;t++)for(let i=e;i<=n;i++)if(I.ZO&&I.ZO[t][i]){s=!0;break t}s&&(t.mode=5,t.yb=(t.jv-I.UO<<8)/h|0,t.Ab=(t.zv-I.UO<<8)/h|0,t.cb=(t.Zv-I.GO<<8)/h|0,t.fb=(t.qv-I.GO<<8)/h|0,I.vO[I.ld++]=t)}}};ob=(t,i,s)=>{for(I.bO.Ig(t);;){let t;do{if(t=I.bO.pb(),!t)return}while(!t.update);const h=t.x,e=t.z,n=t.level,r=t.mb,o=this.dv[n];if(t.visible){if(i){if(n>0){const t=this.dv[n-1][h][e];if(t&&t.update)continue}if(h<=I.HO&&h>I.YO){const i=o[h-1][e];if(i&&i.update&&(i.visible||!(1&t.ab)))continue}if(h>=I.HO&&h<I.VO-1){const i=o[h+1][e];if(i&&i.update&&(i.visible||!(4&t.ab)))continue}if(e<=I.WO&&e>I.KO){const i=o[h][e-1];if(i&&i.update&&(i.visible||!(8&t.ab)))continue}if(e>=I.WO&&e<I.XO-1){const i=o[h][e+1];if(i&&i.update&&(i.visible||!(2&t.ab)))continue}}else i=!0;if(t.visible=!1,t.gv){const i=t.gv;i._v?this.Ib(0,h,e)||this.gb(i._v,0,h,e,I.DO,I.NO,I.PO,I.FO):i.Tv&&!this.Ib(0,h,e)&&this.Eb(h,e,i.Tv,I.DO,I.NO,I.PO,I.FO);const n=i.Rv;n&&n.Mv?.draw(0,I.DO,I.NO,I.PO,I.FO,n.x-I.UO,n.y-I.BO,n.z-I.GO,n.Dv);for(let t=0;t<i.vv;t++){const h=i.bv[t];if(h){let t=h.model;t||(t=h._b?.draw(s)??null),t?.draw(h.YI,I.DO,I.NO,I.PO,I.FO,h.x-I.UO,h.y-I.BO,h.z-I.GO,h.Dv)}}}let l=!1;t._v?this.Ib(r,h,e)||(l=!0,this.gb(t._v,r,h,e,I.DO,I.NO,I.PO,I.FO)):t.Tv&&!this.Ib(r,h,e)&&(l=!0,this.Eb(h,e,t.Tv,I.DO,I.NO,I.PO,I.FO));let a=0,c=0;const f=t.Rv,u=t.Sv;if((f||u)&&(I.HO===h?a+=1:I.HO<h&&(a+=2),I.WO===e?a+=3:I.WO>e&&(a+=6),c=I.qO[a],t.Cb=I.JO[a]),f&&(f.Tb&I.$O[a]?16===f.Tb?(t.rb=3,t.Ob=I.QO[a],t.vb=3-t.Ob):32===f.Tb?(t.rb=6,t.Ob=I.tv[a],t.vb=6-t.Ob):64===f.Tb?(t.rb=12,t.Ob=I.iv[a],t.vb=12-t.Ob):(t.rb=9,t.Ob=I.sv[a],t.vb=9-t.Ob):t.rb=0,f.Tb&c&&!this.bb(r,h,e,f.Tb)&&f.Mv?.draw(0,I.DO,I.NO,I.PO,I.FO,f.x-I.UO,f.y-I.BO,f.z-I.GO,f.Dv),f.Lb&c&&!this.bb(r,h,e,f.Lb)&&f.kv?.draw(0,I.DO,I.NO,I.PO,I.FO,f.x-I.UO,f.y-I.BO,f.z-I.GO,f.Dv)),u&&!this.visible(r,h,e,u.model.lC))if(u.type&c)u.model.draw(u.angle,I.DO,I.NO,I.PO,I.FO,u.x-I.UO,u.y-I.BO,u.z-I.GO,u.Dv);else if(768&u.type){const t=u.x-I.UO,i=u.y-I.BO,s=u.z-I.GO,h=u.angle;let e,n;if(e=h===p.A.Gd||h===p.A.Hd?-t:t,n=h===p.A.Hd||h===p.A.Wd?-s:s,256&u.type&&n<e){const e=t+I.hv[h],n=s+I.ev[h];u.model.draw(512*h+256,I.DO,I.NO,I.PO,I.FO,e,i,n,u.Dv)}if(512&u.type&&n>e){const e=t+I.nv[h],n=s+I.rv[h];u.model.draw(512*h+1280&2047,I.DO,I.NO,I.PO,I.FO,e,i,n,u.Dv)}}if(l){const i=t.Ov;i&&i.model?.draw(0,I.DO,I.NO,I.PO,I.FO,i.x-I.UO,i.y-I.BO,i.z-I.GO,i.Dv);const s=t.Lv;s&&0===s.offset&&(s.Rb&&s.Rb.draw(0,I.DO,I.NO,I.PO,I.FO,s.x-I.UO,s.y-I.BO,s.z-I.GO,s.Dv),s.Sb&&s.Sb.draw(0,I.DO,I.NO,I.PO,I.FO,s.x-I.UO,s.y-I.BO,s.z-I.GO,s.Dv),s.Mb&&s.Mb.draw(0,I.DO,I.NO,I.PO,I.FO,s.x-I.UO,s.y-I.BO,s.z-I.GO,s.Dv))}const d=t.ab;if(0!==d){if(h<I.HO&&4&d){const t=o[h+1][e];t&&t.update&&I.bO.Ig(t)}if(e<I.WO&&2&d){const t=o[h][e+1];t&&t.update&&I.bO.Ig(t)}if(h>I.HO&&1&d){const t=o[h-1][e];t&&t.update&&I.bO.Ig(t)}if(e>I.WO&&8&d){const t=o[h][e-1];t&&t.update&&I.bO.Ig(t)}}}if(0!==t.rb){let i=!0;for(let s=0;s<t.vv;s++){const h=t.bv[s];if(h&&(h.hu!==I.hu&&(t.lb[s]&t.rb)===t.Ob)){i=!1;break}}if(i){const i=t.Rv;i&&!this.bb(r,h,e,i.Tb)&&i.Mv?.draw(0,I.DO,I.NO,I.PO,I.FO,i.x-I.UO,i.y-I.BO,i.z-I.GO,i.Dv),t.rb=0}}if(t.nb){const i=t.vv;t.nb=!1;let n=0;t:for(let s=0;s<i;s++){const i=t.bv[s];if(!i||i.hu===I.hu)continue;for(let s=i.Nv;s<=i.Wv;s++)for(let h=i.Pv;h<=i.Yv;h++){const e=o[s][h];if(e){if(!e.visible){if(0===e.rb)continue;let n=0;if(s>i.Nv&&(n+=1),s<i.Wv&&(n+=4),h>i.Pv&&(n+=8),h<i.Yv&&(n+=2),(n&e.rb)!==t.vb)continue}t.nb=!0;continue t}}I.CO[n++]=i;let h=I.HO-i.Nv;const e=i.Wv-I.HO;e>h&&(h=e);const r=I.WO-i.Pv,l=i.Yv-I.WO;i.kb=l>r?h+l:h+r}for(;;){let t=-50,i=-1;for(let s=0;s<n;s++){const h=I.CO[s];h&&(h.hu!==I.hu&&h.kb>t&&(t=h.kb,i=s))}if(-1===i)break;const l=I.CO[i];if(l){l.hu=I.hu;let t=l.model;t||(t=l._b?.draw(s)??null),t&&!this.xb(r,l.Nv,l.Wv,l.Pv,l.Yv,t.lC)&&t.draw(l.YI,I.DO,I.NO,I.PO,I.FO,l.x-I.UO,l.y-I.BO,l.z-I.GO,l.Dv);for(let t=l.Nv;t<=l.Wv;t++)for(let i=l.Pv;i<=l.Yv;i++){const s=o[t][i];s&&(0!==s.rb?I.bO.Ig(s):t===h&&i===e||!s.update||I.bO.Ig(s))}}}if(t.nb)continue}if(!t.update||0!==t.rb)continue;if(h<=I.HO&&h>I.YO){const t=o[h-1][e];if(t&&t.update)continue}if(h>=I.HO&&h<I.VO-1){const t=o[h+1][e];if(t&&t.update)continue}if(e<=I.WO&&e>I.KO){const t=o[h][e-1];if(t&&t.update)continue}if(e>=I.WO&&e<I.XO-1){const t=o[h][e+1];if(t&&t.update)continue}t.update=!1,I.jO--;const l=t.Lv;if(l&&0!==l.offset&&(l.Rb&&l.Rb.draw(0,I.DO,I.NO,I.PO,I.FO,l.x-I.UO,l.y-I.BO-l.offset,l.z-I.GO,l.Dv),l.Sb&&l.Sb.draw(0,I.DO,I.NO,I.PO,I.FO,l.x-I.UO,l.y-I.BO-l.offset,l.z-I.GO,l.Dv),l.Mb&&l.Mb.draw(0,I.DO,I.NO,I.PO,I.FO,l.x-I.UO,l.y-I.BO-l.offset,l.z-I.GO,l.Dv)),0!==t.Cb){const i=t.Sv;if(i&&!this.visible(r,h,e,i.model.lC))if(i.type&t.Cb)i.model.draw(i.angle,I.DO,I.NO,I.PO,I.FO,i.x-I.UO,i.y-I.BO,i.z-I.GO,i.Dv);else if(768&i.type){const t=i.x-I.UO,s=i.y-I.BO,h=i.z-I.GO,e=i.angle;let n,r;if(n=e===p.A.Gd||e===p.A.Hd?-t:t,r=e===p.A.Hd||e===p.A.Wd?-h:h,256&i.type&&r>=n){const n=t+I.hv[e],r=h+I.ev[e];i.model.draw(512*e+256,I.DO,I.NO,I.PO,I.FO,n,s,r,i.Dv)}if(512&i.type&&r<=n){const n=t+I.nv[e],r=h+I.rv[e];i.model.draw(512*e+1280&2047,I.DO,I.NO,I.PO,I.FO,n,s,r,i.Dv)}}const s=t.Rv;s&&(s.Lb&t.Cb&&!this.bb(r,h,e,s.Lb)&&s.kv?.draw(0,I.DO,I.NO,I.PO,I.FO,s.x-I.UO,s.y-I.BO,s.z-I.GO,s.Dv),s.Tb&t.Cb&&!this.bb(r,h,e,s.Tb)&&s.Mv?.draw(0,I.DO,I.NO,I.PO,I.FO,s.x-I.UO,s.y-I.BO,s.z-I.GO,s.Dv))}if(n<this.fv-1){const t=this.dv[n+1][h][e];t&&t.update&&I.bO.Ig(t)}if(h<I.HO){const t=o[h+1][e];t&&t.update&&I.bO.Ig(t)}if(e<I.WO){const t=o[h][e+1];t&&t.update&&I.bO.Ig(t)}if(h>I.HO){const t=o[h-1][e];t&&t.update&&I.bO.Ig(t)}if(e>I.WO){const t=o[h][e-1];t&&t.update&&I.bO.Ig(t)}}};gb=(t,i,s,e,n,r,o,l)=>{let a,c,f,u,d=a=(s<<7)-I.UO,y=c=(e<<7)-I.GO,A=f=d+128,p=u=y+128,m=this.uv[i][s][e]-I.BO,g=this.uv[i][s+1][e]-I.BO,E=this.uv[i][s+1][e+1]-I.BO,_=this.uv[i][s][e+1]-I.BO,C=y*o+d*l>>16;if(y=y*l-d*o>>16,d=C,C=m*r-y*n>>16,y=m*n+y*r>>16,m=C,y<50)return;if(C=c*o+A*l>>16,c=c*l-A*o>>16,A=C,C=g*r-c*n>>16,c=g*n+c*r>>16,g=C,c<50)return;if(C=p*o+f*l>>16,p=p*l-f*o>>16,f=C,C=E*r-p*n>>16,p=E*n+p*r>>16,E=C,p<50)return;if(C=u*o+a*l>>16,u=u*l-a*o>>16,a=C,C=_*r-u*n>>16,u=_*n+u*r>>16,_=C,u<50)return;const T=h.A.ma+((d<<9)/y|0),O=h.A.Ia+((m<<9)/y|0),v=h.A.ma+((A<<9)/c|0),b=h.A.Ia+((g<<9)/c|0),L=h.A.ma+((f<<9)/p|0),R=h.A.Ia+((E<<9)/p|0),S=h.A.ma+((a<<9)/u|0),M=h.A.Ia+((_<<9)/u|0);if(h.A.alpha=0,(L-S)*(b-M)-(R-M)*(v-S)>0)if(h.A.Db=L<0||S<0||v<0||L>w.A.Nb||S>w.A.Nb||v>w.A.Nb,I.zO&&this.Pb(I.Xl,I.jl,R,M,b,L,S,v)&&(I.Tf=s,I.Of=e),-1===t.Fb)12345678!==t.Ub&&h.A.Bb(L,S,v,R,M,b,t.Ub,t.Gb,t.Hb);else if(I.st){const i=I.av[t.Fb];h.A.Bb(L,S,v,R,M,b,this.Wb(i,t.Ub),this.Wb(i,t.Gb),this.Wb(i,t.Hb))}else t.flat?h.A.Yb(L,S,v,R,M,b,t.Ub,t.Gb,t.Hb,d,m,y,A,a,g,_,c,u,t.Fb):h.A.Yb(L,S,v,R,M,b,t.Ub,t.Gb,t.Hb,f,E,p,a,A,_,g,u,c,t.Fb);if(!((T-v)*(M-b)-(O-b)*(S-v)<=0))if(h.A.Db=T<0||v<0||S<0||T>w.A.Nb||v>w.A.Nb||S>w.A.Nb,I.zO&&this.Pb(I.Xl,I.jl,O,b,M,T,v,S)&&(I.Tf=s,I.Of=e),-1!==t.Fb){if(!I.st)return void h.A.Yb(T,v,S,O,b,M,t.Vb,t.Hb,t.Gb,d,m,y,A,a,g,_,c,u,t.Fb);const i=I.av[t.Fb];h.A.Bb(T,v,S,O,b,M,this.Wb(i,t.Vb),this.Wb(i,t.Hb),this.Wb(i,t.Gb))}else 12345678!==t.Vb&&h.A.Bb(T,v,S,O,b,M,t.Vb,t.Hb,t.Gb)};Eb=(t,i,s,e,n,r,o)=>{let l=s.Q_.length;for(let t=0;t<l;t++){let i=s.Q_[t]-I.UO,l=s.iC[t]-I.BO,a=s.tC[t]-I.GO,c=a*r+i*o>>16;if(a=a*o-i*r>>16,i=c,c=l*n-a*e>>16,a=l*e+a*n>>16,l=c,a<50)return;s.Kb&&(y.A.Xb[t]=i,y.A.jb[t]=l,y.A.zb[t]=a),y.A.Zb[t]=h.A.ma+((i<<9)/a|0),y.A.qb[t]=h.A.Ia+((l<<9)/a|0)}h.A.alpha=0,l=s.$b.length;for(let e=0;e<l;e++){const n=s.$b[e],r=s.Jb[e],o=s.Qb[e],l=y.A.Zb[n],a=y.A.Zb[r],c=y.A.Zb[o],f=y.A.qb[n],u=y.A.qb[r],d=y.A.qb[o];if((l-a)*(d-u)-(f-u)*(c-a)>0)if(h.A.Db=l<0||a<0||c<0||l>w.A.Nb||a>w.A.Nb||c>w.A.Nb,I.zO&&this.Pb(I.Xl,I.jl,f,u,d,l,a,c)&&(I.Tf=t,I.Of=i),s.Kb&&-1!==s.Kb[e])if(I.st){const t=I.av[s.Kb[e]];h.A.Bb(l,a,c,f,u,d,this.Wb(t,s.tL[e]),this.Wb(t,s.iL[e]),this.Wb(t,s.sL[e]))}else s.flat?h.A.Yb(l,a,c,f,u,d,s.tL[e],s.iL[e],s.sL[e],y.A.Xb[0],y.A.jb[0],y.A.zb[0],y.A.Xb[1],y.A.Xb[3],y.A.jb[1],y.A.jb[3],y.A.zb[1],y.A.zb[3],s.Kb[e]):h.A.Yb(l,a,c,f,u,d,s.tL[e],s.iL[e],s.sL[e],y.A.Xb[n],y.A.jb[n],y.A.zb[n],y.A.Xb[r],y.A.Xb[o],y.A.jb[r],y.A.jb[o],y.A.zb[r],y.A.zb[o],s.Kb[e]);else 12345678!==s.tL[e]&&h.A.Bb(l,a,c,f,u,d,s.tL[e],s.iL[e],s.sL[e])}};Ib=(t,i,s)=>{const h=this.wv[t][i][s];if(h===-I.hu)return!1;if(h===I.hu)return!0;{const h=i<<7,e=s<<7;return this.hL(h+1,this.uv[t][i][s],e+1)&&this.hL(h+128-1,this.uv[t][i+1][s],e+1)&&this.hL(h+128-1,this.uv[t][i+1][s+1],e+128-1)&&this.hL(h+1,this.uv[t][i][s+1],e+128-1)?(this.wv[t][i][s]=I.hu,!0):(this.wv[t][i][s]=-I.hu,!1)}};bb=(t,i,s,h)=>{if(!this.Ib(t,i,s))return!1;const e=i<<7,n=s<<7,r=this.uv[t][i][s]-1,o=r-120,l=r-230,a=r-238;if(h<16){if(1===h){if(e>I.UO){if(!this.hL(e,r,n))return!1;if(!this.hL(e,r,n+128))return!1}if(t>0){if(!this.hL(e,o,n))return!1;if(!this.hL(e,o,n+128))return!1}return!!this.hL(e,l,n)&&this.hL(e,l,n+128)}if(2===h){if(n<I.GO){if(!this.hL(e,r,n+128))return!1;if(!this.hL(e+128,r,n+128))return!1}if(t>0){if(!this.hL(e,o,n+128))return!1;if(!this.hL(e+128,o,n+128))return!1}return!!this.hL(e,l,n+128)&&this.hL(e+128,l,n+128)}if(4===h){if(e<I.UO){if(!this.hL(e+128,r,n))return!1;if(!this.hL(e+128,r,n+128))return!1}if(t>0){if(!this.hL(e+128,o,n))return!1;if(!this.hL(e+128,o,n+128))return!1}return!!this.hL(e+128,l,n)&&this.hL(e+128,l,n+128)}if(8===h){if(n>I.GO){if(!this.hL(e,r,n))return!1;if(!this.hL(e+128,r,n))return!1}if(t>0){if(!this.hL(e,o,n))return!1;if(!this.hL(e+128,o,n))return!1}return!!this.hL(e,l,n)&&this.hL(e+128,l,n)}}return!!this.hL(e+64,a,n+64)&&(16===h?this.hL(e,l,n+128):32===h?this.hL(e+128,l,n+128):64===h?this.hL(e+128,l,n):128===h?this.hL(e,l,n):(console.warn('Warning unsupported wall type!'),!0))};visible=(t,i,s,h)=>{if(this.Ib(t,i,s)){const e=i<<7,n=s<<7;return this.hL(e+1,this.uv[t][i][s]-h,n+1)&&this.hL(e+128-1,this.uv[t][i+1][s]-h,n+1)&&this.hL(e+128-1,this.uv[t][i+1][s+1]-h,n+128-1)&&this.hL(e+1,this.uv[t][i][s+1]-h,n+128-1)}return!1};xb=(t,i,s,h,e,n)=>{let r,o;if(i!==s||h!==e){for(r=i;r<=s;r++)for(o=h;o<=e;o++)if(this.wv[t][r][o]===-I.hu)return!1;o=1+(i<<7);const l=2+(h<<7),a=this.uv[t][i][h]-n;if(!this.hL(o,a,l))return!1;const c=(s<<7)-1;if(!this.hL(c,a,l))return!1;const f=(e<<7)-1;return!!this.hL(o,a,f)&&this.hL(c,a,f)}return!!this.Ib(t,i,h)&&(r=i<<7,o=h<<7,this.hL(r+1,this.uv[t][i][h]-n,o+1)&&this.hL(r+128-1,this.uv[t][i+1][h]-n,o+1)&&this.hL(r+128-1,this.uv[t][i+1][h+1]-n,o+128-1)&&this.hL(r+1,this.uv[t][i][h+1]-n,o+128-1))};hL=(t,i,s)=>{for(let h=0;h<I.ld;h++){const e=I.vO[h];if(e)if(1===e.mode){const h=e.jv-t;if(h>0){const t=e.Zv+(e.cb*h>>8),n=e.qv+(e.fb*h>>8),r=e.Xv+(e.ub*h>>8),o=e.lC+(e.wb*h>>8);if(s>=t&&s<=n&&i>=r&&i<=o)return!0}}else if(2===e.mode){const h=t-e.jv;if(h>0){const t=e.Zv+(e.cb*h>>8),n=e.qv+(e.fb*h>>8),r=e.Xv+(e.ub*h>>8),o=e.lC+(e.wb*h>>8);if(s>=t&&s<=n&&i>=r&&i<=o)return!0}}else if(3===e.mode){const h=e.Zv-s;if(h>0){const s=e.jv+(e.yb*h>>8),n=e.zv+(e.Ab*h>>8),r=e.Xv+(e.ub*h>>8),o=e.lC+(e.wb*h>>8);if(t>=s&&t<=n&&i>=r&&i<=o)return!0}}else if(4===e.mode){const h=s-e.Zv;if(h>0){const s=e.jv+(e.yb*h>>8),n=e.zv+(e.Ab*h>>8),r=e.Xv+(e.ub*h>>8),o=e.lC+(e.wb*h>>8);if(t>=s&&t<=n&&i>=r&&i<=o)return!0}}else if(5===e.mode){const h=i-e.Xv;if(h>0){const i=e.jv+(e.yb*h>>8),n=e.zv+(e.Ab*h>>8),r=e.Zv+(e.cb*h>>8),o=e.qv+(e.fb*h>>8);if(t>=i&&t<=n&&s>=r&&s<=o)return!0}}}return!1};Pb=(t,i,s,h,e,n,r,o)=>{if(i<s&&i<h&&i<e)return!1;if(i>s&&i>h&&i>e)return!1;if(t<n&&t<r&&t<o)return!1;if(t>n&&t>r&&t>o)return!1;const l=(i-h)*(o-r)-(t-r)*(e-h);return((i-s)*(r-n)-(t-n)*(h-s))*l>0&&l*((i-e)*(n-o)-(t-o)*(s-e))>0};Wb=(t,i)=>((i=(127-i)*(127&t)/160|0)<2?i=2:i>126&&(i=126),(65408&t)+i)}},7121:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{}},4197:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{nm;ig;sm;hm;index;tg;Ol;Tl;constructor(t,i,s,h,e,n,r){super(),this.nm=i,this.ig=s,this.sm=h,this.hm=e,this.index=t,this.tg=n,r&&-1!==n.bl&&this.tg.delay?(this.Ol=Math.random()*this.tg.vl|0,this.Tl=Math.random()*this.tg.delay[this.Ol]|0):(this.Ol=-1,this.Tl=0)}}},8412:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(9418),e=s(8665),n=s(8738),r=s(1312);class o extends h.A{static Fu=2;static Bu=4;static Hu=8;static Wu=16;static qu=32;static ju=64;static Yu=128;type=null;draw(t){if(!this.type)return null;if(-1===this.zu||-1===this.fI)return this.fC();const i=this.fC();if(!i)return null;const s=n.A.Fo[this.zu],h=e.A.l_(s.Ea(),!0,!s.F_,!1);h.translate(-this.aI,0,0),h.Va(),s.tg&&s.tg.frames&&h.Ka(s.tg.frames[this.fI]),h.eC=null,h.nC=null,128===s.aC&&128===s.cC||h.scale(s.aC,s.cC,s.aC),h.Xa(64+s.B_,850+s.G_,-30,-50,-30,!0);const r=[i,h],o=e.A.eL(r,2);return 1===this.type.size&&(o.yC=!0),o}isVisible(){return null!==this.type}fC(){if(!this.type)return null;if(this.Uu>=0&&0===this.rI){const t=r.A.Fo[this.Uu].frames;if(t){const i=t[this.eI];let s=-1;if(this.UI>=0&&this.UI!==this.Ya){const t=r.A.Fo[this.UI].frames;t&&(s=t[this.dg])}return this.type.fC(i,s,r.A.Fo[this.Uu].Ag)}}let t=-1;if(this.UI>=0){const i=r.A.Fo[this.UI].frames;i&&(t=i[this.dg])}const i=this.type.fC(t,-1,null);return i?(this.height=i.lC,i):null}}},3606:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{index;count;constructor(t,i){super(),this.index=t,this.count=i}}},9418:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(7121),e=s(1312),n=s(3867);class r extends h.A{x=0;z=0;YI=0;VI=!1;size=1;Ya=-1;fg=-1;EI=-1;CI=-1;OI=-1;bI=-1;mg=-1;gu=null;Ou=100;Cu=0;Tu=0;Su=0;Ru=0;vu=-1e3;bu=0;Lu=0;Gu=-1;oI=0;lI=0;UI=-1;dg=0;ug=0;Uu=-1;eI=0;nI=0;rI=0;hI=0;zu=-1;fI=0;uI=0;cI=0;aI=0;dI=0;yI=0;wI=0;AI=0;Mu=0;ku=0;pI=0;hu=0;height=0;cg=0;pathLength=0;bf=new Int32Array(10);Lf=new Int32Array(10);pg=new n.As(10,!1);ag=0;Du=-1;Nu=-1;Vu=-1;Ku=-1;move(t,i,s){if(-1!==this.Uu&&e.A.Fo[this.Uu].priority<=1&&(this.Uu=-1),!t){const t=i-this.bf[0],h=s-this.Lf[0];if(t>=-8&&t<=8&&h>=-8&&h<=8){this.pathLength<9&&this.pathLength++;for(let t=this.pathLength;t>0;t--)this.bf[t]=this.bf[t-1],this.Lf[t]=this.Lf[t-1],this.pg[t]=this.pg[t-1];return this.bf[0]=i,this.Lf[0]=s,void(this.pg[0]=!1)}}this.pathLength=0,this.ag=0,this.bf[0]=i,this.Lf[0]=s,this.x=128*this.bf[0]+64*this.size,this.z=128*this.Lf[0]+64*this.size}step(t,i){let s=this.bf[0],h=this.Lf[0];0===i?(s--,h++):1===i?h++:2===i?(s++,h++):3===i?s--:4===i?s++:5===i?(s--,h--):6===i?h--:7===i&&(s++,h--),-1!==this.Uu&&e.A.Fo[this.Uu].priority<=1&&(this.Uu=-1),this.pathLength<9&&this.pathLength++;for(let t=this.pathLength;t>0;t--)this.bf[t]=this.bf[t-1],this.Lf[t]=this.Lf[t-1],this.pg[t]=this.pg[t-1];this.bf[0]=s,this.Lf[0]=h,this.pg[0]=t}}},8268:(t,i,s)=>{s.d(i,{A:()=>d});var h=s(9418),e=s(8665),n=s(2679),r=s(8738),o=s(1312),l=s(8317),a=s(1302),c=s(3819),f=s(3867),u=s(9298);class d extends h.A{static Pu=1;static Fu=2;static Bu=4;static Hu=8;static Wu=16;static Yu=32;static Xu=64;static iI=128;static ju=256;static Zu=512;static Wa=[u.A.nL,u.A.rL,u.A.oL,u.A.lL,u.A.aL,u.A.cL,u.A.fL,u.A.uL,u.A.dL,u.A.wL,u.A.yL,u.A.pL,u.A.mL,u.A.IL,u.A.gL,u.A.EL];static Ha=[[u.A._L,u.A.CL,u.A.TL,u.A.OL,u.A.vL,u.A.bL,u.A.LL,u.A.RL,u.A.SL,u.A.ML,u.A.kL,u.A.xL],[u.A.DL,u.A.NL,u.A.PL,u.A.FL,u.A.UL,u.A.BL,u.A.HL,u.A.WL,u.A.YL,u.A.VL,u.A.KL,u.A.XL,u.A.jL,u.A.zL,u.A.ZL,u.A.qL],[u.A.qL-1,u.A.DL+1,u.A.NL,u.A.PL,u.A.FL,u.A.UL,u.A.BL,u.A.HL,u.A.WL,u.A.YL,u.A.VL,u.A.KL,u.A.XL,u.A.jL,u.A.zL,u.A.ZL],[u.A.$L,u.A.JL,u.A.QL,u.A.tR,u.A.iR,u.A.sR],[u.A.hR,u.A.eR,u.A.nR,u.A.rR,u.A.oR,u.A.lR,u.A.aR,u.A.cR]];static Uo=new n.A(200);name=null;visible=!1;fR=0;Iu=0;uR=new Uint16Array(12);dR=new Uint16Array(5);ec=0;wR=0n;y=0;GI=0;HI=0;gg=0;_g=0;Eg=0;BI=null;XI=0;jI=0;zI=0;ZI=0;st=!1;draw(t){if(!this.visible)return null;let i=this.fC();if(this.height=i.lC,i.yC=!0,this.st)return i;if(-1!==this.zu&&-1!==this.fI){const t=r.A.Fo[this.zu],s=e.A.l_(t.Ea(),!0,!t.F_,!1);s.translate(-this.aI,0,0),s.Va(),t.tg&&t.tg.frames&&s.Ka(t.tg.frames[this.fI]),s.eC=null,s.nC=null,128===t.aC&&128===t.cC||s.scale(t.aC,t.cC,t.aC),s.Xa(t.B_+64,t.G_+850,-30,-50,-30,!0);const h=[i,s];i=e.A.eL(h,2)}if(this.BI&&(t>=this.HI&&(this.BI=null),t>=this.GI&&t<this.HI)){const t=this.BI;if(t){t.translate(this._g-this.y,this.gg-this.x,this.Eg-this.z),512===this.cg?(t.rC(),t.rC(),t.rC()):1024===this.cg?(t.rC(),t.rC()):1536===this.cg&&t.rC();const s=[i,t];i=e.A.eL(s,2),512===this.cg?t.rC():1024===this.cg?(t.rC(),t.rC()):1536===this.cg&&(t.rC(),t.rC(),t.rC()),t.translate(this.y-this._g,this.x-this.gg,this.z-this.Eg)}}return i.yC=!0,i}isVisible(){return this.visible}read(t){t.qc=0,this.fR=t.fA,this.Iu=t.fA;for(let i=0;i<12;i++){const s=t.fA;this.uR[i]=0===s?0:(s<<8)+t.fA}for(let i=0;i<5;i++){let s=t.fA;(s<0||s>=d.Ha[i].length)&&(s=0),this.dR[i]=s}this.Ya=t.aA,65535===this.Ya&&(this.Ya=-1),this.fg=t.aA,65535===this.fg&&(this.fg=-1),this.EI=t.aA,65535===this.EI&&(this.EI=-1),this.CI=t.aA,65535===this.CI&&(this.CI=-1),this.OI=t.aA,65535===this.OI&&(this.OI=-1),this.bI=t.aA,65535===this.bI&&(this.bI=-1),this.mg=t.aA,65535===this.mg&&(this.mg=-1),this.name=c.A.Na(c.A.Pa(t.$c)),this.ec=t.fA,this.visible=!0,this.wR=0n;for(let t=0;t<12;t++)this.wR<<=0x4n,this.uR[t]>=256&&(this.wR+=BigInt(this.uR[t])-256n);this.uR[0]>=256&&(this.wR+=BigInt(this.uR[0])-256n>>4n),this.uR[1]>=256&&(this.wR+=BigInt(this.uR[1])-256n>>8n);for(let t=0;t<5;t++)this.wR<<=0x3n,this.wR+=BigInt(this.dR[t]);this.wR<<=0x1n,this.wR+=BigInt(this.fR)}CA(){if(!this.visible)return null;const t=new f.As(12,null);let i=0;for(let s=0;s<12;s++){const h=this.uR[s];if(h>=256&&h<512&&(t[i++]=l.A.Fo[h-256].CA()),h>=512){const s=a.A.get(h-512).CA(this.fR);s&&(t[i++]=s)}}const s=e.A.Ba(t,i);for(let t=0;t<5;t++)0!==this.dR[t]&&(s.Ga(d.Ha[t][0],d.Ha[t][this.dR[t]]),1===t&&s.Ga(d.Wa[0],d.Wa[this.dR[t]]));return s}fC(){let t=this.wR,i=-1,s=-1,h=-1,n=-1;if(this.Uu>=0&&0===this.rI){const e=o.A.Fo[this.Uu];if(e.frames&&(i=e.frames[this.eI]),this.UI>=0&&this.UI!==this.Ya){const t=o.A.Fo[this.UI].frames;t&&(s=t[this.dg])}e.VC>=0&&(h=e.VC,t+=BigInt(h-this.uR[5])<<8n),e.KC>=0&&(n=e.KC,t+=BigInt(n-this.uR[3])<<16n)}else if(this.UI>=0){const t=o.A.Fo[this.UI].frames;t&&(i=t[this.dg])}let r=d.Uo?.get(t);if(!r){const i=new f.As(12,null);let s=0;for(let t=0;t<12;t++){let e=this.uR[t];if(n>=0&&3===t&&(e=n),h>=0&&5===t&&(e=h),e>=256&&e<512){const t=l.A.Fo[e-256].Ea();t&&(i[s++]=t)}if(e>=512){const t=a.A.get(e-512).YC(this.fR);t&&(i[s++]=t)}}r=e.A.Ba(i,s);for(let t=0;t<5;t++)0!==this.dR[t]&&(r.Ga(d.Ha[t][0],d.Ha[t][this.dR[t]]),1===t&&r.Ga(d.Wa[0],d.Wa[this.dR[t]]));r.Va(),r.Xa(64,850,-30,-50,-30,!0),d.Uo?.put(t,r)}if(this.st)return r;const c=e.A.uC(r,!0);return-1!==i&&-1!==s?c.dC(i,s,o.A.Fo[this.Uu].Ag):-1!==i&&c.Ka(i),c.wC(),c.eC=null,c.nC=null,c}}},254:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(8738),e=s(7121),n=s(8665);class r extends e.A{yR;level;AR;pR;mR;offsetY;$I;qI;IR;arc;target;mobile=!1;x=0;z=0;y=0;velocityX=0;gR=0;ER=0;velocityY=0;_R=0;YI=0;pitch=0;Ol=0;Tl=0;constructor(t,i,s,e,n,r,o,l,a,c,f){super(),this.yR=h.A.Fo[t],this.level=i,this.AR=s,this.pR=n,this.mR=e,this.$I=r,this.qI=o,this.IR=l,this.arc=a,this.target=c,this.offsetY=f}JI(t,i,s,h){if(!this.mobile){const i=t-this.AR,h=s-this.pR,e=Math.sqrt(i*i+h*h);this.x=this.AR+i*this.arc/e,this.z=this.pR+h*this.arc/e,this.y=this.mR}const e=this.qI+1-h;this.velocityX=(t-this.x)/e,this.gR=(s-this.z)/e,this.ER=Math.sqrt(this.velocityX*this.velocityX+this.gR*this.gR),this.mobile||(this.velocityY=-this.ER*Math.tan(.02454369*this.IR)),this._R=2*(i-this.y-this.velocityY*e)/(e*e)}update(t){if(this.mobile=!0,this.x+=this.velocityX*t,this.z+=this.gR*t,this.y+=this.velocityY*t+.5*this._R*t*t,this.velocityY+=this._R*t,this.YI=325.949*Math.atan2(this.velocityX,this.gR)+1024&2047,this.pitch=325.949*Math.atan2(this.velocityY,this.ER)&2047,this.yR.tg&&this.yR.tg.delay)for(this.Tl+=t;this.Tl>this.yR.tg.delay[this.Ol];)this.Tl-=this.yR.tg.delay[this.Ol]+1,this.Ol++,this.Ol>=this.yR.tg.vl&&(this.Ol=0)}draw(){const t=this.yR.Ea(),i=n.A.l_(t,!0,!this.yR.F_,!1);return this.yR.tg&&this.yR.tg.frames&&(i.Va(),i.Ka(this.yR.tg.frames[this.Ol]),i.eC=null,i.nC=null),128===this.yR.aC&&128===this.yR.cC||i.scale(this.yR.aC,this.yR.cC,this.yR.aC),i.CR(this.pitch),i.Xa(64+this.yR.B_,850+this.yR.G_,-30,-50,-30,!0),i}}},7628:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(7121),e=s(8738),n=s(8665);class r extends h.A{type;level;x;z;y;$I;QI=!1;Ol=0;Tl=0;constructor(t,i,s,h,n,r,o){super(),this.type=e.A.Fo[t],this.level=i,this.x=s,this.z=h,this.y=n,this.$I=r+o}update(t){if(this.type.tg&&this.type.tg.delay)for(this.Tl+=t;this.Tl>this.type.tg.delay[this.Ol];)this.Tl-=this.type.tg.delay[this.Ol]+1,this.Ol++,this.Ol>=this.type.tg.vl&&(this.Ol=0,this.QI=!0)}draw(){const t=this.type.Ea(),i=n.A.l_(t,!0,!this.type.F_,!1);return!this.QI&&this.type.tg&&this.type.tg.frames&&(i.Va(),i.Ka(this.type.tg.frames[this.Ol]),i.eC=null,i.nC=null),128===this.type.aC&&128===this.type.cC||i.scale(this.type.aC,this.type.cC,this.type.aC),0!==this.type.orientation&&(90===this.type.orientation?i.rC():180===this.type.orientation?(i.rC(),i.rC()):270===this.type.orientation&&(i.rC(),i.rC(),i.rC())),i.Xa(64+this.type.B_,850+this.type.G_,-30,-50,-30,!0),i}}},9222:(t,i,s)=>{s.d(i,{A:()=>h});class h{y;x;z;model;Dv;info;constructor(t,i,s,h,e,n){this.y=t,this.x=i,this.z=s,this.model=h,this.Dv=e,this.info=n}}},1161:(t,i,s)=>{s.d(i,{A:()=>h});class h{level;y;x;z;model;_b;YI;Nv;Wv;Pv;Yv;Dv;info;kb=0;hu=0;constructor(t,i,s,h,e,n,r,o,l,a,c,f,u){this.level=t,this.y=i,this.x=s,this.z=h,this.model=e,this._b=n,this.YI=r,this.Nv=o,this.Wv=l,this.Pv=a,this.Yv=c,this.Dv=f,this.info=u}}},5327:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{pp;zd;x;z;rm;angle;shape;qI;constructor(t,i,s,h,e,n,r,o){super(),this.pp=t,this.zd=i,this.x=s,this.z=h,this.rm=e,this.angle=n,this.shape=r,this.qI=o}}},2630:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{pp;zd;x;z;rm;angle;shape;mp;Ip;gp;constructor(t,i,s,h,e,n,r,o,l,a){super(),this.pp=t,this.zd=i,this.x=s,this.z=h,this.rm=e,this.angle=n,this.shape=r,this.mp=o,this.Ip=l,this.gp=a}}},5748:(t,i,s)=>{s.d(i,{A:()=>h});class h{y;x;z;Mb;Sb;Rb;Dv;offset;constructor(t,i,s,h,e,n,r,o){this.y=t,this.x=i,this.z=s,this.Mb=h,this.Sb=e,this.Rb=n,this.Dv=r,this.offset=o}}},8256:(t,i,s)=>{s.d(i,{A:()=>h});class h{XI;zI;jI;ZI;type;jv;zv;Zv;qv;Xv;lC;mode=0;yb=0;Ab=0;cb=0;fb=0;ub=0;wb=0;constructor(t,i,s,h,e,n,r,o,l,a,c){this.XI=t,this.zI=i,this.jI=s,this.ZI=h,this.type=e,this.jv=n,this.zv=r,this.Zv=o,this.qv=l,this.Xv=a,this.lC=c}}},3795:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1982),e=s(3867);class n extends h.A{level;x;z;mb;bv;lb;_v=null;Tv=null;Rv=null;Sv=null;Ov=null;Lv=null;gv=null;vv=0;ab=0;Ev=0;visible=!1;update=!1;nb=!1;rb=0;Ob=0;vb=0;Cb=0;constructor(t,i,s){super(),this.mb=this.level=t,this.x=i,this.z=s,this.bv=new e.As(5,null),this.lb=new Int32Array(5)}}},2771:(t,i,s)=>{s.d(i,{A:()=>h});class h{static Zb=new Int32Array(6);static qb=new Int32Array(6);static Xb=new Int32Array(6);static jb=new Int32Array(6);static zb=new Int32Array(6);static TR=[Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,6),Int8Array.of(1,3,5,7,2,6),Int8Array.of(1,3,5,7,2,8),Int8Array.of(1,3,5,7,2,8),Int8Array.of(1,3,5,7,11,12),Int8Array.of(1,3,5,7,11,12),Int8Array.of(1,3,5,7,13,14)];static OR=[Int8Array.of(0,1,2,3,0,0,1,3),Int8Array.of(1,1,2,3,1,0,1,3),Int8Array.of(0,1,2,3,1,0,1,3),Int8Array.of(0,0,1,2,0,0,2,4,1,0,4,3),Int8Array.of(0,0,1,4,0,0,4,3,1,1,2,4),Int8Array.of(0,0,4,3,1,0,1,2,1,0,2,4),Int8Array.of(0,1,2,4,1,0,1,4,1,0,4,3),Int8Array.of(0,4,1,2,0,4,2,5,1,0,4,5,1,0,5,3),Int8Array.of(0,4,1,2,0,4,2,3,0,4,3,5,1,0,4,5),Int8Array.of(0,0,4,5,1,4,1,2,1,4,2,3,1,4,3,5),Int8Array.of(0,0,1,5,0,1,4,5,0,1,2,4,1,0,5,3,1,5,4,3,1,4,2,3),Int8Array.of(1,0,1,5,1,1,4,5,1,1,2,4,0,0,5,3,0,5,4,3,0,4,2,3),Int8Array.of(1,0,5,4,1,0,1,5,0,0,4,3,0,4,5,3,0,5,2,3,0,1,2,5)];static vR=128;static bR=this.vR/2|0;static LR=this.vR/4|0;static RR=3*this.vR/4|0;Q_;iC;tC;tL;iL;sL;$b;Jb;Qb;Kb;flat;shape;angle;sb;hb;constructor(t,i,s,e,n,r,o,l,a,c,f,u,d,w,y,A,p,m,I){this.flat=!(p!==e||p!==w||p!==l),this.shape=i,this.angle=r,this.sb=d,this.hb=a;const g=h.TR[i],E=g.length;this.Q_=new Int32Array(E),this.iC=new Int32Array(E),this.tC=new Int32Array(E);const _=new Int32Array(E),C=new Int32Array(E),T=t*h.vR,O=m*h.vR;for(let t=0;t<E;t++){let i,a,f,d,m,E=g[t];!(1&E)&&E<=8&&(E=1+(E-r-r-1&7)),E>8&&E<=12&&(E=9+(E-r-9&3)),E>12&&E<=16&&(E=13+(E-r-13&3)),1===E?(i=T,a=O,f=p,d=o,m=c):2===E?(i=T+h.bR,a=O,f=p+e>>1,d=o+I>>1,m=c+s>>1):3===E?(i=T+h.vR,a=O,f=e,d=I,m=s):4===E?(i=T+h.vR,a=O+h.bR,f=e+w>>1,d=I+n>>1,m=s+y>>1):5===E?(i=T+h.vR,a=O+h.vR,f=w,d=n,m=y):6===E?(i=T+h.bR,a=O+h.vR,f=w+l>>1,d=n+A>>1,m=y+u>>1):7===E?(i=T,a=O+h.vR,f=l,d=A,m=u):8===E?(i=T,a=O+h.bR,f=l+p>>1,d=A+o>>1,m=u+c>>1):9===E?(i=T+h.bR,a=O+h.LR,f=p+e>>1,d=o+I>>1,m=c+s>>1):10===E?(i=T+h.RR,a=O+h.bR,f=e+w>>1,d=I+n>>1,m=s+y>>1):11===E?(i=T+h.bR,a=O+h.RR,f=w+l>>1,d=n+A>>1,m=y+u>>1):12===E?(i=T+h.LR,a=O+h.bR,f=l+p>>1,d=A+o>>1,m=u+c>>1):13===E?(i=T+h.LR,a=O+h.LR,f=p,d=o,m=c):14===E?(i=T+h.RR,a=O+h.LR,f=e,d=I,m=s):15===E?(i=T+h.RR,a=O+h.RR,f=w,d=n,m=y):(i=T+h.LR,a=O+h.RR,f=l,d=A,m=u),this.Q_[t]=i,this.iC[t]=f,this.tC[t]=a,_[t]=d,C[t]=m}const v=h.OR[i],b=v.length/4|0;this.$b=new Int32Array(b),this.Jb=new Int32Array(b),this.Qb=new Int32Array(b),this.tL=new Int32Array(b),this.iL=new Int32Array(b),this.sL=new Int32Array(b),this.Kb=-1!==f?new Int32Array(b):null;let L=0;for(let t=0;t<b;t++){const i=v[L];let s=v[L+1],h=v[L+2],e=v[L+3];L+=4,s<4&&(s=s-r&3),h<4&&(h=h-r&3),e<4&&(e=e-r&3),this.$b[t]=s,this.Jb[t]=h,this.Qb[t]=e,0===i?(this.tL[t]=_[s],this.iL[t]=_[h],this.sL[t]=_[e],this.Kb&&(this.Kb[t]=-1)):(this.tL[t]=C[s],this.iL[t]=C[h],this.sL[t]=C[e],this.Kb&&(this.Kb[t]=f))}}}},5518:(t,i,s)=>{s.d(i,{A:()=>h});class h{static fO=0;static Cv=1;static SR=2;static MR=3;static kR=4;static xR=5;static bR=6;static LR=7;static RR=8;static DR=9;static NR=10;static PR=11}},3479:(t,i,s)=>{s.d(i,{A:()=>h});class h{Vb;Hb;Ub;Gb;Fb;color;flat;constructor(t,i,s,h,e,n,r){this.Vb=t,this.Hb=i,this.Ub=s,this.Gb=h,this.Fb=e,this.color=n,this.flat=r}}},6855:(t,i,s)=>{s.d(i,{A:()=>h});class h{y;x;z;Tb;Lb;Mv;kv;Dv;info;constructor(t,i,s,h,e,n,r,o,l){this.y=t,this.x=i,this.z=s,this.Tb=h,this.Lb=e,this.Mv=n,this.kv=r,this.Dv=o,this.info=l}}},7441:(t,i,s)=>{s.d(i,{A:()=>h});class h{y;x;z;type;angle;model;Dv;info;constructor(t,i,s,h,e,n,r,o){this.y=t,this.x=i,this.z=s,this.type=h,this.angle=e,this.model=n,this.Dv=r,this.info=o}}},7536:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e{FR;UR;constructor(t){this.UR=[],this.FR=t;for(let i=0;i<t;i++)this.UR[i]=new h.A}get(t){const i=this.UR[Number(t&BigInt(this.FR-1))];if(!i.next)return null;for(let s=i.next;s!==i;s=s.next)if(s&&s.key===t)return s;return null}put(t,i){i.xm&&i.EA();const s=this.UR[Number(t&BigInt(this.FR-1))];i.xm=s.xm,i.next=s,i.xm&&(i.xm.next=i),i.next.xm=i,i.key=t}}},4474:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e extends h.A{BR;GR;constructor(){super(),this.BR=this,this.GR=this}HR(){this.GR&&this.BR&&(this.GR.BR=this.BR,this.BR.GR=this.GR,this.BR=null,this.GR=null)}}},3819:(t,i,s)=>{s.d(i,{A:()=>h});class h{static WR=['_','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9'];static _d=t=>{t=t.trim();let i=0n;for(let s=0;s<t.length&&s<12;s++){const h=t.charCodeAt(s);i*=37n,h>=65&&h<=90?i+=BigInt(h+1-65):h>=97&&h<=122?i+=BigInt(h+1-97):h>=48&&h<=57&&(i+=BigInt(h+27-48))}return i};static Pa=t=>{if(t<0n||t>=6582952005840035281n)return'invalid_name';if(t%37n===0n)return'invalid_name';let i=0;const s=Array(12);for(;0n!==t;){const h=t;t/=37n,s[11-i++]=this.WR[Number(h-37n*t)]}return s.slice(12-i).join('')};static My=t=>{const i=[...t.toLowerCase()];let s=!0;for(let t=0;t<i.length;t++){const h=i[t];s&&h>='a'&&h<='z'&&(i[t]=h.toUpperCase(),s=!1),'.'!==h&&'!'!==h||(s=!0)}return i.join('')};static jc=t=>{let i='';for(let s=0;s<t.length;s++)i+='*';return i};static Qa=t=>(t>>24&255)+'.'+(t>>16&255)+'.'+(t>>8&255)+'.'+(255&t);static Na=t=>{if(0===t.length)return t;const i=[...t];for(let t=0;t<i.length;t++)'_'===i[t]&&(i[t]=' ',t+1<i.length&&i[t+1]>='a'&&i[t+1]<='z'&&(i[t+1]=String.fromCharCode(i[t+1].charCodeAt(0)+'A'.charCodeAt(0)-97)));return i[0]>='a'&&i[0]<='z'&&(i[0]=String.fromCharCode(i[0].charCodeAt(0)+'A'.charCodeAt(0)-97)),i.join('')};static r_=t=>{const i=t.toUpperCase();let s=0n;for(let t=0;t<i.length;t++)s=61n*s+BigInt(i.charCodeAt(t))-32n,s=s+(s>>56n)&0xffffffffffffffn;return s}}},6666:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1982);class e{YR;cursor=null;constructor(){const t=new h.A;t.next=t,t.xm=t,this.YR=t}Ig(t){t.xm&&t.EA(),t.xm=this.YR.xm,t.next=this.YR,t.xm&&(t.xm.next=t),t.next.xm=t}Vy(t){t.xm&&t.EA(),t.xm=this.YR,t.next=this.YR.next,t.xm.next=t,t.next&&(t.next.xm=t)}pb(){const t=this.YR.next;return t===this.YR?null:(t?.EA(),t)}head(){const t=this.YR.next;return t===this.YR?(this.cursor=null,null):(this.cursor=t?.next||null,t)}km(){const t=this.YR.xm;return t===this.YR?(this.cursor=null,null):(this.cursor=t?.xm||null,t)}next(){const t=this.cursor;return t===this.YR?(this.cursor=null,null):(this.cursor=t?.next||null,t)}xm(){const t=this.cursor;return t===this.YR?(this.cursor=null,null):(this.cursor=t?.xm||null,t)}clear(){for(;;){const t=this.YR.next;if(t===this.YR)return;t?.EA()}}}},1982:(t,i,s)=>{s.d(i,{A:()=>h});class h{key;next;xm;constructor(){this.key=0n,this.next=this,this.xm=this}EA(){this.xm&&this.next&&(this.xm.next=this.next,this.next.xm=this.xm,this.next=null,this.xm=null)}}},2679:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(2512),e=s(7536);class n{VR;KR;history;available;constructor(t){this.VR=t,this.available=t,this.KR=new e.A(1024),this.history=new h.A}get(t){const i=this.KR.get(t);return i&&this.history.push(i),i}put(t,i){if(0===this.available){const t=this.history.pop();t?.EA(),t?.HR()}else this.available--;this.KR.put(t,i),this.history.push(i)}clear(){const t=this.history.pop();t?(t.EA(),t.HR()):this.available=this.VR}}},2512:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(4474);class e{head;constructor(){this.head=new h.A}push(t){t.GR&&t.HR(),t.GR=this.head.GR,t.BR=this.head,t.GR&&(t.GR.BR=t),t.BR.GR=t}pop(){const t=this.head.BR;return t===this.head?null:(t?.HR(),t)}}},8534:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1069),e=s(3867);class n{static Fo=[];static mc=t=>{const i=new h.A(t.read('base_head.dat')),s=new h.A(t.read('base_type.dat')),r=new h.A(t.read('base_label.dat')),o=i.aA;i.qc+=2;for(let t=0;t<o;t++){const t=i.aA,h=i.fA,o=new Uint8Array(h),l=new e.As(h,null);for(let t=0;t<h;t++){o[t]=s.fA;const i=r.fA,h=new Uint8Array(i);for(let t=0;t<i;t++)h[t]=r.fA;l[t]=h}this.Fo[t]=new n,this.Fo[t].length=h,this.Fo[t].types=o,this.Fo[t].labels=l}};length=0;types=null;labels=null}},6730:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(8534),e=s(1069);class n{static Fo=[];static mc=t=>{const i=new e.A(t.read('frame_head.dat')),s=new e.A(t.read('frame_tran1.dat')),r=new e.A(t.read('frame_tran2.dat')),o=new e.A(t.read('frame_del.dat')),l=i.aA;i.qc+=2;const a=new Int32Array(500),c=new Int32Array(500),f=new Int32Array(500),u=new Int32Array(500);for(let t=0;t<l;t++){const t=i.aA,e=this.Fo[t]=new n;e.delay=o.fA;const l=i.aA,d=h.A.Fo[l];e.XR=d;const w=i.fA;let y=-1,A=0;for(let t=0;t<w;t++){if(!d.types)throw new Error('SeqBase not loaded!!!');const i=s.fA;if(i>0){if(0!==d.types[t])for(let i=t-1;i>y;i--)if(0===d.types[i]){a[A]=i,c[A]=0,f[A]=0,u[A]=0,A++;break}a[A]=t;let s=0;3===d.types[a[A]]&&(s=128),c[A]=1&i?r.jR:s,f[A]=2&i?r.jR:s,u[A]=4&i?r.jR:s,y=t,A++}}e.length=A,e.zR=new Int32Array(A),e.x=new Int32Array(A),e.y=new Int32Array(A),e.z=new Int32Array(A);for(let t=0;t<A;t++)e.zR[t]=a[t],e.x[t]=c[t],e.y[t]=f[t],e.z[t]=u[t]}};delay=0;XR=null;length=0;zR=null;x=null;y=null;z=null}},7854:(t,i,s)=>{s.d(i,{zg:()=>h,ol:()=>e,ZR:()=>o,qR:()=>r,$R:()=>n});const h=document.getElementById('canvas'),e=h.getContext('2d',{willReadFrequently:!0}),n=document.createElement('canvas'),r=document.createElement('img'),o=n.getContext('2d',{willReadFrequently:!0})},9298:(t,i,s)=>{s.d(i,{A:()=>h});class h{static RED=16711680;static GREEN=65280;static BLUE=255;static Ql=16776960;static Bc=65535;static Gc=16711935;static xl=16777215;static Jl=0;static JR=16748608;static Ad=8388608;static yd=128;static QR=16756736;static tS=16740352;static iS=16723968;static sS=12648192;static hS=8453888;static eS=4259584;static Sc=9179409;static jd=6116423;static wl=2301979;static yl=5063219;static pl=7759444;static Il=3353893;static pd=8388736;static md=13350793;static $u=Int32Array.of(h.Ql,h.RED,h.GREEN,h.Bc,h.Gc,h.xl);static _L=6798;static CL=107;static TL=10283;static OL=16;static vL=4797;static bL=7744;static LL=5799;static RL=4634;static SL=33697;static ML=22433;static kL=2983;static xL=54193;static DL=8741;static NL=12;static PL=64030;static FL=43162;static UL=7735;static BL=8404;static HL=1701;static WL=38430;static YL=24094;static VL=10153;static KL=56621;static XL=4783;static jL=1341;static zL=16578;static ZL=35003;static qL=25239;static nL=9104;static rL=10275;static oL=7595;static lL=3610;static aL=7975;static cL=8526;static fL=918;static uL=38802;static dL=24466;static wL=10145;static yL=58654;static pL=5027;static mL=1457;static IL=16565;static gL=34991;static EL=25486;static $L=4626;static JL=11146;static QL=6439;static tR=12;static iR=4758;static sR=10270;static cR=4574;static hR=4550;static eR=4537;static nR=5681;static rR=5673;static oR=5790;static lR=6806;static aR=8076}},8950:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(4474);class e extends h.A{static Ic=new Int32Array;static EC=0;static _C=0;static top=0;static bottom=0;static left=0;static right=0;static Nb=0;static nS=0;static rS=0;static bind=(t,i,s)=>{this.Ic=t,this.EC=i,this._C=s,this.Rl(0,0,i,s)};static Qu=()=>{this.left=0,this.top=0,this.right=this.EC,this.bottom=this._C,this.Nb=this.right-1,this.nS=this.right/2|0};static Rl=(t,i,s,h)=>{t<0&&(t=0),i<0&&(i=0),s>this.EC&&(s=this.EC),h>this._C&&(h=this._C),this.top=i,this.bottom=h,this.left=t,this.right=s,this.Nb=this.right-1,this.nS=this.right/2|0,this.rS=this.bottom/2|0};static clear=()=>{const t=this.EC*this._C;for(let i=0;i<t;i++)this.Ic[i]=0};static kl=(t,i,s,h,e)=>{this.ml(t,i,e,s),this.ml(t,i+h-1,e,s),this.Al(t,i,e,h),this.Al(t+s-1,i,e,h)};static ml=(t,i,s,h)=>{if(i<this.top||i>=this.bottom)return;t<this.left&&(h-=this.left-t,t=this.left),t+h>this.right&&(h=this.right-t);const e=t+i*this.EC;for(let t=0;t<h;t++)this.Ic[e+t]=s};static Al=(t,i,s,h)=>{if(t<this.left||t>=this.right)return;i<this.top&&(h-=this.top-i,i=this.top),i+h>this.bottom&&(h=this.bottom-i);const e=t+i*this.EC;for(let t=0;t<h;t++)this.Ic[e+t*this.EC]=s};static ad=(t,i,s,h,e)=>{const n=Math.abs(s-t),r=Math.abs(h-i),o=t<s?1:-1,l=i<h?1:-1;let a=n-r;for(;t>=this.left&&t<this.right&&i>=this.top&&i<this.bottom&&(this.Ic[t+i*this.EC]=e),t!==s||i!==h;){const s=2*a;s>-r&&(a-=r,t+=o),s<n&&(a+=n,i+=l)}};static fillRect=(t,i,s,h,e)=>{t<this.left&&(s-=this.left-t,t=this.left),i<this.top&&(h-=this.top-i,i=this.top),t+s>this.right&&(s=this.right-t),i+h>this.bottom&&(h=this.bottom-i);const n=this.EC-s;let r=t+i*this.EC;for(let t=-h;t<0;t++){for(let t=-s;t<0;t++)this.Ic[r++]=e;r+=n}};static oS(t,i,s,h,e,n){t<this.left&&(s-=this.left-t,t=this.left),i<this.top&&(h-=this.top-i,i=this.top),t+s>this.right&&(s=this.right-t),i+h>this.bottom&&(h=this.bottom-i);const r=256-n,o=(e>>16&255)*n,l=(e>>8&255)*n,a=(255&e)*n,c=this.EC-s;let f=t+i*this.EC;for(let t=0;t<h;t++){for(let t=-s;t<0;t++){const t=(o+(this.Ic[f]>>16&255)*r>>8<<16)+(l+(this.Ic[f]>>8&255)*r>>8<<8)+(a+(255&this.Ic[f])*r>>8);this.Ic[f++]=t}f+=c}}static lS(t,i,s,h,e){const n=256-e,r=(h>>16&255)*e,o=(h>>8&255)*e,l=(255&h)*e;let a=i-s;a<0&&(a=0);let c=i+s;c>=this._C&&(c=this._C-1);for(let h=a;h<=c;h++){const e=h-i,a=0|Math.sqrt(s*s-e*e);let c=t-a;c<0&&(c=0);let f=t+a;f>=this.EC&&(f=this.EC-1);let u=c+h*this.EC;for(let t=c;t<=f;t++){const t=(r+(this.Ic[u]>>16&255)*n>>8<<16)+(o+(this.Ic[u]>>8&255)*n>>8<<8)+(l+(255&this.Ic[u])*n>>8);this.Ic[u++]=t}}}static aS=(t,i,s)=>{t<this.left||t>=this.right||i<this.top||i>=this.bottom||(this.Ic[t+i*this.EC]=s)}}},4583:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(8950),e=s(1673),n=s(3867);class r extends h.A{static st=!1;static cS=new Int32Array(512);static fS=new Int32Array(2048);static sin=new Int32Array(2048);static cos=new Int32Array(2048);static palette=new Int32Array(65536);static Tg=new n.As(50,null);static uS=0;static Ec=new Int32Array;static ma=0;static Ia=0;static CC=!0;static Db=!1;static alpha=0;static dS=null;static wS=new n.As(50,null);static yS=0;static hu=0;static Cg=new Int32Array(50);static AS=new n.As(50,null);static pS=!1;static mS=new n.As(50,!1);static IS=new Int32Array(50);static{for(let t=1;t<512;t++)this.cS[t]=32768/t|0;for(let t=1;t<2048;t++)this.fS[t]=65536/t|0;for(let t=0;t<2048;t++)this.sin[t]=65536*Math.sin(.0030679615757712823*t)|0,this.cos[t]=65536*Math.cos(.0030679615757712823*t)|0}static ko=()=>{this.cS=null,this.cS=null,this.sin=null,this.cos=null,this.Ec=null,this.Tg=null,this.mS=null,this.IS=null,this.dS=null,this.wS=null,this.Cg=null,this.palette=null,this.AS=null,console.log('Draw3D unloaded!')};static Zg=()=>{this.Ec=new Int32Array(h.A._C);for(let t=0;t<h.A._C;t++)this.Ec[t]=h.A.EC*t;this.ma=h.A.EC/2|0,this.Ia=h.A._C/2|0};static gc=(t,i)=>{this.Ec=new Int32Array(i);for(let s=0;s<i;s++)this.Ec[s]=t*s;this.ma=t/2|0,this.Ia=i/2|0};static qp=()=>{this.dS=null,this.wS.fill(null)};static wc=t=>{this.uS=0;for(let i=0;i<50;i++)try{this.Tg[i]=e.A.rc(t,i.toString()),this.st&&128===this.Tg[i]?.Zl?this.Tg[i]?.gS():this.Tg[i]?.LC(),this.uS++}catch(t){}};static dO=t=>{if(0!==this.IS[t])return this.IS[t];const i=this.AS[t];if(!i)return 0;let s=0,h=0,e=0;const n=i.length;for(let t=0;t<n;t++)s+=i[t]>>16&255,h+=i[t]>>8&255,e+=255&i[t];let r=(s/n<<16)+(h/n<<8)+(e/n|0);return r=this.ES(r,1.4),0===r&&(r=1),this.IS[t]=r,r};static yc=t=>{const i=t+.03*Math.random()-.015;let s=0;for(let t=0;t<512;t++){const h=(t/8|0)/64+.0078125,e=(7&t)/8+.0625;for(let t=0;t<128;t++){const n=t/128;let r=n,o=n,l=n;if(0!==e){let t;t=n<.5?n*(e+1):n+e-n*e;const i=2*n-t;let s=h+.3333333333333333;s>1&&s--;let a=h-.3333333333333333;a<0&&a++,r=6*s<1?i+6*(t-i)*s:2*s<1?t:3*s<2?i+(t-i)*(.6666666666666666-s)*6:i,o=6*h<1?i+6*(t-i)*h:2*h<1?t:3*h<2?i+(t-i)*(.6666666666666666-h)*6:i,l=6*a<1?i+6*(t-i)*a:2*a<1?t:3*a<2?i+(t-i)*(.6666666666666666-a)*6:i}const a=((256*r|0)<<16)+((256*o|0)<<8)+(256*l|0);this.palette[s++]=this.ES(a,i)}}for(let t=0;t<50;t++){const s=this.Tg[t];if(!s)continue;const h=s.palette;this.AS[t]=new Int32Array(h.length);for(let s=0;s<h.length;s++){const e=this.AS[t];e&&(e[s]=this.ES(h[s],i))}}for(let t=0;t<50;t++)this.Og(t)};static ES=(t,i)=>{const s=(t>>16)/256,h=(t>>8&255)/256,e=(255&t)/256;return((256*Math.pow(s,i)|0)<<16)+((256*Math.pow(h,i)|0)<<8)+(256*Math.pow(e,i)|0)};static Ac=t=>{this.dS||(this.yS=t,this.st?this.dS=new n.zn(t,16384):this.dS=new n.zn(t,65536),this.wS.fill(null))};static Bb=(t,i,s,e,n,o,l,a,c)=>{let f=0,u=0;n!==e&&(f=(i-t<<16)/(n-e)|0,u=(a-l<<15)/(n-e)|0);let d=0,w=0;o!==n&&(d=(s-i<<16)/(o-n)|0,w=(c-a<<15)/(o-n)|0);let y=0,A=0;if(o!==e&&(y=(t-s<<16)/(e-o)|0,A=(l-c<<15)/(e-o)|0),e<=n&&e<=o){if(e<h.A.bottom)if(n>h.A.bottom&&(n=h.A.bottom),o>h.A.bottom&&(o=h.A.bottom),n<o)if(s=t<<=16,c=l<<=15,e<0&&(s-=y*e,t-=f*e,c-=A*e,l-=u*e,e=0),i<<=16,a<<=15,n<0&&(i-=d*n,a-=w*n,n=0),e!==n&&y<f||e===n&&y>d)for(o-=n,n-=e,e=r.Ec[e];;){if(--n<0)for(;;){if(--o<0)return;this._S(s>>16,i>>16,c>>7,a>>7,h.A.Ic,e,0),s+=y,i+=d,c+=A,a+=w,e+=h.A.EC}this._S(s>>16,t>>16,c>>7,l>>7,h.A.Ic,e,0),s+=y,t+=f,c+=A,l+=u,e+=h.A.EC}else for(o-=n,n-=e,e=r.Ec[e];;){if(--n<0)for(;;){if(--o<0)return;this._S(i>>16,s>>16,a>>7,c>>7,h.A.Ic,e,0),s+=y,i+=d,c+=A,a+=w,e+=h.A.EC}this._S(t>>16,s>>16,l>>7,c>>7,h.A.Ic,e,0),s+=y,t+=f,c+=A,l+=u,e+=h.A.EC}else if(i=t<<=16,a=l<<=15,e<0&&(i-=y*e,t-=f*e,a-=A*e,l-=u*e,e=0),s<<=16,c<<=15,o<0&&(s-=d*o,c-=w*o,o=0),e!==o&&y<f||e===o&&d>f)for(n-=o,o-=e,e=r.Ec[e];;){if(--o<0)for(;;){if(--n<0)return;this._S(s>>16,t>>16,c>>7,l>>7,h.A.Ic,e,0),s+=d,t+=f,c+=w,l+=u,e+=h.A.EC}this._S(i>>16,t>>16,a>>7,l>>7,h.A.Ic,e,0),i+=y,t+=f,a+=A,l+=u,e+=h.A.EC}else for(n-=o,o-=e,e=r.Ec[e];;){if(--o<0)for(;;){if(--n<0)return;this._S(t>>16,s>>16,l>>7,c>>7,h.A.Ic,e,0),s+=d,t+=f,c+=w,l+=u,e+=h.A.EC}this._S(t>>16,i>>16,l>>7,a>>7,h.A.Ic,e,0),i+=y,t+=f,a+=A,l+=u,e+=h.A.EC}}else if(n<=o){if(n<h.A.bottom)if(o>h.A.bottom&&(o=h.A.bottom),e>h.A.bottom&&(e=h.A.bottom),o<e)if(t=i<<=16,l=a<<=15,n<0&&(t-=f*n,i-=d*n,l-=u*n,a-=w*n,n=0),s<<=16,c<<=15,o<0&&(s-=y*o,c-=A*o,o=0),n!==o&&f<d||n===o&&f>y)for(e-=o,o-=n,n=r.Ec[n];;){if(--o<0)for(;;){if(--e<0)return;this._S(t>>16,s>>16,l>>7,c>>7,h.A.Ic,n,0),t+=f,s+=y,l+=u,c+=A,n+=h.A.EC}this._S(t>>16,i>>16,l>>7,a>>7,h.A.Ic,n,0),t+=f,i+=d,l+=u,a+=w,n+=h.A.EC}else for(e-=o,o-=n,n=r.Ec[n];;){if(--o<0)for(;;){if(--e<0)return;this._S(s>>16,t>>16,c>>7,l>>7,h.A.Ic,n,0),t+=f,s+=y,l+=u,c+=A,n+=h.A.EC}this._S(i>>16,t>>16,a>>7,l>>7,h.A.Ic,n,0),t+=f,i+=d,l+=u,a+=w,n+=h.A.EC}else if(s=i<<=16,c=a<<=15,n<0&&(s-=f*n,i-=d*n,c-=u*n,a-=w*n,n=0),t<<=16,l<<=15,e<0&&(t-=y*e,l-=A*e,e=0),o-=e,e-=n,n=r.Ec[n],f<d)for(;;){if(--e<0)for(;;){if(--o<0)return;this._S(t>>16,i>>16,l>>7,a>>7,h.A.Ic,n,0),t+=y,i+=d,l+=A,a+=w,n+=h.A.EC}this._S(s>>16,i>>16,c>>7,a>>7,h.A.Ic,n,0),s+=f,i+=d,c+=u,a+=w,n+=h.A.EC}else for(;;){if(--e<0)for(;;){if(--o<0)return;this._S(i>>16,t>>16,a>>7,l>>7,h.A.Ic,n,0),t+=y,i+=d,l+=A,a+=w,n+=h.A.EC}this._S(i>>16,s>>16,a>>7,c>>7,h.A.Ic,n,0),s+=f,i+=d,c+=u,a+=w,n+=h.A.EC}}else if(o<h.A.bottom)if(e>h.A.bottom&&(e=h.A.bottom),n>h.A.bottom&&(n=h.A.bottom),e<n)if(i=s<<=16,a=c<<=15,o<0&&(i-=d*o,s-=y*o,a-=w*o,c-=A*o,o=0),t<<=16,l<<=15,e<0&&(t-=f*e,l-=u*e,e=0),n-=e,e-=o,o=r.Ec[o],d<y)for(;;){if(--e<0)for(;;){if(--n<0)return;this._S(i>>16,t>>16,a>>7,l>>7,h.A.Ic,o,0),i+=d,t+=f,a+=w,l+=u,o+=h.A.EC}this._S(i>>16,s>>16,a>>7,c>>7,h.A.Ic,o,0),i+=d,s+=y,a+=w,c+=A,o+=h.A.EC}else for(;;){if(--e<0)for(;;){if(--n<0)return;this._S(t>>16,i>>16,l>>7,a>>7,h.A.Ic,o,0),i+=d,t+=f,a+=w,l+=u,o+=h.A.EC}this._S(s>>16,i>>16,c>>7,a>>7,h.A.Ic,o,0),i+=d,s+=y,a+=w,c+=A,o+=h.A.EC}else if(t=s<<=16,l=c<<=15,o<0&&(t-=d*o,s-=y*o,l-=w*o,c-=A*o,o=0),i<<=16,a<<=15,n<0&&(i-=f*n,a-=u*n,n=0),e-=n,n-=o,o=r.Ec[o],d<y)for(;;){if(--n<0)for(;;){if(--e<0)return;this._S(i>>16,s>>16,a>>7,c>>7,h.A.Ic,o,0),i+=f,s+=y,a+=u,c+=A,o+=h.A.EC}this._S(t>>16,s>>16,l>>7,c>>7,h.A.Ic,o,0),t+=d,s+=y,l+=w,c+=A,o+=h.A.EC}else for(;;){if(--n<0)for(;;){if(--e<0)return;this._S(s>>16,i>>16,c>>7,a>>7,h.A.Ic,o,0),i+=f,s+=y,a+=u,c+=A,o+=h.A.EC}this._S(s>>16,t>>16,c>>7,l>>7,h.A.Ic,o,0),t+=d,s+=y,l+=w,c+=A,o+=h.A.EC}};static _S=(t,i,s,e,n,o,l)=>{let a;if(r.CC){let c;if(r.Db){if(c=i-t>3?(e-s)/(i-t)|0:0,i>h.A.Nb&&(i=h.A.Nb),t<0&&(s-=t*c,t=0),t>=i)return;o+=t,l=i-t>>2,c<<=2}else{if(!(t<i))return;o+=t,c=(l=i-t>>2)>0?(e-s)*r.cS[l]>>15:0}if(0===r.alpha)for(;;){if(--l<0){if((l=i-t&3)>0){a=r.palette[s>>8];do{n[o++]=a,l--}while(l>0);return}break}a=r.palette[s>>8],s+=c,n[o++]=a,n[o++]=a,n[o++]=a,n[o++]=a}else{const h=r.alpha,e=256-r.alpha;for(;;){if(--l<0){if((l=i-t&3)>0){a=r.palette[s>>8],a=((16711935&a)*e>>8&16711935)+((65280&a)*e>>8&65280);do{n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280),l--}while(l>0)}break}a=r.palette[s>>8],s+=c,a=((16711935&a)*e>>8&16711935)+((65280&a)*e>>8&65280),n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280),n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280),n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280),n[o++]=a+((16711935&n[o])*h>>8&16711935)+((65280&n[o])*h>>8&65280)}}}else if(t<i){const c=(e-s)/(i-t)|0;if(r.Db&&(i>h.A.Nb&&(i=h.A.Nb),t<0&&(s-=t*c,t=0),t>=i))return;if(o+=t,l=i-t,0===r.alpha)do{n[o++]=r.palette[s>>8],s+=c,l--}while(l>0);else{const t=r.alpha,i=256-r.alpha;do{a=r.palette[s>>8],s+=c,a=((16711935&a)*i>>8&16711935)+((65280&a)*i>>8&65280),n[o++]=a+((16711935&n[o])*t>>8&16711935)+((65280&n[o])*t>>8&65280),l--}while(l>0)}}};static CS=(t,i,s,e,n,r,o)=>{let l=0;n!==e&&(l=(i-t<<16)/(n-e)|0);let a=0;r!==n&&(a=(s-i<<16)/(r-n)|0);let c=0;if(r!==e&&(c=(t-s<<16)/(e-r)|0),e<=n&&e<=r){if(e<h.A.bottom)if(n>h.A.bottom&&(n=h.A.bottom),r>h.A.bottom&&(r=h.A.bottom),n<r)if(s=t<<=16,e<0&&(s-=c*e,t-=l*e,e=0),i<<=16,n<0&&(i-=a*n,n=0),e!==n&&c<l||e===n&&c>a)for(r-=n,n-=e,e=this.Ec[e];;){if(--n<0)for(;;){if(--r<0)return;this.TS(s>>16,i>>16,h.A.Ic,e,o),s+=c,i+=a,e+=h.A.EC}this.TS(s>>16,t>>16,h.A.Ic,e,o),s+=c,t+=l,e+=h.A.EC}else for(r-=n,n-=e,e=this.Ec[e];;){if(--n<0)for(;;){if(--r<0)return;this.TS(i>>16,s>>16,h.A.Ic,e,o),s+=c,i+=a,e+=h.A.EC}this.TS(t>>16,s>>16,h.A.Ic,e,o),s+=c,t+=l,e+=h.A.EC}else if(i=t<<=16,e<0&&(i-=c*e,t-=l*e,e=0),s<<=16,r<0&&(s-=a*r,r=0),e!==r&&c<l||e===r&&a>l)for(n-=r,r-=e,e=this.Ec[e];;){if(--r<0)for(;;){if(--n<0)return;this.TS(s>>16,t>>16,h.A.Ic,e,o),s+=a,t+=l,e+=h.A.EC}this.TS(i>>16,t>>16,h.A.Ic,e,o),i+=c,t+=l,e+=h.A.EC}else for(n-=r,r-=e,e=this.Ec[e];;){if(--r<0)for(;;){if(--n<0)return;this.TS(t>>16,s>>16,h.A.Ic,e,o),s+=a,t+=l,e+=h.A.EC}this.TS(t>>16,i>>16,h.A.Ic,e,o),i+=c,t+=l,e+=h.A.EC}}else if(n<=r){if(n<h.A.bottom)if(r>h.A.bottom&&(r=h.A.bottom),e>h.A.bottom&&(e=h.A.bottom),r<e)if(t=i<<=16,n<0&&(t-=l*n,i-=a*n,n=0),s<<=16,r<0&&(s-=c*r,r=0),n!==r&&l<a||n===r&&l>c)for(e-=r,r-=n,n=this.Ec[n];;){if(--r<0)for(;;){if(--e<0)return;this.TS(t>>16,s>>16,h.A.Ic,n,o),t+=l,s+=c,n+=h.A.EC}this.TS(t>>16,i>>16,h.A.Ic,n,o),t+=l,i+=a,n+=h.A.EC}else for(e-=r,r-=n,n=this.Ec[n];;){if(--r<0)for(;;){if(--e<0)return;this.TS(s>>16,t>>16,h.A.Ic,n,o),t+=l,s+=c,n+=h.A.EC}this.TS(i>>16,t>>16,h.A.Ic,n,o),t+=l,i+=a,n+=h.A.EC}else if(s=i<<=16,n<0&&(s-=l*n,i-=a*n,n=0),t<<=16,e<0&&(t-=c*e,e=0),l<a)for(r-=e,e-=n,n=this.Ec[n];;){if(--e<0)for(;;){if(--r<0)return;this.TS(t>>16,i>>16,h.A.Ic,n,o),t+=c,i+=a,n+=h.A.EC}this.TS(s>>16,i>>16,h.A.Ic,n,o),s+=l,i+=a,n+=h.A.EC}else for(r-=e,e-=n,n=this.Ec[n];;){if(--e<0)for(;;){if(--r<0)return;this.TS(i>>16,t>>16,h.A.Ic,n,o),t+=c,i+=a,n+=h.A.EC}this.TS(i>>16,s>>16,h.A.Ic,n,o),s+=l,i+=a,n+=h.A.EC}}else if(r<h.A.bottom)if(e>h.A.bottom&&(e=h.A.bottom),n>h.A.bottom&&(n=h.A.bottom),e<n)if(i=s<<=16,r<0&&(i-=a*r,s-=c*r,r=0),t<<=16,e<0&&(t-=l*e,e=0),a<c)for(n-=e,e-=r,r=this.Ec[r];;){if(--e<0)for(;;){if(--n<0)return;this.TS(i>>16,t>>16,h.A.Ic,r,o),i+=a,t+=l,r+=h.A.EC}this.TS(i>>16,s>>16,h.A.Ic,r,o),i+=a,s+=c,r+=h.A.EC}else for(n-=e,e-=r,r=this.Ec[r];;){if(--e<0)for(;;){if(--n<0)return;this.TS(t>>16,i>>16,h.A.Ic,r,o),i+=a,t+=l,r+=h.A.EC}this.TS(s>>16,i>>16,h.A.Ic,r,o),i+=a,s+=c,r+=h.A.EC}else if(t=s<<=16,r<0&&(t-=a*r,s-=c*r,r=0),i<<=16,n<0&&(i-=l*n,n=0),a<c)for(e-=n,n-=r,r=this.Ec[r];;){if(--n<0)for(;;){if(--e<0)return;this.TS(i>>16,s>>16,h.A.Ic,r,o),i+=l,s+=c,r+=h.A.EC}this.TS(t>>16,s>>16,h.A.Ic,r,o),t+=a,s+=c,r+=h.A.EC}else for(e-=n,n-=r,r=this.Ec[r];;){if(--n<0)for(;;){if(--e<0)return;this.TS(s>>16,i>>16,h.A.Ic,r,o),i+=l,s+=c,r+=h.A.EC}this.TS(s>>16,t>>16,h.A.Ic,r,o),t+=a,s+=c,r+=h.A.EC}};static Yb=(t,i,s,e,n,r,o,l,a,c,f,u,d,w,y,A,p,m,I)=>{const g=this.OS(I);this.pS=!this.mS[I];const E=c-d,_=f-y,C=u-p,T=w-c,O=A-f,v=m-u;let b=T*f-O*c<<14;const L=O*u-v*f<<8,R=v*c-T*u<<5;let S=E*f-_*c<<14;const M=_*u-C*f<<8,k=C*c-E*u<<5;let x=_*T-E*O<<14;const D=C*O-_*v<<8,N=E*v-C*T<<5;let P=0,F=0;n!==e&&(P=(i-t<<16)/(n-e)|0,F=(l-o<<16)/(n-e)|0);let U=0,B=0;r!==n&&(U=(s-i<<16)/(r-n)|0,B=(a-l<<16)/(r-n)|0);let G=0,H=0;if(r!==e&&(G=(t-s<<16)/(e-r)|0,H=(o-a<<16)/(e-r)|0),e<=n&&e<=r){if(e<h.A.bottom)if(n>h.A.bottom&&(n=h.A.bottom),r>h.A.bottom&&(r=h.A.bottom),n<r){s=t<<=16,a=o<<=16,e<0&&(s-=G*e,t-=P*e,a-=H*e,o-=F*e,e=0),i<<=16,l<<=16,n<0&&(i-=U*n,l-=B*n,n=0);const c=e-this.Ia;if(b+=R*c,S+=k*c,x+=N*c,b|=0,S|=0,x|=0,e!==n&&G<P||e===n&&G>U)for(r-=n,n-=e,e=this.Ec[e];;){if(--n<0)for(;;){if(--r<0)return;this.vS(s>>16,i>>16,h.A.Ic,e,g,0,0,b,S,x,L,M,D,a>>8,l>>8),s+=G,i+=U,a+=H,l+=B,e+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}this.vS(s>>16,t>>16,h.A.Ic,e,g,0,0,b,S,x,L,M,D,a>>8,o>>8),s+=G,t+=P,a+=H,o+=F,e+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}else for(r-=n,n-=e,e=this.Ec[e];;){if(--n<0)for(;;){if(--r<0)return;this.vS(i>>16,s>>16,h.A.Ic,e,g,0,0,b,S,x,L,M,D,l>>8,a>>8),s+=G,i+=U,a+=H,l+=B,e+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}this.vS(t>>16,s>>16,h.A.Ic,e,g,0,0,b,S,x,L,M,D,o>>8,a>>8),s+=G,t+=P,a+=H,o+=F,e+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}}else{i=t<<=16,l=o<<=16,e<0&&(i-=G*e,t-=P*e,l-=H*e,o-=F*e,e=0),s<<=16,a<<=16,r<0&&(s-=U*r,a-=B*r,r=0);const c=e-this.Ia;if(b+=R*c,S+=k*c,x+=N*c,b|=0,S|=0,x|=0,(e===r||G>=P)&&(e!==r||U<=P))for(n-=r,r-=e,e=this.Ec[e];;){if(--r<0)for(;;){if(--n<0)return;this.vS(t>>16,s>>16,h.A.Ic,e,g,0,0,b,S,x,L,M,D,o>>8,a>>8),s+=U,t+=P,a+=B,o+=F,e+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}this.vS(t>>16,i>>16,h.A.Ic,e,g,0,0,b,S,x,L,M,D,o>>8,l>>8),i+=G,t+=P,l+=H,o+=F,e+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}else for(n-=r,r-=e,e=this.Ec[e];;){if(--r<0)for(;;){if(--n<0)return;this.vS(s>>16,t>>16,h.A.Ic,e,g,0,0,b,S,x,L,M,D,a>>8,o>>8),s+=U,t+=P,a+=B,o+=F,e+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}this.vS(i>>16,t>>16,h.A.Ic,e,g,0,0,b,S,x,L,M,D,l>>8,o>>8),i+=G,t+=P,l+=H,o+=F,e+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}}}else if(n<=r){if(n<h.A.bottom)if(r>h.A.bottom&&(r=h.A.bottom),e>h.A.bottom&&(e=h.A.bottom),r<e){t=i<<=16,o=l<<=16,n<0&&(t-=P*n,i-=U*n,o-=F*n,l-=B*n,n=0),s<<=16,a<<=16,r<0&&(s-=G*r,a-=H*r,r=0);const c=n-this.Ia;if(b+=R*c,S+=k*c,x+=N*c,b|=0,S|=0,x|=0,n!==r&&P<U||n===r&&P>G)for(e-=r,r-=n,n=this.Ec[n];;){if(--r<0)for(;;){if(--e<0)return;this.vS(t>>16,s>>16,h.A.Ic,n,g,0,0,b,S,x,L,M,D,o>>8,a>>8),t+=P,s+=G,o+=F,a+=H,n+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}this.vS(t>>16,i>>16,h.A.Ic,n,g,0,0,b,S,x,L,M,D,o>>8,l>>8),t+=P,i+=U,o+=F,l+=B,n+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}else for(e-=r,r-=n,n=this.Ec[n];;){if(--r<0)for(;;){if(--e<0)return;this.vS(s>>16,t>>16,h.A.Ic,n,g,0,0,b,S,x,L,M,D,a>>8,o>>8),t+=P,s+=G,o+=F,a+=H,n+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}this.vS(i>>16,t>>16,h.A.Ic,n,g,0,0,b,S,x,L,M,D,l>>8,o>>8),t+=P,i+=U,o+=F,l+=B,n+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}}else{s=i<<=16,a=l<<=16,n<0&&(s-=P*n,i-=U*n,a-=F*n,l-=B*n,n=0),t<<=16,o<<=16,e<0&&(t-=G*e,o-=H*e,e=0);const c=n-this.Ia;if(b+=R*c,S+=k*c,x+=N*c,b|=0,S|=0,x|=0,r-=e,e-=n,n=this.Ec[n],P<U)for(;;){if(--e<0)for(;;){if(--r<0)return;this.vS(t>>16,i>>16,h.A.Ic,n,g,0,0,b,S,x,L,M,D,o>>8,l>>8),t+=G,i+=U,o+=H,l+=B,n+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}this.vS(s>>16,i>>16,h.A.Ic,n,g,0,0,b,S,x,L,M,D,a>>8,l>>8),s+=P,i+=U,a+=F,l+=B,n+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}else for(;;){if(--e<0)for(;;){if(--r<0)return;this.vS(i>>16,t>>16,h.A.Ic,n,g,0,0,b,S,x,L,M,D,l>>8,o>>8),t+=G,i+=U,o+=H,l+=B,n+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}this.vS(i>>16,s>>16,h.A.Ic,n,g,0,0,b,S,x,L,M,D,l>>8,a>>8),s+=P,i+=U,a+=F,l+=B,n+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}}}else if(r<h.A.bottom)if(e>h.A.bottom&&(e=h.A.bottom),n>h.A.bottom&&(n=h.A.bottom),e<n){i=s<<=16,l=a<<=16,r<0&&(i-=U*r,s-=G*r,l-=B*r,a-=H*r,r=0),t<<=16,o<<=16,e<0&&(t-=P*e,o-=F*e,e=0);const c=r-this.Ia;if(b+=R*c,S+=k*c,x+=N*c,b|=0,S|=0,x|=0,n-=e,e-=r,r=this.Ec[r],U<G)for(;;){if(--e<0)for(;;){if(--n<0)return;this.vS(i>>16,t>>16,h.A.Ic,r,g,0,0,b,S,x,L,M,D,l>>8,o>>8),i+=U,t+=P,l+=B,o+=F,r+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}this.vS(i>>16,s>>16,h.A.Ic,r,g,0,0,b,S,x,L,M,D,l>>8,a>>8),i+=U,s+=G,l+=B,a+=H,r+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}else for(;;){if(--e<0)for(;;){if(--n<0)return;this.vS(t>>16,i>>16,h.A.Ic,r,g,0,0,b,S,x,L,M,D,o>>8,l>>8),i+=U,t+=P,l+=B,o+=F,r+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}this.vS(s>>16,i>>16,h.A.Ic,r,g,0,0,b,S,x,L,M,D,a>>8,l>>8),i+=U,s+=G,l+=B,a+=H,r+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}}else{t=s<<=16,o=a<<=16,r<0&&(t-=U*r,s-=G*r,o-=B*r,a-=H*r,r=0),i<<=16,l<<=16,n<0&&(i-=P*n,l-=F*n,n=0);const c=r-this.Ia;if(b+=R*c,S+=k*c,x+=N*c,b|=0,S|=0,x|=0,e-=n,n-=r,r=this.Ec[r],U<G)for(;;){if(--n<0)for(;;){if(--e<0)return;this.vS(i>>16,s>>16,h.A.Ic,r,g,0,0,b,S,x,L,M,D,l>>8,a>>8),i+=P,s+=G,l+=F,a+=H,r+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}this.vS(t>>16,s>>16,h.A.Ic,r,g,0,0,b,S,x,L,M,D,o>>8,a>>8),t+=U,s+=G,o+=B,a+=H,r+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}else for(;;){if(--n<0)for(;;){if(--e<0)return;this.vS(s>>16,i>>16,h.A.Ic,r,g,0,0,b,S,x,L,M,D,a>>8,l>>8),i+=P,s+=G,l+=F,a+=H,r+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}this.vS(s>>16,t>>16,h.A.Ic,r,g,0,0,b,S,x,L,M,D,a>>8,o>>8),t+=U,s+=G,o+=B,a+=H,r+=h.A.EC,b+=R,S+=k,x+=N,b|=0,S|=0,x|=0}}};static vS=(t,i,s,e,n,r,o,l,a,c,f,u,d,w,y)=>{if(t>=i)return;let A,p,m,I,g,E,_,C,T;if(this.Db){if(A=(y-w)/(i-t)|0,i>h.A.Nb&&(i=h.A.Nb),t<0&&(w-=t*A,t=0),t>=i)return;p=i-t>>3,A<<=12}else i-t>7?(p=i-t>>3,A=(y-w)*this.cS[p]>>6):(p=0,A=0);if(w<<=9,e+=t,this.st&&n)if(m=0,I=0,E=t-this.ma,l+=(f>>3)*E,a+=(u>>3)*E,c+=(d>>3)*E,l|=0,a|=0,g=(c|=0)>>12,0!==g&&(o=a/g|0,(r=l/g|0)<0?r=0:r>4032&&(r=4032)),l+=f,a+=u,c+=d,l|=0,a|=0,g=(c|=0)>>12,0!==g&&(m=l/g|0,I=a/g|0,m<7?m=7:m>4032&&(m=4032)),_=m-r>>3,C=I-o>>3,r+=w>>3&786432,T=w>>23,this.pS){for(;p-- >0;)s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=_,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=_,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=_,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=_,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=_,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=_,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=_,o+=C,s[e++]=n[(4032&o)+(r>>6)]>>>T,r=m,o=I,l+=f,a+=u,g=(c+=d)>>12,0!==g&&(m=l/g|0,I=a/g|0,m<7?m=7:m>4032&&(m=4032)),_=m-r>>3,C=I-o>>3,r+=(w+=A)>>3&786432,T=w>>23;for(p=i-t&7;p-- >0;)s[e++]=n[(4032&o)+(r>>6)]>>>T,r+=_,o+=C}else{for(;p-- >0;){let t;0!=(t=n[(4032&o)+(r>>6)]>>>T)&&(s[e]=t),e+=1,0!=(t=n[(4032&(o+=C))+((r+=_)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=_)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=_)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=_)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=_)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=_)>>6)]>>>T)&&(s[e]=t),e++,0!=(t=n[(4032&(o+=C))+((r+=_)>>6)]>>>T)&&(s[e]=t),e+=1,r=m,o=I,l+=f,a+=u,c+=d,l|=0,a|=0,g=(c|=0)>>12,0!==g&&(m=l/g|0,I=a/g|0,m<7?m=7:m>4032&&(m=4032)),_=m-r>>3,C=I-o>>3,r+=(w+=A)>>3&786432,T=w>>23}for(p=i-t&7;p-- >0;){let t;0!=(t=n[(4032&o)+(r>>6)]>>>T)&&(s[e]=t),e++,r+=_,o+=C}}else if(m=0,I=0,E=t-this.ma,l+=(f>>3)*E,a+=(u>>3)*E,c+=(d>>3)*E,l|=0,a|=0,g=(c|=0)>>14,0!==g&&(o=a/g|0,(r=l/g|0)<0?r=0:r>16256&&(r=16256)),l+=f,a+=u,c+=d,l|=0,a|=0,g=(c|=0)>>14,0!==g&&(m=l/g|0,I=a/g|0,m<7?m=7:m>16256&&(m=16256)),_=m-r>>3,C=I-o>>3,r+=6291456&w,T=w>>23,this.pS&&n){for(;p-- >0;)s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=_,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=_,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=_,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=_,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=_,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=_,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=_,o+=C,s[e++]=n[(16256&o)+(r>>7)]>>>T,r=m,o=I,l+=f,a+=u,c+=d,l|=0,a|=0,g=(c|=0)>>14,0!==g&&(m=l/g|0,I=a/g|0,m<7?m=7:m>16256&&(m=16256)),_=m-r>>3,C=I-o>>3,r+=6291456&(w+=A),T=w>>23;for(p=i-t&7;p-- >0;)s[e++]=n[(16256&o)+(r>>7)]>>>T,r+=_,o+=C}else{for(;p-- >0&&n;){let t;0!=(t=n[(16256&o)+(r>>7)]>>>T)&&(s[e]=t),e+=1,0!=(t=n[(16256&(o+=C))+((r+=_)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=_)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=_)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=_)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=_)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=_)>>7)]>>>T)&&(s[e]=t),e++,0!=(t=n[(16256&(o+=C))+((r+=_)>>7)]>>>T)&&(s[e]=t),e++,r=m,o=I,l+=f,a+=u,c+=d,l|=0,a|=0,g=(c|=0)>>14,0!==g&&(m=l/g|0,I=a/g|0,m<7?m=7:m>16256&&(m=16256)),_=m-r>>3,C=I-o>>3,r+=6291456&(w+=A),T=w>>23}for(p=i-t&7;p-- >0&&n;){let t;0!=(t=n[(16256&o)+(r>>7)]>>>T)&&(s[e]=t),e++,r+=_,o+=C}}};static TS=(t,i,s,e,n)=>{if(this.Db&&(i>h.A.Nb&&(i=h.A.Nb),t<0&&(t=0)),t>=i)return;e+=t;let r=i-t>>2;if(0===this.alpha)for(;;){if(r--,r<0)for(r=i-t&3;;){if(r--,r<0)return;s[e++]=n}s[e++]=n,s[e++]=n,s[e++]=n,s[e++]=n}const o=this.alpha,l=256-this.alpha;for(n=((16711935&n)*l>>8&16711935)+((65280&n)*l>>8&65280);;){if(r--,r<0)for(r=i-t&3;;){if(r--,r<0)return;s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280)}s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280),s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280),s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280),s[e++]=n+((16711935&s[e])*o>>8&16711935)+((65280&s[e])*o>>8&65280)}};static Og=t=>{this.wS[t]&&this.dS&&(this.dS[this.yS++]=this.wS[t],this.wS[t]=null)};static OS=t=>{if(this.Cg[t]=this.hu++,this.wS[t])return this.wS[t];let i;if(this.yS>0&&this.dS)i=this.dS[--this.yS],this.dS[this.yS]=null;else{let t=0,s=-1;for(let i=0;i<this.uS;i++)this.wS[i]&&(this.Cg[i]<t||-1===s)&&(t=this.Cg[i],s=i);i=this.wS[s],this.wS[s]=null}this.wS[t]=i;const s=this.Tg[t],h=this.AS[t];if(!i||!s||!h)return null;if(this.st){this.mS[t]=!1;for(let e=0;e<4096;e++){const n=i[e]=16316671&h[s.Ic[e]];0===n&&(this.mS[t]=!0),i[e+4096]=n-(n>>>3)&16316671,i[e+8192]=n-(n>>>2)&16316671,i[e+12288]=n-(n>>>2)-(n>>>3)&16316671}}else{if(64===s.width)for(let t=0;t<128;t++)for(let e=0;e<128;e++)i[e+(t<<7)]=h[s.Ic[(e>>1)+(t>>1<<6)]];else for(let t=0;t<16384;t++)i[t]=h[s.Ic[t]];this.mS[t]=!1;for(let s=0;s<16384;s++){i[s]&=16316671;const h=i[s];0===h&&(this.mS[t]=!0),i[s+16384]=h-(h>>>3)&16316671,i[s+32768]=h-(h>>>2)&16316671,i[s+49152]=h-(h>>>2)-(h>>>3)&16316671}}return i}}},880:(t,i,s)=>{s.d(i,{r:()=>e});var h=s(7854);const e=async t=>{255!==t[0]&&(t[0]=255),URL.revokeObjectURL(h.qR.src),h.qR.src=URL.createObjectURL(new Blob([t],{type:'image/jpeg'})),await new Promise((t=>h.qR.onload=()=>t())),h.ZR.clearRect(0,0,h.$R.width,h.$R.height);const i=h.qR.naturalWidth,s=h.qR.naturalHeight;return h.$R.width=i,h.$R.height=s,h.ZR.drawImage(h.qR,0,0),h.ZR.getImageData(0,0,i,s)}},8665:(t,i,s)=>{s.d(i,{A:()=>f});var h=s(1069),e=s(8950),n=s(4583),r=s(6730),o=s(4474),l=s(3867);class a{J_=0;Jv=0;bS=0;LS=-1;RS=-1;SS=-1;MS=-1;kS=-1;xS=-1;DS=-1;NS=-1;PS=-1;US=0;BS=-1;GS=-1;HS=-1;data=null}class c{x=0;y=0;z=0;w=0}class f extends o.A{static metadata=null;static head=null;static WS=null;static YS=null;static VS=null;static KS=null;static XS=null;static jS=null;static zS=null;static ZS=null;static qS=null;static $S=null;static JS=null;static QS=null;static axis=null;static tM=new l.As(4096,!1);static iM=new l.As(4096,!1);static sM=new Int32Array(4096);static hM=new Int32Array(4096);static eM=new Int32Array(4096);static nM=new Int32Array(4096);static rM=new Int32Array(4096);static oM=new Int32Array(4096);static lM=new Int32Array(1500);static aM=new l.zn(1500,512);static cM=new Int32Array(12);static fM=new l.zn(12,2e3);static uM=new Int32Array(2e3);static dM=new Int32Array(2e3);static wM=new Int32Array(12);static yM=new Int32Array(10);static AM=new Int32Array(10);static pM=new Int32Array(10);static Cn=0;static mM=0;static Tn=0;static eu=!1;static Xl=0;static jl=0;static nu=0;static Lm=new Int32Array(1e3);static IM=!1;static mc(t){try{f.head=new h.A(t.read('ob_head.dat')),f.WS=new h.A(t.read('ob_face1.dat')),f.YS=new h.A(t.read('ob_face2.dat')),f.VS=new h.A(t.read('ob_face3.dat')),f.KS=new h.A(t.read('ob_face4.dat')),f.XS=new h.A(t.read('ob_face5.dat')),f.jS=new h.A(t.read('ob_point1.dat')),f.zS=new h.A(t.read('ob_point2.dat')),f.ZS=new h.A(t.read('ob_point3.dat')),f.qS=new h.A(t.read('ob_point4.dat')),f.$S=new h.A(t.read('ob_point5.dat')),f.JS=new h.A(t.read('ob_vertex1.dat')),f.QS=new h.A(t.read('ob_vertex2.dat')),f.axis=new h.A(t.read('ob_axis.dat')),f.head.qc=0,f.jS.qc=0,f.zS.qc=0,f.ZS.qc=0,f.qS.qc=0,f.JS.qc=0,f.QS.qc=0;const i=f.head.aA;f.metadata=new l.As(i+100,null);let s=0,e=0,n=0,r=0,o=0,c=0,u=0;for(let t=0;t<i;t++){const t=f.head.aA,i=new a;i.J_=f.head.aA,i.Jv=f.head.aA,i.bS=f.head.fA,i.LS=f.jS.qc,i.RS=f.zS.qc,i.SS=f.ZS.qc,i.MS=f.qS.qc,i.xS=f.JS.qc,i.DS=f.QS.qc;const h=f.head.fA,l=f.head.fA,d=f.head.fA,w=f.head.fA,y=f.head.fA;for(let t=0;t<i.J_;t++){const t=f.jS.fA;1&t&&f.zS.jR,2&t&&f.ZS.jR,4&t&&f.qS.jR}for(let t=0;t<i.Jv;t++){1===f.QS.fA&&(f.JS.jR,f.JS.jR),f.JS.jR}i.NS=n,n+=2*i.Jv,1===h&&(i.PS=r,r+=i.Jv),255===l?(i.US=o,o+=i.Jv):i.US=-l-1,1===d&&(i.BS=c,c+=i.Jv),1===w&&(i.GS=u,u+=i.Jv),1===y&&(i.kS=e,e+=i.J_),i.HS=s,s+=i.bS,f.metadata[t]=i}}catch(t){console.log('Error loading model index'),console.error(t)}}static gM(t,i){if(null===f.metadata&&(f.metadata=[]),null===t){const t=new a;return t.J_=0,t.Jv=0,t.bS=0,void(f.metadata[i]=t)}const s=new h.A(t);s.qc=s.length-18;const e=new a;e.data=t,e.J_=s.aA,e.Jv=s.aA,e.bS=s.fA,f.metadata[i]=e;const n=s.fA,r=s.fA,o=s.fA,l=s.fA,c=s.fA,u=s.aA,d=s.aA,w=s.aA,y=s.aA;let A=0;e.LS=A,A+=e.J_,e.DS=A,A+=e.Jv,e.US=A,255===r?A+=e.Jv:e.US=-r-1,e.GS=A,1===l?A+=e.Jv:e.GS=-1,e.PS=A,1===n?A+=e.Jv:e.PS=-1,e.kS=A,1===c?A+=e.J_:e.kS=-1,e.BS=A,1===o?A+=e.Jv:e.BS=-1,e.xS=A,A+=y,e.NS=A,A+=2*e.Jv,e.HS=A,A+=6*e.bS,e.RS=A,A+=u,e.SS=A,A+=d,e.MS=A,A+=w}static ko(){f.metadata=null,f.head=null,f.WS=null,f.YS=null,f.VS=null,f.KS=null,f.XS=null,f.jS=null,f.zS=null,f.ZS=null,f.qS=null,f.$S=null,f.JS=null,f.QS=null,f.axis=null,f.tM=null,f.iM=null,f.sM=null,f.hM=null,f.eM=null,f.nM=null,f.rM=null,f.oM=null,f.lM=null,f.aM=null,f.cM=null,f.fM=null,f.uM=null,f.dM=null,f.wM=null}static EM(t,i,s){return 2&~s?((i=i*(127&t)>>7)<2?i=2:i>126&&(i=126),(65408&t)+i):(i<0?i=0:i>127&&(i=127),127-i)}static q_=(t,i,s)=>{const h=t.J_,e=t.Jv,n=t.bS;let r,o,a,u,d;if(i){r=new Int32Array(h);for(let i=0;i<h;i++)r[i]=t.iC[i]}else r=t.iC;let w=null,y=null;if(s){o=new Int32Array(e),a=new Int32Array(e),u=new Int32Array(e);for(let i=0;i<e;i++)t._M&&(o[i]=t._M[i]),t.CM&&(a[i]=t.CM[i]),t.TM&&(u[i]=t.TM[i]);if(d=new Int32Array(e),t.$v)for(let i=0;i<e;i++)d[i]=t.$v[i];else for(let t=0;t<e;t++)d[t]=0;w=new l.As(h,null);for(let i=0;i<h;i++){const s=w[i]=new c;if(t.Uv){const h=t.Uv[i];h&&(s.x=h.x,s.y=h.y,s.z=h.z,s.w=h.w)}}y=t.Kv}else o=t._M,a=t.CM,u=t.TM,d=t.$v;return new f({J_:h,Q_:t.Q_,iC:r,tC:t.tC,Jv:e,Qv:t.Qv,tb:t.tb,ib:t.ib,_M:o,CM:a,TM:u,$v:d,OM:t.OM,vM:t.vM,o_:t.o_,priority:t.priority,bS:n,bM:t.bM,LM:t.LM,RM:t.RM,jv:t.jv,zv:t.zv,Zv:t.Zv,qv:t.qv,IO:t.IO,Xv:t.Xv,lC:t.lC,SM:t.SM,MM:t.MM,Uv:w,Kv:y})};static l_=(t,i,s,h)=>{const e=t.J_,n=t.Jv,r=t.bS;let o,l,a,c,u;if(h)o=t.Q_,l=t.iC,a=t.tC;else{o=new Int32Array(e),l=new Int32Array(e),a=new Int32Array(e);for(let i=0;i<e;i++)o[i]=t.Q_[i],l[i]=t.iC[i],a[i]=t.tC[i]}if(i)c=t.o_;else{c=new Int32Array(n);for(let i=0;i<n;i++)t.o_&&(c[i]=t.o_[i])}if(s)u=t.vM;else if(u=new Int32Array(n),t.vM)for(let i=0;i<n;i++)u[i]=t.vM[i];else for(let t=0;t<n;t++)u[t]=0;return new f({J_:e,Q_:o,iC:l,tC:a,Jv:n,Qv:t.Qv,tb:t.tb,ib:t.ib,_M:null,CM:null,TM:null,$v:t.$v,OM:t.OM,vM:u,o_:c,priority:t.priority,bS:r,bM:t.bM,LM:t.LM,RM:t.RM,kM:t.kM,xM:t.xM})};static uC=(t,i)=>{const s=t.J_,h=t.Jv,e=t.bS,n=new Int32Array(s),r=new Int32Array(s),o=new Int32Array(s);for(let i=0;i<s;i++)n[i]=t.Q_[i],r[i]=t.iC[i],o[i]=t.tC[i];let l;if(i)l=t.vM;else if(l=new Int32Array(h),t.vM)for(let i=0;i<h;i++)l[i]=t.vM[i];else for(let t=0;t<h;t++)l[t]=0;return new f({J_:s,Q_:n,iC:r,tC:o,Jv:h,Qv:t.Qv,tb:t.tb,ib:t.ib,_M:t._M,CM:t.CM,TM:t.TM,$v:t.$v,OM:t.OM,vM:l,o_:t.o_,priority:t.priority,bS:e,bM:t.bM,LM:t.LM,RM:t.RM,nC:t.nC,eC:t.eC})};static eL=(t,i)=>{let s=!1,h=!1,e=!1,n=!1,r=0,o=0,l=0,a=-1;for(let c=0;c<i;c++){const i=t[c];i&&(r+=i.J_,o+=i.Jv,l+=i.bS,s||=null!==i.$v,i.OM?h=!0:(-1===a&&(a=i.priority),a!==i.priority&&(h=!0)),e||=null!==i.vM,n||=null!==i.o_)}const c=new Int32Array(r),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(o),y=new Int32Array(o),A=new Int32Array(o),p=new Int32Array(o),m=new Int32Array(o),I=new Int32Array(o),g=new Int32Array(l),E=new Int32Array(l),_=new Int32Array(l);let C=null;s&&(C=new Int32Array(o));let T=null;h&&(T=new Int32Array(o));let O=null;e&&(O=new Int32Array(o));let v=null;n&&(v=new Int32Array(o)),r=0,o=0,l=0;for(let a=0;a<i;a++){const i=t[a];if(i){const t=r;for(let t=0;t<i.J_;t++)c[r]=i.Q_[t],u[r]=i.iC[t],d[r]=i.tC[t],r++;for(let r=0;r<i.Jv;r++)w[o]=i.Qv[r]+t,y[o]=i.tb[r]+t,A[o]=i.ib[r]+t,i._M&&(p[o]=i._M[r]),i.CM&&(m[o]=i.CM[r]),i.TM&&(I[o]=i.TM[r]),s&&(i.$v?C&&(C[o]=i.$v[r]):C&&(C[o]=0)),h&&(i.OM?T&&(T[o]=i.OM[r]):T&&(T[o]=i.priority)),e&&(i.vM?O&&(O[o]=i.vM[r]):O&&(O[o]=0)),n&&i.o_&&v&&(v[o]=i.o_[r]),o++;for(let s=0;s<i.bS;s++)g[l]=i.bM[s]+t,E[l]=i.LM[s]+t,_[l]=i.RM[s]+t,l++}}const b=new f({J_:r,Q_:c,iC:u,tC:d,Jv:o,Qv:w,tb:y,ib:A,_M:p,CM:m,TM:I,$v:C,OM:T,vM:O,o_:v,priority:a,bS:l,bM:g,LM:E,RM:_});return b.wC(),b};static Ba=(t,i)=>{let s=!1,h=!1,e=!1,n=!1,r=0,o=0,l=0,a=-1;for(let c=0;c<i;c++){const i=t[c];i&&(r+=i.J_,o+=i.Jv,l+=i.bS,s||=null!==i.$v,i.OM?h=!0:(-1===a&&(a=i.priority),a!==i.priority&&(h=!0)),e||=null!==i.vM,n||=null!==i.xM)}const c=new Int32Array(r),u=new Int32Array(r),d=new Int32Array(r),w=new Int32Array(r),y=new Int32Array(o),A=new Int32Array(o),p=new Int32Array(o),m=new Int32Array(l),I=new Int32Array(l),g=new Int32Array(l);let E=null;s&&(E=new Int32Array(o));let _=null;h&&(_=new Int32Array(o));let C=null;e&&(C=new Int32Array(o));let T=null;n&&(T=new Int32Array(o));const O=new Int32Array(o);r=0,o=0,l=0;const v=(t,i,s,h,e,n,r)=>{let o=-1;const l=t.Q_[i],a=t.iC[i],c=t.tC[i];for(let t=0;t<r;t++)if(l===s[t]&&a===h[t]&&c===e[t]){o=t;break}return-1===o&&(s[r]=l,h[r]=a,e[r]=c,n&&t.kM&&(n[r]=t.kM[i]),o=r++),{vertex:o,J_:r}};for(let a=0;a<i;a++){const i=t[a];if(i){for(let t=0;t<i.Jv;t++){s&&(i.$v?E&&(E[o]=i.$v[t]):E&&(E[o]=0)),h&&(i.OM?_&&(_[o]=i.OM[t]):_&&(_[o]=i.priority)),e&&(i.vM?C&&(C[o]=i.vM[t]):C&&(C[o]=0)),n&&i.xM&&T&&(T[o]=i.xM[t]),i.o_&&(O[o]=i.o_[t]);const l=v(i,i.Qv[t],c,u,d,w,r);r=l.J_;const a=v(i,i.tb[t],c,u,d,w,r);r=a.J_;const f=v(i,i.ib[t],c,u,d,w,r);r=f.J_,y[o]=l.vertex,A[o]=a.vertex,p[o]=f.vertex,o++}for(let t=0;t<i.bS;t++){const s=v(i,i.bM[t],c,u,d,w,r);r=s.J_;const h=v(i,i.LM[t],c,u,d,w,r);r=h.J_;const e=v(i,i.RM[t],c,u,d,w,r);r=e.J_,m[l]=s.vertex,I[l]=h.vertex,g[l]=e.vertex,l++}}}return new f({J_:r,Q_:c,iC:u,tC:d,Jv:o,Qv:y,tb:A,ib:p,_M:null,CM:null,TM:null,$v:E,OM:_,vM:C,o_:O,priority:a,bS:l,bM:m,LM:I,RM:g,kM:w,xM:T})};static model=t=>{if(!f.metadata)throw new Error('cant loading model metadata!!!!!');const i=f.metadata[t];if(!i)throw console.log(`Error model:${t} not found!`),new Error('cant loading model metadata!!!!!');if(!(f.head&&f.WS&&f.YS&&f.VS&&f.KS&&f.XS&&f.jS&&f.zS&&f.ZS&&f.qS&&f.$S&&f.JS&&f.QS&&f.axis))throw new Error('cant loading model!!!!!');const s=i.J_,h=i.Jv,e=i.bS,n=new Int32Array(s),r=new Int32Array(s),o=new Int32Array(s),l=new Int32Array(h),a=new Int32Array(h),c=new Int32Array(h),u=new Int32Array(e),d=new Int32Array(e),w=new Int32Array(e);let y=null;i.kS>=0&&(y=new Int32Array(s));let A=null;i.PS>=0&&(A=new Int32Array(h));let p=null,m=0;i.US>=0?p=new Int32Array(h):m=-i.US-1;let I=null;i.BS>=0&&(I=new Int32Array(h));let g=null;i.GS>=0&&(g=new Int32Array(h));const E=new Int32Array(h);f.jS.qc=i.LS,f.zS.qc=i.RS,f.ZS.qc=i.SS,f.qS.qc=i.MS,f.$S.qc=i.kS;let _,C,T,O=0,v=0,b=0;for(let t=0;t<s;t++){const i=f.jS.fA;_=0,1&i&&(_=f.zS.jR),C=0,2&i&&(C=f.ZS.jR),T=0,4&i&&(T=f.qS.jR),n[t]=O+_,r[t]=v+C,o[t]=b+T,O=n[t],v=r[t],b=o[t],y&&(y[t]=f.$S.fA)}f.WS.qc=i.NS,f.YS.qc=i.PS,f.VS.qc=i.US,f.KS.qc=i.BS,f.XS.qc=i.GS;for(let t=0;t<h;t++)E[t]=f.WS.aA,A&&(A[t]=f.YS.fA),p&&(p[t]=f.VS.fA),I&&(I[t]=f.KS.fA),g&&(g[t]=f.XS.fA);f.JS.qc=i.xS,f.QS.qc=i.DS,_=0,C=0,T=0;let L=0;for(let t=0;t<h;t++){const i=f.QS.fA;if(1===i)_=f.JS.jR+L,L=_,C=f.JS.jR+L,L=C,T=f.JS.jR+L,L=T;else if(2===i)C=T,T=f.JS.jR+L,L=T;else if(3===i)_=T,T=f.JS.jR+L,L=T;else if(4===i){const t=_;_=C,C=t,T=f.JS.jR+L,L=T}l[t]=_,a[t]=C,c[t]=T}f.axis.qc=6*i.HS;for(let t=0;t<e;t++)u[t]=f.axis.aA,d[t]=f.axis.aA,w[t]=f.axis.aA;return new f({J_:s,Q_:n,iC:r,tC:o,Jv:h,Qv:l,tb:a,ib:c,_M:null,CM:null,TM:null,$v:A,OM:p,vM:I,o_:E,priority:m,bS:e,bM:u,LM:d,RM:w,kM:y,xM:g})};static DM=(t,i)=>{if(!f.metadata||!f.metadata[i])throw new Error('No model metadata');const s=f.metadata[i];if(s.data=t,!s.data.length)throw new Error('No model data');const e=s.J_,n=s.Jv,r=s.bS,o=new Int32Array(e),l=new Int32Array(e),a=new Int32Array(e),c=new Int32Array(n),u=new Int32Array(n),d=new Int32Array(n),w=new Int32Array(r),y=new Int32Array(r),A=new Int32Array(r);let p=null;s.kS>=0&&(p=new Int32Array(e));let m=null;s.PS>=0&&(m=new Int32Array(n));let I=null,g=0;s.US>=0?I=new Int32Array(n):g=-s.US-1;let E=null;s.BS>=0&&(E=new Int32Array(n));let _=null;s.GS>=0&&(_=new Int32Array(n));const C=new Int32Array(n),T=new h.A(s.data);T.qc=s.LS;const O=new h.A(s.data);O.qc=s.RS;const v=new h.A(s.data);v.qc=s.SS;const b=new h.A(s.data);b.qc=s.MS;const L=new h.A(s.data);L.qc=s.kS;let R,S,M,k=0,x=0,D=0;for(let t=0;t<e;t++){const i=T.fA;R=0,1&i&&(R=O.jR),S=0,2&i&&(S=v.jR),M=0,4&i&&(M=b.jR),o[t]=k+R,l[t]=x+S,a[t]=D+M,k=o[t],x=l[t],D=a[t],p&&(p[t]=L.fA)}const N=new h.A(s.data);N.qc=s.NS;const P=new h.A(s.data);P.qc=s.PS;const F=new h.A(s.data);F.qc=s.US;const U=new h.A(s.data);U.qc=s.BS;const B=new h.A(s.data);B.qc=s.GS;for(let t=0;t<n;t++)C[t]=N.aA,m&&(m[t]=P.fA),I&&(I[t]=F.fA),E&&(E[t]=U.fA),_&&(_[t]=B.fA);const G=new h.A(s.data);G.qc=s.xS;const H=new h.A(s.data);H.qc=s.DS,R=0,S=0,M=0;let W=0;for(let t=0;t<n;t++){const i=H.fA;if(1===i)R=G.jR+W,W=R,S=G.jR+W,W=S,M=G.jR+W,W=M;else if(2===i)S=M,M=G.jR+W,W=M;else if(3===i)R=M,M=G.jR+W,W=M;else if(4===i){const t=R;R=S,S=t,M=G.jR+W,W=M}c[t]=R,u[t]=S,d[t]=M}const Y=new h.A(s.data);Y.qc=s.HS;for(let t=0;t<r;t++)w[t]=Y.aA,y[t]=Y.aA,A[t]=Y.aA;return new f({J_:e,Q_:o,iC:l,tC:a,Jv:n,Qv:c,tb:u,ib:d,_M:null,CM:null,TM:null,$v:m,OM:I,vM:E,o_:C,priority:g,bS:r,bM:w,LM:y,RM:A,kM:p,xM:_})};J_;Q_;iC;tC;Jv;Qv;tb;ib;_M;CM;TM;$v;OM;vM;o_;priority;bS;bM;LM;RM;jv;zv;Zv;qv;IO;Xv;lC;SM;MM;kM;xM;nC;eC;Uv;Kv;oC=0;yC=!1;NM=-1;PM=-1;constructor(t){super(),this.J_=t.J_,this.Q_=t.Q_,this.iC=t.iC,this.tC=t.tC,this.Jv=t.Jv,this.Qv=t.Qv,this.tb=t.tb,this.ib=t.ib,this._M=t._M,this.CM=t.CM,this.TM=t.TM,this.$v=t.$v,this.OM=t.OM,this.vM=t.vM,this.o_=t.o_,this.priority=t.priority,this.bS=t.bS,this.bM=t.bM,this.LM=t.LM,this.RM=t.RM,this.jv=t.jv??0,this.zv=t.zv??0,this.Zv=t.Zv??0,this.qv=t.qv??0,this.IO=t.IO??0,this.Xv=t.Xv??0,this.lC=t.lC??0,this.SM=t.SM??0,this.MM=t.MM??0,this.kM=t.kM??null,this.xM=t.xM??null,this.nC=t.nC??null,this.eC=t.eC??null,this.Uv=t.Uv??null,this.Kv=t.Kv??null}wC(){this.lC=0,this.IO=0,this.Xv=0;for(let t=0;t<this.J_;t++){const i=this.Q_[t],s=this.iC[t],h=this.tC[t];-s>this.lC&&(this.lC=-s),s>this.Xv&&(this.Xv=s);const e=i*i+h*h;e>this.IO&&(this.IO=e)}this.IO=Math.sqrt(this.IO)+.99|0,this.MM=Math.sqrt(this.IO*this.IO+this.lC*this.lC)+.99|0,this.SM=this.MM+(Math.sqrt(this.IO*this.IO+this.Xv*this.Xv)+.99|0)}sC(){this.lC=0,this.Xv=0;for(let t=0;t<this.J_;t++){const i=this.iC[t];-i>this.lC&&(this.lC=-i),i>this.Xv&&(this.Xv=i)}this.MM=Math.sqrt(this.IO*this.IO+this.lC*this.lC)+.99|0,this.SM=this.MM+(Math.sqrt(this.IO*this.IO+this.Xv*this.Xv)+.99|0)}Va(){if(this.kM){const t=new Int32Array(256);let i=0;for(let s=0;s<this.J_;s++){const h=this.kM[s];t[h]++,h>i&&(i=h)}this.nC=new l.As(i+1,null);for(let s=0;s<=i;s++)this.nC[s]=new Int32Array(t[s]),t[s]=0;let s=0;for(;s<this.J_;){const i=this.kM[s],h=this.nC[i];h&&(h[t[i]++]=s++)}this.kM=null}if(this.xM){const t=new Int32Array(256);let i=0;for(let s=0;s<this.Jv;s++){const h=this.xM[s];t[h]++,h>i&&(i=h)}this.eC=new l.As(i+1,null);for(let s=0;s<=i;s++)this.eC[s]=new Int32Array(t[s]),t[s]=0;let s=0;for(;s<this.Jv;){const i=this.xM[s],h=this.eC[i];h&&(h[t[i]++]=s++)}this.xM=null}}dC(t,i,s){if(-1!==t)if(s&&-1!==i){const h=r.A.Fo[t],e=r.A.Fo[i],n=h.XR;f.Cn=0,f.mM=0,f.Tn=0;let o=0,l=s[o++];for(let t=0;t<h.length;t++){if(!h.zR)continue;const i=h.zR[t];for(;i>l;)l=s[o++];n&&n.types&&h.x&&h.y&&h.z&&n.labels&&(i!==l||0===n.types[i])&&this.FM(h.x[t],h.y[t],h.z[t],n.labels[i],n.types[i])}f.Cn=0,f.mM=0,f.Tn=0,o=0,l=s[o++];for(let t=0;t<e.length;t++){if(!e.zR)continue;const i=e.zR[t];for(;i>l;)l=s[o++];n&&n.types&&e.x&&e.y&&e.z&&n.labels&&(i===l||0===n.types[i])&&this.FM(e.x[t],e.y[t],e.z[t],n.labels[i],n.types[i])}}else this.Ka(t)}Ka(t){if(!this.nC||-1===t||!r.A.Fo[t])return;const i=r.A.Fo[t],s=i.XR;f.Cn=0,f.mM=0,f.Tn=0;for(let t=0;t<i.length;t++){if(!(i.zR&&i.x&&i.y&&i.z&&s&&s.labels&&s.types))continue;const h=i.zR[t];this.FM(i.x[t],i.y[t],i.z[t],s.labels[h],s.types[h])}}rC(){for(let t=0;t<this.J_;t++){const i=this.Q_[t];this.Q_[t]=this.tC[t],this.tC[t]=-i}}CR(t){const i=n.A.sin[t],s=n.A.cos[t];for(let t=0;t<this.J_;t++){const h=this.iC[t]*s-this.tC[t]*i>>16;this.tC[t]=this.iC[t]*i+this.tC[t]*s>>16,this.iC[t]=h}}translate(t,i,s){for(let h=0;h<this.J_;h++)this.Q_[h]+=i,this.iC[h]+=t,this.tC[h]+=s}Ga(t,i){if(this.o_)for(let s=0;s<this.Jv;s++)this.o_[s]===t&&(this.o_[s]=i)}hC(){for(let t=0;t<this.J_;t++)this.tC[t]=-this.tC[t];for(let t=0;t<this.Jv;t++){const i=this.Qv[t];this.Qv[t]=this.ib[t],this.ib[t]=i}}scale(t,i,s){for(let h=0;h<this.J_;h++)this.Q_[h]=this.Q_[h]*t/128|0,this.iC[h]=this.iC[h]*i/128|0,this.tC[h]=this.tC[h]*s/128|0}Xa(t,i,s,h,e,n){const r=i*(0|Math.sqrt(s*s+h*h+e*e))>>8;if(this._M&&this.CM&&this.TM||(this._M=new Int32Array(this.Jv),this.CM=new Int32Array(this.Jv),this.TM=new Int32Array(this.Jv)),!this.Uv){this.Uv=new l.As(this.J_,null);for(let t=0;t<this.J_;t++)this.Uv[t]=new c}for(let i=0;i<this.Jv;i++){const n=this.Qv[i],o=this.tb[i],l=this.ib[i],a=this.Q_[o]-this.Q_[n],c=this.iC[o]-this.iC[n],u=this.tC[o]-this.tC[n],d=this.Q_[l]-this.Q_[n],w=this.iC[l]-this.iC[n],y=this.tC[l]-this.tC[n];let A=c*y-w*u,p=u*d-y*a,m=a*w-d*c;for(;A>8192||p>8192||m>8192||A<-8192||p<-8192||m<-8192;)A>>=1,p>>=1,m>>=1;let I=0|Math.sqrt(A*A+p*p+m*m);if(I<=0&&(I=1),A=256*A/I|0,p=256*p/I|0,m=256*m/I|0,this.$v&&1&this.$v[i]){const n=t+((s*A+h*p+e*m)/(r+(r/2|0))|0);this.o_&&(this._M[i]=f.EM(this.o_[i],n,this.$v[i]))}else{let t=this.Uv[n];t&&(t.x+=A,t.y+=p,t.z+=m,t.w++),t=this.Uv[o],t&&(t.x+=A,t.y+=p,t.z+=m,t.w++),t=this.Uv[l],t&&(t.x+=A,t.y+=p,t.z+=m,t.w++)}}if(n)this.Hv(t,r,s,h,e);else{this.Kv=new l.As(this.J_,null);for(let t=0;t<this.J_;t++){const i=this.Uv[t],s=new c;i&&(s.x=i.x,s.y=i.y,s.z=i.z,s.w=i.w),this.Kv[t]=s}}n?this.wC():this.UM()}Hv(t,i,s,h,e){for(let n=0;n<this.Jv;n++){const r=this.Qv[n],o=this.tb[n],l=this.ib[n];if(!this.$v&&this.o_&&this.Uv&&this._M&&this.CM&&this.TM){const a=this.o_[n],c=this.Uv[r];c&&(this._M[n]=f.EM(a,t+((s*c.x+h*c.y+e*c.z)/(i*c.w)|0),0));const u=this.Uv[o];u&&(this.CM[n]=f.EM(a,t+((s*u.x+h*u.y+e*u.z)/(i*u.w)|0),0));const d=this.Uv[l];d&&(this.TM[n]=f.EM(a,t+((s*d.x+h*d.y+e*d.z)/(i*d.w)|0),0))}else if(this.$v&&!(1&this.$v[n])&&this.o_&&this.Uv&&this._M&&this.CM&&this.TM){const a=this.o_[n],c=this.$v[n],u=this.Uv[r];u&&(this._M[n]=f.EM(a,t+((s*u.x+h*u.y+e*u.z)/(i*u.w)|0),c));const d=this.Uv[o];d&&(this.CM[n]=f.EM(a,t+((s*d.x+h*d.y+e*d.z)/(i*d.w)|0),c));const w=this.Uv[l];w&&(this.TM[n]=f.EM(a,t+((s*w.x+h*w.y+e*w.z)/(i*w.w)|0),c))}}if(this.Uv=null,this.Kv=null,this.kM=null,this.xM=null,this.$v)for(let t=0;t<this.Jv;t++)if(!(2&~this.$v[t]))return;this.o_=null}Ca(t,i,s,h,e,r,o){const l=n.A.sin[t],a=n.A.cos[t],c=n.A.sin[i],u=n.A.cos[i],d=n.A.sin[s],w=n.A.cos[s],y=n.A.sin[h],A=n.A.cos[h],p=r*y+o*A>>16;for(let h=0;h<this.J_;h++){let m,I=this.Q_[h],g=this.iC[h],E=this.tC[h];0!==s&&(m=g*d+I*w>>16,g=g*w-I*d>>16,I=m),0!==t&&(m=g*a-E*l>>16,E=g*l+E*a>>16,g=m),0!==i&&(m=E*c+I*u>>16,E=E*u-I*c>>16,I=m),I+=e,g+=r,E+=o,m=g*A-E*y>>16,E=g*y+E*A>>16,g=m,f.sM&&f.hM&&f.eM&&(f.eM[h]=E-p,f.sM[h]=n.A.ma+((I<<9)/E|0),f.hM[h]=n.A.Ia+((g<<9)/E|0)),this.bS>0&&f.nM&&f.rM&&f.oM&&(f.nM[h]=I,f.rM[h]=g,f.oM[h]=E)}try{this.BM(!1,!1,0)}catch(t){}}draw(t,i,s,h,r,o,l,a,c){const u=a*r-o*h>>16,d=l*i+u*s>>16,w=this.IO*s>>16,y=d+w;if(y<=50||d>=3500)return;const A=a*h+o*r>>16;let p=A-this.IO<<9;if((p/y|0)>=e.A.nS)return;let m=A+this.IO<<9;if((m/y|0)<=-e.A.nS)return;const I=l*s-u*i>>16,g=this.IO*i>>16;let E=I+g<<9;if((E/y|0)<=-e.A.rS)return;let _=I-(g+(this.lC*s>>16))<<9;if((_/y|0)>=e.A.rS)return;let C=d-(w+(this.lC*i>>16))<=50,T=!1;if(c>0&&f.eu){let t=d-w;t<=50&&(t=50),A>0?(p=p/y|0,m=m/t|0):(m=m/y|0,p=p/t|0),I>0?(_=_/y|0,E=E/t|0):(E=E/y|0,_=_/t|0);const i=f.Xl-n.A.ma,s=f.jl-n.A.Ia;i>p&&i<m&&s>_&&s<E&&(this.yC?f.Lm[f.nu++]=c:T=!0)}const O=n.A.ma,v=n.A.Ia;let b=0,L=0;0!==t&&(b=n.A.sin[t],L=n.A.cos[t]);for(let e=0;e<this.J_;e++){let n,c=this.Q_[e],u=this.iC[e],w=this.tC[e];0!==t&&(n=w*b+c*L>>16,w=w*L-c*b>>16,c=n),c+=o,u+=l,w+=a,n=w*h+c*r>>16,w=w*r-c*h>>16,c=n,n=u*s-w*i>>16,w=u*i+w*s>>16,u=n,f.eM&&(f.eM[e]=w-d),w>=50&&f.sM&&f.hM?(f.sM[e]=O+((c<<9)/w|0),f.hM[e]=v+((u<<9)/w|0)):f.sM&&(f.sM[e]=-5e3,C=!0),(C||this.bS>0)&&f.nM&&f.rM&&f.oM&&(f.nM[e]=c,f.rM[e]=u,f.oM[e]=w)}try{this.BM(C,T,c)}catch(t){}}BM(t,i,s,h=!1){f.IM&&(this.NM=-1,this.PM=-1);for(let t=0;t<this.SM;t++)f.lM&&(f.lM[t]=0);for(let h=0;h<this.Jv;h++)if((!this.$v||-1!==this.$v[h])&&f.sM&&f.hM&&f.eM&&f.aM&&f.lM){const n=this.Qv[h],r=this.tb[h],o=this.ib[h],l=f.sM[n],a=f.sM[r],c=f.sM[o],u=f.hM[n],d=f.hM[r],w=f.hM[o],y=f.eM[n],A=f.eM[r],p=f.eM[o];if(!t||-5e3!==l&&-5e3!==a&&-5e3!==c){i&&this.GM(f.Xl,f.jl,u,d,w,l,a,c)&&(f.Lm[f.nu++]=s,i=!1);if((l-a)*(w-d)-(u-d)*(c-a)<=0)continue;if(f.iM&&(f.iM[h]=!1),f.tM&&(f.tM[h]=l<0||a<0||c<0||l>e.A.Nb||a>e.A.Nb||c>e.A.Nb),f.aM&&f.lM){const t=((y+A+p)/3|0)+this.MM;f.aM[t][f.lM[t]++]=h,f.IM&&this.GM(f.Xl,f.jl,u,d,w,l,a,c)&&this.PM<t&&(this.NM=h,this.PM=t)}}else if(f.iM&&(f.iM[h]=!0),f.aM&&f.lM){const t=((y+A+p)/3|0)+this.MM;f.aM[t][f.lM[t]++]=h}}if(!this.OM&&f.lM){for(let t=this.SM-1;t>=0;t--){const i=f.lM[t];if(!(i<=0)&&f.aM){const s=f.aM[t];for(let t=0;t<i;t++)this.HM(s[t],h)}}return}for(let t=0;t<12;t++)f.cM&&f.wM&&(f.cM[t]=0,f.wM[t]=0);if(f.lM)for(let t=this.SM-1;t>=0;t--){const i=f.lM[t];if(i>0&&f.aM){const s=f.aM[t];for(let h=0;h<i;h++)if(this.OM&&f.cM&&f.fM){const i=s[h],e=this.OM[i],n=f.cM[e]++;f.fM[e][n]=i,e<10&&f.wM?f.wM[e]+=t:10===e&&f.uM?f.uM[n]=t:f.dM&&(f.dM[n]=t)}}}let n=0;f.cM&&f.wM&&(f.cM[1]>0||f.cM[2]>0)&&(n=(f.wM[1]+f.wM[2])/(f.cM[1]+f.cM[2])|0);let r=0;f.cM&&f.wM&&(f.cM[3]>0||f.cM[4]>0)&&(r=(f.wM[3]+f.wM[4])/(f.cM[3]+f.cM[4])|0);let o=0;if(f.cM&&f.wM&&(f.cM[6]>0||f.cM[8]>0)&&(o=(f.wM[6]+f.wM[8])/(f.cM[6]+f.cM[8])|0),f.cM&&f.fM){let t,i=0,s=f.cM[10],e=f.fM[10],l=f.uM;i===s&&(i=0,s=f.cM[11],e=f.fM[11],l=f.dM),t=i<s&&l?l[i]:-1e3;for(let a=0;a<10;a++){for(;0===a&&t>n;)try{this.HM(e[i++],h),i===s&&e!==f.fM[11]&&(i=0,s=f.cM[11],e=f.fM[11],l=f.dM),t=i<s&&l?l[i]:-1e3}catch(t){}for(;3===a&&t>r;)try{this.HM(e[i++],h),i===s&&e!==f.fM[11]&&(i=0,s=f.cM[11],e=f.fM[11],l=f.dM),t=i<s&&l?l[i]:-1e3}catch(t){}for(;5===a&&t>o;)try{this.HM(e[i++],h),i===s&&e!==f.fM[11]&&(i=0,s=f.cM[11],e=f.fM[11],l=f.dM),t=i<s&&l?l[i]:-1e3}catch(t){}const c=f.cM[a],u=f.fM[a];for(let t=0;t<c;t++)this.HM(u[t],h)}for(;-1e3!==t;)try{this.HM(e[i++],h),i===s&&e!==f.fM[11]&&(i=0,e=f.fM[11],s=f.cM[11],l=f.dM),t=i<s&&l?l[i]:-1e3}catch(t){}}}HM(t,i=!1){if(f.iM&&f.iM[t])return void this.WM(t,i);const s=this.Qv[t],h=this.tb[t],e=this.ib[t];let r;if(f.tM&&(n.A.Db=f.tM[t]),this.vM?n.A.alpha=this.vM[t]:n.A.alpha=0,r=this.$v?3&this.$v[t]:0,i&&f.sM&&f.hM&&this._M&&this.CM&&this.TM)n.A.ad(f.sM[s],f.hM[s],f.sM[h],f.hM[h],n.A.palette[this._M[t]]),n.A.ad(f.sM[h],f.hM[h],f.sM[e],f.hM[e],n.A.palette[this.CM[t]]),n.A.ad(f.sM[e],f.hM[e],f.sM[s],f.hM[s],n.A.palette[this.TM[t]]);else if(0===r&&this._M&&this.CM&&this.TM&&f.sM&&f.hM)n.A.Bb(f.sM[s],f.sM[h],f.sM[e],f.hM[s],f.hM[h],f.hM[e],this._M[t],this.CM[t],this.TM[t]);else if(1===r&&this._M&&f.sM&&f.hM)n.A.CS(f.sM[s],f.sM[h],f.sM[e],f.hM[s],f.hM[h],f.hM[e],n.A.palette[this._M[t]]);else if(2===r&&this.$v&&this.o_&&this._M&&this.CM&&this.TM&&f.sM&&f.hM&&f.nM&&f.rM&&f.oM){const i=this.$v[t]>>2,r=this.bM[i],o=this.LM[i],l=this.RM[i];n.A.Yb(f.sM[s],f.sM[h],f.sM[e],f.hM[s],f.hM[h],f.hM[e],this._M[t],this.CM[t],this.TM[t],f.nM[r],f.rM[r],f.oM[r],f.nM[o],f.nM[l],f.rM[o],f.rM[l],f.oM[o],f.oM[l],this.o_[t])}else if(3===r&&this.$v&&this.o_&&this._M&&f.sM&&f.hM&&f.nM&&f.rM&&f.oM){const i=this.$v[t]>>2,r=this.bM[i],o=this.LM[i],l=this.RM[i];n.A.Yb(f.sM[s],f.sM[h],f.sM[e],f.hM[s],f.hM[h],f.hM[e],this._M[t],this._M[t],this._M[t],f.nM[r],f.rM[r],f.oM[r],f.nM[o],f.nM[l],f.rM[o],f.rM[l],f.oM[o],f.oM[l],this.o_[t])}}WM(t,i=!1){let s=0;if(f.oM){const i=n.A.ma,h=n.A.Ia,e=this.Qv[t],r=this.tb[t],o=this.ib[t],l=f.oM[e],a=f.oM[r],c=f.oM[o];if(l>=50&&f.sM&&f.hM&&this._M)f.yM[s]=f.sM[e],f.AM[s]=f.hM[e],f.pM[s++]=this._M[t];else if(f.nM&&f.rM&&this._M){const u=f.nM[e],d=f.rM[e],w=this._M[t];if(c>=50&&this.TM){const e=(50-l)*n.A.fS[c-l];f.yM[s]=i+((u+((f.nM[o]-u)*e>>16)<<9)/50|0),f.AM[s]=h+((d+((f.rM[o]-d)*e>>16)<<9)/50|0),f.pM[s++]=w+((this.TM[t]-w)*e>>16)}if(a>=50&&this.CM){const e=(50-l)*n.A.fS[a-l];f.yM[s]=i+((u+((f.nM[r]-u)*e>>16)<<9)/50|0),f.AM[s]=h+((d+((f.rM[r]-d)*e>>16)<<9)/50|0),f.pM[s++]=w+((this.CM[t]-w)*e>>16)}}if(a>=50&&f.sM&&f.hM&&this.CM)f.yM[s]=f.sM[r],f.AM[s]=f.hM[r],f.pM[s++]=this.CM[t];else if(f.nM&&f.rM&&this.CM){const u=f.nM[r],d=f.rM[r],w=this.CM[t];if(l>=50&&this._M){const r=(50-a)*n.A.fS[l-a];f.yM[s]=i+((u+((f.nM[e]-u)*r>>16)<<9)/50|0),f.AM[s]=h+((d+((f.rM[e]-d)*r>>16)<<9)/50|0),f.pM[s++]=w+((this._M[t]-w)*r>>16)}if(c>=50&&this.TM){const e=(50-a)*n.A.fS[c-a];f.yM[s]=i+((u+((f.nM[o]-u)*e>>16)<<9)/50|0),f.AM[s]=h+((d+((f.rM[o]-d)*e>>16)<<9)/50|0),f.pM[s++]=w+((this.TM[t]-w)*e>>16)}}if(c>=50&&f.sM&&f.hM&&this.TM)f.yM[s]=f.sM[o],f.AM[s]=f.hM[o],f.pM[s++]=this.TM[t];else if(f.nM&&f.rM&&this.TM){const u=f.nM[o],d=f.rM[o],w=this.TM[t];if(a>=50&&this.CM){const e=(50-c)*n.A.fS[a-c];f.yM[s]=i+((u+((f.nM[r]-u)*e>>16)<<9)/50|0),f.AM[s]=h+((d+((f.rM[r]-d)*e>>16)<<9)/50|0),f.pM[s++]=w+((this.CM[t]-w)*e>>16)}if(l>=50&&this._M){const r=(50-c)*n.A.fS[l-c];f.yM[s]=i+((u+((f.nM[e]-u)*r>>16)<<9)/50|0),f.AM[s]=h+((d+((f.rM[e]-d)*r>>16)<<9)/50|0),f.pM[s++]=w+((this._M[t]-w)*r>>16)}}}const h=f.yM[0],r=f.yM[1],o=f.yM[2],l=f.AM[0],a=f.AM[1],c=f.AM[2];if(!((h-r)*(c-a)-(l-a)*(o-r)<=0))if(n.A.Db=!1,3===s){let s;if((h<0||r<0||o<0||h>e.A.Nb||r>e.A.Nb||o>e.A.Nb)&&(n.A.Db=!0),s=this.$v?3&this.$v[t]:0,i)n.A.ad(h,r,l,a,f.pM[0]),n.A.ad(r,o,a,c,f.pM[1]),n.A.ad(o,h,c,l,f.pM[2]);else if(0===s)n.A.Bb(h,r,o,l,a,c,f.pM[0],f.pM[1],f.pM[2]);else if(1===s&&this._M)n.A.CS(h,r,o,l,a,c,n.A.palette[this._M[t]]);else if(2===s&&this.$v&&this.o_&&f.nM&&f.rM&&f.oM){const i=this.$v[t]>>2,s=this.bM[i],e=this.LM[i],u=this.RM[i];n.A.Yb(h,r,o,l,a,c,f.pM[0],f.pM[1],f.pM[2],f.nM[s],f.rM[s],f.oM[s],f.nM[e],f.nM[u],f.rM[e],f.rM[u],f.oM[e],f.oM[u],this.o_[t])}else if(3===s&&this.$v&&this.o_&&this._M&&f.nM&&f.rM&&f.oM){const i=this.$v[t]>>2,s=this.bM[i],e=this.LM[i],u=this.RM[i];n.A.Yb(h,r,o,l,a,c,this._M[t],this._M[t],this._M[t],f.nM[s],f.rM[s],f.oM[s],f.nM[e],f.nM[u],f.rM[e],f.rM[u],f.oM[e],f.oM[u],this.o_[t])}}else if(4===s){let s;if((h<0||r<0||o<0||h>e.A.Nb||r>e.A.Nb||o>e.A.Nb||f.yM[3]<0||f.yM[3]>e.A.Nb)&&(n.A.Db=!0),s=this.$v?3&this.$v[t]:0,i)n.A.ad(h,r,l,a,f.pM[0]),n.A.ad(r,o,a,c,f.pM[1]),n.A.ad(o,f.yM[3],c,f.AM[3],f.pM[2]),n.A.ad(f.yM[3],h,f.AM[3],l,f.pM[3]);else if(0===s)n.A.Bb(h,r,o,l,a,c,f.pM[0],f.pM[1],f.pM[2]),n.A.Bb(h,o,f.yM[3],l,c,f.AM[3],f.pM[0],f.pM[2],f.pM[3]);else if(1===s){if(this._M){const i=n.A.palette[this._M[t]];n.A.CS(h,r,o,l,a,c,i),n.A.CS(h,o,f.yM[3],l,c,f.AM[3],i)}}else if(2===s&&this.$v&&this.o_&&f.nM&&f.rM&&f.oM){const i=this.$v[t]>>2,s=this.bM[i],e=this.LM[i],u=this.RM[i];n.A.Yb(h,r,o,l,a,c,f.pM[0],f.pM[1],f.pM[2],f.nM[s],f.rM[s],f.oM[s],f.nM[e],f.nM[u],f.rM[e],f.rM[u],f.oM[e],f.oM[u],this.o_[t]),n.A.Yb(h,o,f.yM[3],l,c,f.AM[3],f.pM[0],f.pM[2],f.pM[3],f.nM[s],f.rM[s],f.oM[s],f.nM[e],f.nM[u],f.rM[e],f.rM[u],f.oM[e],f.oM[u],this.o_[t])}else if(3===s&&this.$v&&this.o_&&this._M&&f.nM&&f.rM&&f.oM){const i=this.$v[t]>>2,s=this.bM[i],e=this.LM[i],u=this.RM[i];n.A.Yb(h,r,o,l,a,c,this._M[t],this._M[t],this._M[t],f.nM[s],f.rM[s],f.oM[s],f.nM[e],f.nM[u],f.rM[e],f.rM[u],f.oM[e],f.oM[u],this.o_[t]),n.A.Yb(h,o,f.yM[3],l,c,f.AM[3],this._M[t],this._M[t],this._M[t],f.nM[s],f.rM[s],f.oM[s],f.nM[e],f.nM[u],f.rM[e],f.rM[u],f.oM[e],f.oM[u],this.o_[t])}}}FM(t,i,s,h,e){if(!h)return;const r=h.length;if(0===e){let e=0;f.Cn=0,f.mM=0,f.Tn=0;for(let t=0;t<r;t++){if(!this.nC)continue;const i=h[t];if(i<this.nC.length){const t=this.nC[i];if(t)for(let i=0;i<t.length;i++){const s=t[i];f.Cn+=this.Q_[s],f.mM+=this.iC[s],f.Tn+=this.tC[s],e++}}}e>0?(f.Cn=(f.Cn/e|0)+t,f.mM=(f.mM/e|0)+i,f.Tn=(f.Tn/e|0)+s):(f.Cn=t,f.mM=i,f.Tn=s)}else if(1===e)for(let e=0;e<r;e++){const n=h[e];if(!this.nC||n>=this.nC.length)continue;const r=this.nC[n];if(r)for(let h=0;h<r.length;h++){const e=r[h];this.Q_[e]+=t,this.iC[e]+=i,this.tC[e]+=s}}else if(2===e)for(let e=0;e<r;e++){const r=h[e];if(!this.nC||r>=this.nC.length)continue;const o=this.nC[r];if(o)for(let h=0;h<o.length;h++){const e=o[h];this.Q_[e]-=f.Cn,this.iC[e]-=f.mM,this.tC[e]-=f.Tn;const r=8*(255&t),l=8*(255&i),a=8*(255&s);let c,u;if(0!==a){c=n.A.sin[a],u=n.A.cos[a];const t=this.iC[e]*c+this.Q_[e]*u>>16;this.iC[e]=this.iC[e]*u-this.Q_[e]*c>>16,this.Q_[e]=t}if(0!==r){c=n.A.sin[r],u=n.A.cos[r];const t=this.iC[e]*u-this.tC[e]*c>>16;this.tC[e]=this.iC[e]*c+this.tC[e]*u>>16,this.iC[e]=t}if(0!==l){c=n.A.sin[l],u=n.A.cos[l];const t=this.tC[e]*c+this.Q_[e]*u>>16;this.tC[e]=this.tC[e]*u-this.Q_[e]*c>>16,this.Q_[e]=t}this.Q_[e]+=f.Cn,this.iC[e]+=f.mM,this.tC[e]+=f.Tn}}else if(3===e)for(let e=0;e<r;e++){const n=h[e];if(!this.nC||n>=this.nC.length)continue;const r=this.nC[n];if(r)for(let h=0;h<r.length;h++){const e=r[h];this.Q_[e]-=f.Cn,this.iC[e]-=f.mM,this.tC[e]-=f.Tn,this.Q_[e]=this.Q_[e]*t/128|0,this.iC[e]=this.iC[e]*i/128|0,this.tC[e]=this.tC[e]*s/128|0,this.Q_[e]+=f.Cn,this.iC[e]+=f.mM,this.tC[e]+=f.Tn}}else if(5===e&&this.eC&&this.vM)for(let i=0;i<r;i++){const s=h[i];if(s>=this.eC.length)continue;const e=this.eC[s];if(e)for(let i=0;i<e.length;i++){const s=e[i];this.vM[s]+=8*t,this.vM[s]<0&&(this.vM[s]=0),this.vM[s]>255&&(this.vM[s]=255)}}}UM(){this.lC=0,this.IO=0,this.Xv=0,this.jv=999999,this.zv=-999999,this.qv=-99999,this.Zv=99999;for(let t=0;t<this.J_;t++){const i=this.Q_[t],s=this.iC[t],h=this.tC[t];i<this.jv&&(this.jv=i),i>this.zv&&(this.zv=i),h<this.Zv&&(this.Zv=h),h>this.qv&&(this.qv=h),-s>this.lC&&(this.lC=-s),s>this.Xv&&(this.Xv=s);const e=i*i+h*h;e>this.IO&&(this.IO=e)}this.IO=0|Math.sqrt(this.IO),this.MM=0|Math.sqrt(this.IO*this.IO+this.lC*this.lC),this.SM=this.MM+(0|Math.sqrt(this.IO*this.IO+this.Xv*this.Xv))}GM(t,i,s,h,e,n,r,o){return!(i<s&&i<h&&i<e)&&(!(i>s&&i>h&&i>e)&&(!(t<n&&t<r&&t<o)&&(t<=n||t<=r||t<=o)))}YM(t){if(!(f.sM&&f.hM&&this._M&&this.CM&&this.TM))return;const i=this.Qv[t],s=this.tb[t],h=this.ib[t];n.A.ad(f.sM[i],f.hM[i],f.sM[s],f.hM[s],n.A.palette[1e3]),n.A.ad(f.sM[s],f.hM[s],f.sM[h],f.hM[h],n.A.palette[1e3]),n.A.ad(f.sM[h],f.hM[h],f.sM[i],f.hM[i],n.A.palette[1e3])}}},2511:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(8950),e=s(1069),n=s(4474),r=s(880);class o extends n.A{Ic;width;height;Pc;Fc;Zl;Td;constructor(t,i){super(),this.Ic=new Int32Array(t*i),this.width=this.Zl=t,this.height=this.Td=i,this.Pc=this.Fc=0}static Dc=async(t,i)=>{const s=t.read(i+'.dat');if(!s)throw new Error(`${i} jpeg not found!`);const h=await(0,r.r)(s),e=new o(h.width,h.height),n=new Uint32Array(h.data.buffer),l=e.Ic;for(let t=0;t<l.length;t++){const i=n[t];l[t]=(i>>24&255)<<24|(255&i)<<16|(i>>8&255)<<8|i>>16&255}return e};static rc=(t,i,s=0)=>{const h=new e.A(t.read(i+'.dat')),n=new e.A(t.read('index.dat'));n.qc=h.aA;const r=n.aA,l=n.aA,a=[],c=n.fA-1;for(let t=0;t<c;t++)a[t+1]=n.O_,0===a[t+1]&&(a[t+1]=1);for(let t=0;t<s;t++)n.qc+=2,h.qc+=n.aA*n.aA,n.qc+=1;if(h.qc>h.length||n.qc>n.length)throw new Error;const f=n.fA,u=n.fA,d=n.aA,w=n.aA,y=new o(d,w);y.Pc=f,y.Fc=u,y.Zl=r,y.Td=l;const A=n.fA;if(0===A){const t=y.width*y.height;for(let i=0;i<t;i++)y.Ic[i]=a[h.fA]}else if(1===A){const t=y.width;for(let i=0;i<t;i++){const s=y.height;for(let e=0;e<s;e++)y.Ic[i+e*t]=a[h.fA]}}return y};bind(){h.A.bind(this.Ic,this.width,this.height)}draw(t,i){t|=0,i|=0;let s=(t+=this.Pc)+(i+=this.Fc)*h.A.EC,e=0,n=this.height,r=this.width,o=h.A.EC-r,l=0;if(i<h.A.top){const t=h.A.top-i;n-=t,i=h.A.top,e+=t*r,s+=t*h.A.EC}if(i+n>h.A.bottom&&(n-=i+n-h.A.bottom),t<h.A.left){const i=h.A.left-t;r-=i,t=h.A.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.A.right){const i=t+r-h.A.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.VM(r,n,this.Ic,e,l,h.A.Ic,s,o)}zl(t,i,s){i|=0,s|=0;let e=(i+=this.Pc)+(s+=this.Fc)*h.A.EC,n=0,r=this.height,o=this.width,l=h.A.EC-o,a=0;if(s<h.A.top){const t=h.A.top-s;r-=t,s=h.A.top,n+=t*o,e+=t*h.A.EC}if(s+r>h.A.bottom&&(r-=s+r-h.A.bottom),i<h.A.left){const t=h.A.left-i;o-=t,i=h.A.left,n+=t,e+=t,a+=t,l+=t}if(i+o>h.A.right){const t=i+o-h.A.right;o-=t,a+=t,l+=t}o>0&&r>0&&this.KM(o,r,this.Ic,n,a,h.A.Ic,e,l,t)}dc(t,i){t|=0,i|=0;let s=(t+=this.Pc)+(i+=this.Fc)*h.A.EC,e=0,n=this.height,r=this.width,o=h.A.EC-r,l=0;if(i<h.A.top){const t=h.A.top-i;n-=t,i=h.A.top,e+=t*r,s+=t*h.A.EC}if(i+n>h.A.bottom&&(n-=i+n-h.A.bottom),t<h.A.left){const i=h.A.left-t;r-=i,t=h.A.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.A.right){const i=t+r-h.A.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.XM(r,n,this.Ic,e,l,h.A.Ic,s,o)}fc(){const t=this.Ic,i=this.width,s=this.height;for(let h=0;h<s;h++){const s=i/2|0;for(let e=0;e<s;e++){const s=e+h*i,n=i-e-1+h*i,r=t[s];t[s]=t[n],t[n]=r}}}uc(){const t=this.Ic,i=this.width,s=this.height;for(let h=0;h<(s/2|0);h++)for(let e=0;e<i;e++){const n=e+h*i,r=e+(s-h-1)*i,o=t[n];t[n]=t[r],t[r]=o}}translate(t,i,s){for(let h=0;h<this.Ic.length;h++){const e=this.Ic[h];if(0!==e){let n=e>>16&255;n+=t,n<1?n=1:n>255&&(n=255);let r=e>>8&255;r+=i,r<1?r=1:r>255&&(r=255);let o=255&e;o+=s,o<1?o=1:o>255&&(o=255),this.Ic[h]=(n<<16)+(r<<8)+o}}}LC(t,i,s,e){t|=0,i|=0,s|=0,e|=0;try{const n=this.width;let r=0,o=0;const l=this.Zl,a=this.Td,c=(l<<16)/s|0,f=(a<<16)/e|0;t+=(this.Pc*s+l-1)/l|0,i+=(this.Fc*e+a-1)/a|0,this.Pc*s%l!=0&&(r=(l-this.Pc*s%l<<16)/s|0),this.Fc*e%a!=0&&(o=(a-this.Fc*e%a<<16)/e|0),s=s*(this.width-(r>>16))/l|0,e=e*(this.height-(o>>16))/a|0;let u=t+i*h.A.EC,d=h.A.EC-s;if(i<h.A.top){const t=h.A.top-i;e-=t,i=0,u+=t*h.A.EC,o+=f*t}if(i+e>h.A.bottom&&(e-=i+e-h.A.bottom),t<h.A.left){const i=h.A.left-t;s-=i,t=0,u+=i,r+=c*i,d+=i}if(t+s>h.A.right){const i=t+s-h.A.right;s-=i,d+=i}this.scale(s,e,this.Ic,r,o,h.A.Ic,d,u,n,c,f)}catch(t){console.error('error in sprite clipping routine')}}Id(t,i,s,e,n,r,o,l,a,c){t|=0,i|=0,s|=0,e|=0;try{const f=-s/2|0,u=-e/2|0,d=65536*Math.sin(a/326.11)|0,w=65536*Math.cos(a/326.11)|0,y=d*c>>8,A=w*c>>8;let p=(o<<16)+u*y+f*A,m=u*A-f*y+(l<<16),I=t+i*h.A.EC;for(let t=0;t<e;t++){const i=n[t];let s=I+i,e=p+A*i,o=m-y*i;for(let i=-r[t];i<0;i++)h.A.Ic[s++]=this.Ic[(e>>16)+(o>>16)*this.width],e+=A,o-=y;p+=y,m+=A,I+=h.A.EC}}catch(t){}}Cd(t,i,s){t|=0,i|=0;let e=(t+=this.Pc)+(i+=this.Fc)*h.A.EC,n=0,r=this.height,o=this.width,l=h.A.EC-o,a=0;if(i<h.A.top){const t=h.A.top-i;r-=t,i=h.A.top,n+=t*o,e+=t*h.A.EC}if(i+r>h.A.bottom&&(r-=i+r-h.A.bottom),t<h.A.left){const i=h.A.left-t;o-=i,t=h.A.left,n+=i,e+=i,a+=i,l+=i}if(t+o>h.A.right){const i=t+o-h.A.right;o-=i,a+=i,l+=i}o>0&&r>0&&this.jM(o,r,this.Ic,a,n,h.A.Ic,e,l,s.Ic)}scale(t,i,s,h,e,n,r,o,l,a,c){try{const f=h;for(let u=-i;u<0;u++){const i=(e>>16)*l;for(let e=-t;e<0;e++){const t=s[(h>>16)+i];0===t?o++:n[o++]=t,h+=a}e+=c,h=f,o+=r}}catch(t){console.error('error in plot_scale')}}XM(t,i,s,h,e,n,r,o){const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++)n[r++]=s[h++],n[r++]=s[h++],n[r++]=s[h++],n[r++]=s[h++];for(let i=t;i<0;i++)n[r++]=s[h++];r+=o,h+=e}}KM(t,i,s,h,e,n,r,o,l){const a=256-l;for(let c=-i;c<0;c++){for(let i=-t;i<0;i++){const t=s[h++];if(0===t)r++;else{const i=n[r];n[r++]=((16711935&t)*l+(16711935&i)*a&4278255360)+((65280&t)*l+(65280&i)*a&16711680)>>8}}r+=o,h+=e}}VM(t,i,s,h,e,n,r,o){const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++){let t=s[h++];0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t,t=s[h++],0===t?r++:n[r++]=t}for(let i=t;i<0;i++){const t=s[h++];0===t?r++:n[r++]=t}r+=o,h+=e}}jM(t,i,s,h,e,n,r,o,l){const a=-(t>>2);t=-(3&t);for(let c=-i;c<0;c++){for(let t=a;t<0;t++){let t=s[e++];0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++,t=s[e++],0!==t&&0===l[r]?n[r++]=t:r++}for(let i=t;i<0;i++){const t=s[e++];0!==t&&0===l[r]?n[r++]=t:r++}r+=o,e+=h}}}},1673:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(8950),e=s(1069),n=s(4474);class r extends n.A{Ic;width;height;Pc;Fc;Zl;Td;palette;constructor(t,i,s){super(),this.Ic=new Int8Array(t*i),this.width=this.Zl=t,this.height=this.Td=i,this.Pc=this.Fc=0,this.palette=s}static rc=(t,i,s=0)=>{const h=new e.A(t.read(i+'.dat')),n=new e.A(t.read('index.dat'));n.qc=h.aA;const o=n.aA,l=n.aA,a=n.fA,c=new Int32Array(a);for(let t=1;t<a;t++)c[t]=n.O_,0===c[t]&&(c[t]=1);for(let t=0;t<s;t++)n.qc+=2,h.qc+=n.aA*n.aA,n.qc+=1;if(h.qc>h.length||n.qc>n.length)throw new Error;const f=n.fA,u=n.fA,d=n.aA,w=n.aA,y=new r(d,w,c);y.Pc=f,y.Fc=u,y.Zl=o,y.Td=l;const A=y.Ic,p=n.fA;if(0===p){const t=y.width*y.height;for(let i=0;i<t;i++)A[i]=h.dA}else if(1===p){const t=y.width,i=y.height;for(let s=0;s<t;s++)for(let e=0;e<i;e++)A[s+e*t]=h.dA}return y};draw(t,i){t|=0,i|=0;let s=(t+=this.Pc)+(i+=this.Fc)*h.A.EC,e=0,n=this.height,r=this.width,o=h.A.EC-r,l=0;if(i<h.A.top){const t=h.A.top-i;n-=t,i=h.A.top,e+=t*r,s+=t*h.A.EC}if(i+n>h.A.bottom&&(n-=i+n-h.A.bottom),t<h.A.left){const i=h.A.left-t;r-=i,t=h.A.left,e+=i,s+=i,l+=i,o+=i}if(t+r>h.A.right){const i=t+r-h.A.right;r-=i,l+=i,o+=i}r>0&&n>0&&this.zM(r,n,this.Ic,e,l,h.A.Ic,s,o)}fc(){const t=this.Ic,i=this.width,s=this.height;for(let h=0;h<s;h++){const s=i/2|0;for(let e=0;e<s;e++){const s=e+h*i,n=i-e-1+h*i,r=t[s];t[s]=t[n],t[n]=r}}}uc(){const t=this.Ic,i=this.width,s=this.height;for(let h=0;h<(s/2|0);h++)for(let e=0;e<i;e++){const n=e+h*i,r=e+(s-h-1)*i,o=t[n];t[n]=t[r],t[r]=o}}translate(t,i,s){for(let h=0;h<this.palette.length;h++){let e=this.palette[h]>>16&255;e+=t,e<0?e=0:e>255&&(e=255);let n=this.palette[h]>>8&255;n+=i,n<0?n=0:n>255&&(n=255);let r=255&this.palette[h];r+=s,r<0?r=0:r>255&&(r=255),this.palette[h]=(e<<16)+(n<<8)+r}}gS(){this.Zl|=0,this.Td|=0,this.Zl/=2,this.Td/=2,this.Zl|=0,this.Td|=0;const t=new Int8Array(this.Zl*this.Td);let i=0;for(let s=0;s<this.height;s++)for(let h=0;h<this.width;h++)t[(h+this.Pc>>1)+(s+this.Fc>>1)*this.Zl]=this.Ic[i++];this.Ic=t,this.width=this.Zl,this.height=this.Td,this.Pc=0,this.Fc=0}LC(){if(this.width===this.Zl&&this.height===this.Td)return;const t=new Int8Array(this.Zl*this.Td);let i=0;for(let s=0;s<this.height;s++)for(let h=0;h<this.width;h++)t[h+this.Pc+(s+this.Fc)*this.Zl]=this.Ic[i++];this.Ic=t,this.width=this.Zl,this.height=this.Td,this.Pc=0,this.Fc=0}zM(t,i,s,h,e,n,r,o){const l=-(t>>2);t=-(3&t);for(let a=-i;a<0;a++){for(let t=l;t<0;t++){let t=s[h++];0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t],t=s[h++],0===t?r++:n[r++]=this.palette[255&t]}for(let i=t;i<0;i++){const t=s[h++];0===t?r++:n[r++]=this.palette[255&t]}r+=o,h+=e}}clip(t,i,s,e){try{const n=this.width;this.height;let r=0,o=0;const l=this.Zl,a=this.Td,c=(l<<16)/s|0,f=(a<<16)/e|0;t=t+(this.Pc*s+l-1)/l|0,i=i+(this.Fc*e+a-1)/a|0,this.Pc*s%l!=0&&(r=(l-this.Pc*s%l<<16)/s|0),this.Fc*e%a!=0&&(o=(a-this.Fc*e%a<<16)/e|0),s=s*(this.width-(r>>16))/l|0,e=e*(this.height-(o>>16))/a|0;let u,d=t+i*h.A.EC,w=h.A.EC-s;i<h.A.top&&(u=h.A.top-i,e-=u,i=0,d+=u*h.A.EC,o+=f*u),i+e>h.A.bottom&&(e-=i+e-h.A.bottom),t<h.A.left&&(u=h.A.left-t,s-=u,t=0,d+=u,r+=c*u,w+=u),t+s>h.A.right&&(u=t+s-h.A.right,s-=u,w+=u),this.ZM(h.A.Ic,this.Ic,this.palette,r,o,d,w,s,e,c,f,n)}catch(t){console.log('error in sprite clipping routine')}}ZM(t,i,s,h,e,n,r,o,l,a,c,f){try{const u=h;for(let d=-l;d<0;d++){const l=(e>>16)*f;for(let e=-o;e<0;e++){const e=i[(h>>16)+l];0==e?n++:t[n++]=s[255&e],h+=a}e+=c,h=u,n+=r}}catch(t){console.log('error in plot_scale')}}}},2682:(t,i,s)=>{s.d(i,{A:()=>l});var h=s(8950),e=s(1069),n=s(4474);class r{seed;constructor(t){this.seed=(0x5deece66dn^t)&(1n<<48n)-1n}qM(t){this.seed=(0x5deece66dn^t)&(1n<<48n)-1n}oA(){return this.next(32)}next(t){return this.seed=0x5deece66dn*this.seed+0xbn&(1n<<48n)-1n,Number(this.seed)>>>48-t}}var o=s(9298);class l extends n.A{static Xc='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!"$%^&*()-_=+[{]};:\'@#~,<.>/?\\| ';static $M=[];static{const t=navigator.userAgent.includes('Capacitor');for(let i=0;i<256;i++){let s=l.Xc.indexOf(String.fromCharCode(i));t&&s>=63&&s--,-1===s&&(s=74),l.$M[i]=s}}JM=[];QM=new Int32Array(94);tk=new Int32Array(94);ik=new Int32Array(94);sk=new Int32Array(94);hk=new Int32Array(95);ek=new Int32Array(256);random=new r(BigInt(Date.now()));height=0;static rc=(t,i)=>{const s=new e.A(t.read(i+'.dat')),h=new e.A(t.read('index.dat'));h.qc=s.aA+4;const n=h.fA;n>0&&(h.qc+=3*(n-1));const r=new l;for(let t=0;t<94;t++){r.ik[t]=h.fA,r.sk[t]=h.fA;const i=r.QM[t]=h.aA,e=r.tk[t]=h.aA,n=h.fA,o=i*e;if(r.JM[t]=new Int8Array(o),0===n)for(let h=0;h<i*e;h++)r.JM[t][h]=s.dA;else if(1===n)for(let h=0;h<i;h++)for(let n=0;n<e;n++)r.JM[t][h+n*i]=s.dA;e>r.height&&(r.height=e),r.ik[t]=1,r.hk[t]=i+2;{let s=0;for(let h=e/7|0;h<e;h++)s+=r.JM[t][h*i];s<=(e/7|0)&&(r.hk[t]--,r.ik[t]=0)}{let s=0;for(let h=e/7|0;h<e;h++)s+=r.JM[t][i+h*i-1];s<=(e/7|0)&&r.hk[t]--}}r.hk[94]=r.hk[8];for(let t=0;t<256;t++)r.ek[t]=r.hk[l.$M[t]];return r};ql(t,i,s,h){if(!s)return;t|=0,i|=0;const e=s.length;i-=this.height;for(let n=0;n<e;n++){const e=l.$M[s.charCodeAt(n)];94!==e&&this.nk(this.JM[e],t+this.ik[e],i+this.sk[e],this.QM[e],this.tk[e],h),t+=this.hk[e]}}da(t,i,s,h,e){t|=0,i|=0;const n=s.length;i-=this.height;for(let r=0;r<n;r++)if('@'===s.charAt(r)&&r+4<n&&'@'===s.charAt(r+4))h=this.rk(s.substring(r+1,r+4)),r+=4;else{const n=l.$M[s.charCodeAt(r)];94!==n&&(e&&this.nk(this.JM[n],t+this.ik[n]+1,i+this.sk[n]+1,this.QM[n],this.tk[n],o.A.Jl),this.nk(this.JM[n],t+this.ik[n],i+this.sk[n],this.QM[n],this.tk[n],h)),t+=this.hk[n]}}_u(t){if(!t)return 0;const i=t.length;let s=0;for(let h=0;h<i;h++)'@'===t.charAt(h)&&h+4<i&&'@'===t.charAt(h+4)?h+=4:s+=this.ek[t.charCodeAt(h)];return s}fa(t,i,s,h,e){t|=0,i|=0,this.da(t-this._u(s)/2,i,s,h,e)}Rc(t,i,s,h){s&&(t|=0,i|=0,this.ql(t-this._u(s)/2,i,s,h))}Xd(t,i,s,h,e,n){t|=0,i|=0,this.random.qM(BigInt(n));const r=192+(31&this.random.oA()),a=i-this.height;for(let i=0;i<s.length;i++)if('@'===s.charAt(i)&&i+4<s.length&&'@'===s.charAt(i+4))h=this.rk(s.substring(i+1,i+4)),i+=4;else{const n=l.$M[s.charCodeAt(i)];94!==n&&(e&&this.lk(t+this.ik[n]+1,a+this.sk[n]+1,this.QM[n],this.tk[n],o.A.Jl,192,this.JM[n]),this.lk(t+this.ik[n],a+this.sk[n],this.QM[n],this.tk[n],h,r,this.JM[n])),t+=this.hk[n],3&this.random.oA()||t++}}td(t,i,s,h,e=!0){t|=0,i|=0,e&&this.ql(t-this._u(s)+1,i+1,s,o.A.Jl),this.ql(t-this._u(s),i,s,h)}Ju(t,i,s,h,e){if(!s)return;t|=0,i|=0,t-=this._u(s)/2|0;const n=i-this.height;for(let i=0;i<s.length;i++){const r=l.$M[s.charCodeAt(i)];94!=r&&this.nk(this.JM[r],t+this.ik[r],n+this.sk[r]+(5*Math.sin(i/2+e/5)|0),this.QM[r],this.tk[r],h),t+=this.hk[r]}}nk(t,i,s,e,n,r){e|=0,n|=0;let o=(i|=0)+(s|=0)*h.A.EC,l=h.A.EC-e,a=0,c=0;if(s<h.A.top){const t=h.A.top-s;n-=t,s=h.A.top,c+=t*e,o+=t*h.A.EC}if(s+n>=h.A.bottom&&(n-=s+n+1-h.A.bottom),i<h.A.left){const t=h.A.left-i;e-=t,i=h.A.left,c+=t,o+=t,a+=t,l+=t}if(i+e>=h.A.right){const t=i+e+1-h.A.right;e-=t,a+=t,l+=t}e>0&&n>0&&this.ak(e,n,t,c,a,h.A.Ic,o,l,r)}lk(t,i,s,e,n,r,o){s|=0,e|=0;let l=(t|=0)+(i|=0)*h.A.EC,a=h.A.EC-s,c=0,f=0;if(i<h.A.top){const t=h.A.top-i;e-=t,i=h.A.top,f+=t*s,l+=t*h.A.EC}if(i+e>=h.A.bottom&&(e-=i+e+1-h.A.bottom),t<h.A.left){const i=h.A.left-t;s-=i,t=h.A.left,f+=i,l+=i,c+=i,a+=i}if(t+s>=h.A.right){const i=t+s+1-h.A.right;s-=i,c+=i,a+=i}s>0&&e>0&&this.ck(s,e,h.A.Ic,l,a,o,f,c,n,r)}ak(t,i,s,h,e,n,r,o,l){const a=-((t|=0)>>2);t=-(3&t);for(let c=-(i|=0);c<0;c++){for(let t=a;t<0;t++)0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l,0===s[h++]?r++:n[r++]=l;for(let i=t;i<0;i++)0===s[h++]?r++:n[r++]=l;r+=o,h+=e}}ck(t,i,s,h,e,n,r,o,l,a){t|=0;const c=((16711935&l)*a&4278255360)+((65280&l)*a&16711680)>>8,f=256-a;for(let l=-(i|=0);l<0;l++){for(let i=-t;i<0;i++)if(0===n[r++])h++;else{const t=s[h];s[h++]=(((16711935&t)*f&4278255360)+((65280&t)*f&16711680)>>8)+c}h+=e,r+=o}}rk(t){return'red'===t?o.A.RED:'gre'===t?o.A.GREEN:'blu'===t?o.A.BLUE:'yel'===t?o.A.Ql:'cya'===t?o.A.Bc:'mag'===t?o.A.Gc:'whi'===t?o.A.xl:'bla'===t?o.A.Jl:'lre'===t?o.A.JR:'dre'===t?o.A.Ad:'dbl'===t?o.A.yd:'or1'===t?o.A.QR:'or2'===t?o.A.tS:'or3'===t?o.A.iS:'gr1'===t?o.A.sS:'gr2'===t?o.A.hS:'gr3'===t?o.A.eS:o.A.Jl}split(t,i){if(0===t.length)return[t];const s=[];for(;t.length>0;){if(this._u(t)<=i&&-1===t.indexOf('|')){s.push(t);break}let h=t.length;for(let s=0;s<t.length;s++)if(' '===t[s]){if(this._u(t.substring(0,s))>i)break;h=s}else if('|'===t[s]){h=s;break}s.push(t.substring(0,h)),t=t.substring(h+1)}return s}}},1183:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(8950),e=s(7854);class n{fk;width;height;uk;dk;Ic;constructor(t,i,s=e.ol){this.uk=s,this.fk=this.uk.getImageData(0,0,t,i),this.dk=new Uint32Array(this.fk.data.buffer),this.Ic=new Int32Array(t*i),this.width=t,this.height=i,this.bind()}clear(){this.Ic.fill(0)}bind(){h.A.bind(this.Ic,this.width,this.height)}draw(t,i){this.#t(),this.uk.putImageData(this.fk,t,i)}#t(){const t=this.Ic.length,i=this.Ic,s=this.dk;for(let h=0;h<t;h++){const t=i[h];s[h]=t>>16&255|(t>>8&255)<<8|(255&t)<<16|4278190080}}}},3955:(t,i,s)=>{s.d(i,{A:()=>h});class h{static gA=150;static Bf=108;static Ff=70;static af=81;static Af=189;static Vw=7;static lw=88;static ew=30;static uw=176;static tw=220;static jw=66;static Uw=17;static Ew=2;static Hw=238;static Ly=233;static Qf=146;static Cf=215;static Uf=236;static lg=85;static MI=219;static bw=140;static Mw=40;static Sw=200;static Lw=178;static Rw=247;static Xw=138;static ww=239;static fw=194;static ow=8;static aw=27;static cw=113;static dw=100;static Tw=134;static gw=202;static Aw=245;static kw=172;static Zw=96;static Kw=97;static zw=116;static Ow=9;static Qd=75;static qd=164;static _w=53;static Cw=185;static Zd=206;static hy=177;static Jw=248;static nw=195;static rw=71;static hw=133;static iw=157;static sw=211;static mw=48;static pw=130;static Gw=31;static Yw=59;static Fw=212;static Ww=38;static Bw=6;static Pw=155;static Iw=235;static nA=231;static xy=237;static Kf=175;static Xm=93;static _y=190;static Km=165;static If=159;static Gy=171;static By=79;static Iy=52;static ky=244;static Ry=148;static Uy=11;static Fy=118;static Ny=4;static Py=158;static Vm=181}},3554:(t,i,s)=>{s.d(i,{A:()=>o});var h=s(1651),e=s(6666),n=s(1982),r=s(9234);class o{wk;yk;Ak;closed=!1;pk=!1;static zc=async t=>await new Promise(((i,s)=>{const e=t.host.startsWith('https'),n=e?'wss':'ws',r=t.host.substring(t.host.indexOf('//')+2);let o;if(h.K.nt)o=`${n}://${r}`;else{o=`${n}://${r}:${e?t.port+2:t.port+1}`}const l=new WebSocket(o,'binary');l.addEventListener('open',(()=>{console.log('connection open!'),i(l)})),l.addEventListener('error',(()=>{console.log('connection error!'),s(l)}))}));constructor(t){t.onclose=this.onclose,t.onerror=this.onerror,this.yk=new c(t,5e3),this.Ak=new l(t,5e3),this.wk=t}get host(){return this.wk.url.split('/')[2]}get port(){return parseInt(this.wk.url.split(':')[2],10)}get available(){return this.closed?0:this.yk.available}write(t,i){this.Ak.write(t,i)}async read(){return this.closed?0:this.yk.mk()??await this.yk.Ik()}async Zc(t,i,s){if(!this.closed)for(;s>0;){const h=this.yk.gk(t,i,s)??await this.yk.Ek(t,i,s);if(h.length<=0)throw new Error('EOF');i+=h.length,s-=h.length}}close(){this.closed=!0,this.wk.close(),this.yk.close(),this.Ak.close(),console.log('connection close!'),this.pk&&console.log('connection error!')}onclose=t=>{this.closed||this.close()};onerror=t=>{this.closed||(this.pk=!0,this.close())}}class l{wk;_k;closed=!1;pk=!1;constructor(t,i){this.wk=t,this._k=i}write(t,i){if(!this.closed){if(this.pk)throw this.pk=!1,new Error('Error in writer thread');if(i>this._k||t.length>this._k)throw new Error('buffer overflow');try{this.wk.send(t.subarray(0,i))}catch(t){this.pk=!0}}}close(){this.closed=!0}}class a extends n.A{tI;position;constructor(t){super(),this.tI=t,this.position=0}get available(){return this.tI.length-this.position}get read(){return this.tI[this.position++]}get Ck(){return this.tI.length}}class c{_k;queue=new e.A;event=null;Tk=null;total=0;closed=!1;constructor(t,i){this._k=i,t.binaryType='arraybuffer',t.onmessage=this.onmessage}get available(){return this.total}onmessage=t=>{if(this.closed)throw new Error('WebSocketReader is closed!');const i=new a(new Uint8Array(t.data));if(this.event?this.queue.Ig(i):this.event=i,this.total+=i.Ck,this.Tk&&(this.Tk(this.event),this.Tk=null,this.total>this._k))throw new Error('buffer overflow')};Ok(){return this.event&&this.event.available>0?this.event.read:null}async vk(t){for(this.event=this.queue.pb();this.total<t;)await Promise.race([new Promise((t=>this.Tk=t)),(0,r.il)(2e3).then((()=>{if(this.closed)throw new Error('WebSocketReader closed while reading.')}))]);return this.event?this.event.read:this.vk(t)}gk(t,i,s){if(this.closed)throw new Error('WebSocketReader is closed!');if(!(this.event&&this.event.available>=s))return null;for(;s>0;){const h=this.Ok();if(null===h)throw new Error('EOF - tried to read a fast byte when there was not enough immediate bytes.');t[i++]=h,this.total--,s--}return t}async Ek(t,i,s){if(this.closed)throw new Error('WebSocketReader is closed!');for(;s>0;)t[i++]=this.Ok()??await this.vk(s),this.total--,s--;return t}mk(){if(this.closed)throw new Error('WebSocketReader is closed!');const t=this.Ok();return null===t?null:(this.total--,t)}async Ik(){if(this.closed)throw new Error('WebSocketReader is closed!');const t=await this.vk(1);return this.total--,t}close(){this.closed=!0,this.Tk=null,this.total=0,this.event=null,this.queue.clear()}}},296:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(6666),e=s(1982),n=s(9234);class r{vo;Xo;bk;closed=!1;pk=!1;constructor(t,i){this.vo=t,this.vo.onerror=this.onerror,this.vo.onmessageerror=this.onmessageerror,this.Xo=new a(5e3),this.bk=new o(this.vo,5e3,i),this.vo.postMessage({type:'connection',id:i})}get available(){return this.closed?0:this.Xo.available}write(t,i){this.bk.write(t,i)}async read(){return this.closed?0:this.Xo.mk()??await this.Xo.Ik()}async Zc(t,i,s){if(!this.closed)for(;s>0;){const h=this.Xo.gk(t,i,s)??await this.Xo.Ek(t,i,s);if(h.length<=0)throw new Error('EOF');i+=h.length,s-=h.length}}close(){this.closed=!0,this.Xo.close(),this.bk.close(),console.log('connection close!'),this.pk&&console.log('connection error!')}onerror=t=>{this.closed||(this.pk=!0,this.close())};onmessageerror=t=>{this.closed||(this.pk=!0,this.close())}}class o{vo;_k;Do;closed=!1;pk=!1;constructor(t,i,s){this.vo=t,this._k=i,this.Do=s}write(t,i){if(!this.closed){if(this.pk)throw this.pk=!1,new Error('Error in writer thread');if(i>this._k||t.length>this._k)throw new Error('buffer overflow');try{this.vo.postMessage({type:'data',data:t.subarray(0,i),id:this.Do})}catch(t){this.pk=!0}}}close(){this.closed=!0}}class l extends e.A{tI;position;constructor(t){super(),this.tI=t,this.position=0}get available(){return this.tI.length-this.position}get read(){return this.tI[this.position++]}get Ck(){return this.tI.length}}class a{_k;queue=new h.A;event=null;Tk=null;total=0;closed=!1;constructor(t){this._k=t}get available(){return this.total}onmessage=t=>{const i='string'==typeof t.data?JSON.parse(t.data):t;if('data'!==i.type)return void console.error('Unexpected message type: ',i.type);if(this.closed)throw new Error('WorkerReader is closed!');const s=new l(new Uint8Array(i.data));if(this.event?this.queue.Ig(s):this.event=s,this.total+=s.Ck,this.Tk&&(this.Tk(this.event),this.Tk=null,this.total>this._k))throw new Error('buffer overflow')};Ok(){return this.event&&this.event.available>0?this.event.read:null}async vk(t){for(this.event=this.queue.pb();this.total<t;)await Promise.race([new Promise((t=>this.Tk=t)),(0,n.il)(2e3).then((()=>{if(this.closed)throw new Error('WorkerReader closed while reading.')}))]);return this.event?this.event.read:this.vk(t)}gk(t,i,s){if(this.closed)throw new Error('WorkerReader is closed!');if(!(this.event&&this.event.available>=s))return null;for(;s>0;){const h=this.Ok();if(null===h)throw new Error('EOF - tried to read a fast byte when there was not enough immediate bytes.');t[i++]=h,this.total--,s--}return t}async Ek(t,i,s){if(this.closed)throw new Error('WorkerReader is closed!');for(;s>0;)t[i++]=this.Ok()??await this.vk(s),this.total--,s--;return t}mk(){if(this.closed)throw new Error('WorkerReader is closed!');const t=this.Ok();return null===t?null:(this.total--,t)}async Ik(){if(this.closed)throw new Error('WorkerReader is closed!');const t=await this.vk(1);return this.total--,t}close(){this.closed=!0,this.Tk=null,this.total=0,this.event=null,this.queue.clear()}}},4544:(t,i,s)=>{s.d(i,{A:()=>h});class h{db;constructor(t){t.onerror=this.onerror,t.onclose=this.onclose,this.db=t}static openDatabase=async()=>await new Promise(((t,i)=>{const s=indexedDB.open('lostcity',1);s.onsuccess=i=>{const s=i.target;console.log('database success!'),t(s.result)},s.onupgradeneeded=t=>{t.target.result.createObjectStore('cache')},s.onerror=t=>{const s=t.target;console.error('database error!: ',s.error),i(s.result)}}));$o=async t=>await new Promise((i=>{const s=this.db.transaction('cache','readonly').objectStore('cache').get(t);s.onsuccess=()=>{i(s.result)},s.onerror=t=>{i(void 0)}}));sl=async(t,i)=>await new Promise(((s,h)=>{const e=this.db.transaction('cache','readwrite').objectStore('cache').put(i,t);e.onsuccess=()=>{s()},e.onerror=t=>{h()}}));onclose=t=>{console.log('database close!')};onerror=t=>{console.log('database error!')};Lk=t=>{const i=t.trim();let s=0;for(let t=0;t<i.length&&t<12;t++){const h=i.charAt(t);s*=37,h>='A'&&h<='Z'?s+=h.charCodeAt(0)+1-65:h>='a'&&h<='z'?s+=h.charCodeAt(0)+1-97:h>='0'&&h<='9'&&(s+=h.charCodeAt(0)+27-48)}return s}}},2634:(t,i,s)=>{s.d(i,{A:()=>h});class h{count=0;Rk=new Int32Array(256);Sk=new Int32Array(256);a=0;b=0;c=0;constructor(t){for(let i=0;i<t.length;i++)this.Rk[i]=t[i];this.init()}get oA(){return 0==this.count--&&(this.Mk(),this.count=255),this.Rk[this.count]}init(){let t=2654435769,i=2654435769,s=2654435769,h=2654435769,e=2654435769,n=2654435769,r=2654435769,o=2654435769;for(let l=0;l<4;l++)t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i;for(let l=0;l<256;l+=8)t+=this.Rk[l],i+=this.Rk[l+1],s+=this.Rk[l+2],h+=this.Rk[l+3],e+=this.Rk[l+4],n+=this.Rk[l+5],r+=this.Rk[l+6],o+=this.Rk[l+7],t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i,this.Sk[l]=t,this.Sk[l+1]=i,this.Sk[l+2]=s,this.Sk[l+3]=h,this.Sk[l+4]=e,this.Sk[l+5]=n,this.Sk[l+6]=r,this.Sk[l+7]=o;for(let l=0;l<256;l+=8)t+=this.Sk[l],i+=this.Sk[l+1],s+=this.Sk[l+2],h+=this.Sk[l+3],e+=this.Sk[l+4],n+=this.Sk[l+5],r+=this.Sk[l+6],o+=this.Sk[l+7],t^=i<<11,h+=t,i+=s,i^=s>>>2,e+=i,s+=h,s^=h<<8,n+=s,h+=e,h^=e>>>16,r+=h,e+=n,e^=n<<10,o+=e,n+=r,n^=r>>>4,t+=n,r+=o,r^=o<<8,i+=r,o+=t,o^=t>>>9,s+=o,t+=i,this.Sk[l]=t,this.Sk[l+1]=i,this.Sk[l+2]=s,this.Sk[l+3]=h,this.Sk[l+4]=e,this.Sk[l+5]=n,this.Sk[l+6]=r,this.Sk[l+7]=o;this.Mk(),this.count=256}Mk(){this.c++,this.b+=this.c;for(let t=0;t<256;t++){const i=this.Sk[t],s=3&t;let h;0===s?this.a^=this.a<<13:1===s?this.a^=this.a>>>6:2===s?this.a^=this.a<<2:3===s&&(this.a^=this.a>>>16),this.a+=this.Sk[t+128&255],this.Sk[t]=h=this.Sk[i>>>2&255]+this.a+this.b,this.Rk[t]=this.b=this.Sk[h>>>8>>>2&255]+i}}}},2901:(t,i,s)=>{s.d(i,{A:()=>n});var h=s(1069),e=s(1908);class n{static Lk=t=>{let i=0;t=t.toUpperCase();for(let s=0;s<t.length;s++)i=61*i+t.charCodeAt(s)-32|0;return i};buffer;kk;xk;Dk;Nk;Pk;Fk;Uk=[];constructor(t){t instanceof Uint8Array&&(t=new Int8Array(t));let i=new h.A(new Uint8Array(t));const s=i.O_,n=i.O_;s===n?(this.buffer=t,this.kk=!1):(this.buffer=e.A.read(s,t,n,6),i=new h.A(new Uint8Array(this.buffer)),this.kk=!0),this.xk=i.aA,this.Dk=[],this.Nk=[],this.Pk=[],this.Fk=[];let r=i.qc+10*this.xk;for(let t=0;t<this.xk;t++)this.Dk.push(i.el),this.Nk.push(i.O_),this.Pk.push(i.O_),this.Fk.push(r),r+=this.Pk[t]}read(t){const i=n.Lk(t),s=this.Dk.indexOf(i);return-1===s?null:this.Bk(s)}Bk(t){if(t<0||t>=this.xk)return null;if(this.Uk[t])return this.Uk[t];const i=this.Fk[t],s=i+this.Pk[t];if(this.kk){const h=Uint8Array.from(this.buffer.subarray(i,i+s));return this.Uk[t]=h,h}{const i=Uint8Array.from(e.A.read(this.Nk[t],this.buffer,this.Pk[t],this.Fk[t]));return this.Uk[t]=i,i}}}},1069:(t,i,s)=>{s.d(i,{A:()=>r});var h=s(9234),e=s(6666),n=s(4474);class r extends n.A{static Gk=3988292384;static Hk=new Int32Array(256);static Wk=new Uint32Array(33);static Yk=new e.A;static Vk=new e.A;static Kk=new e.A;static Xk=0;static jk=0;static zk=0;static{for(let t=0;t<32;t++)r.Wk[t]=(1<<t)-1;r.Wk[32]=4294967295;for(let t=0;t<256;t++){let i=t;for(let t=0;t<8;t++)1&~i?i>>>=1:i=i>>>1^r.Gk;r.Hk[t]=i}}static Jo=t=>{let i=4294967295;for(let s=0;s<t.length;s++)i=i>>>8^r.Hk[255&(i^t[s])];return~i};view;data;qc=0;Qm=0;random=null;constructor(t){if(!t)throw new Error('Input src packet array was null!');super(),t instanceof Int8Array?this.data=new Uint8Array(t):this.data=t,this.view=new DataView(this.data.buffer,this.data.byteOffset,this.data.byteLength)}get length(){return this.view.byteLength}get available(){return this.length-this.qc}static Bt=t=>{let i=null;return 0===t&&r.Xk>0?(r.Xk--,i=r.Yk.pb()):1===t&&r.jk>0?(r.jk--,i=r.Vk.pb()):2===t&&r.zk>0&&(r.zk--,i=r.Kk.pb()),i?(i.qc=0,i):new r(0===t?new Uint8Array(100):1===t?new Uint8Array(5e3):new Uint8Array(3e4))};release(){this.qc=0,100===this.view.byteLength&&r.Xk<1e3?(r.Yk.Ig(this),r.Xk++):5e3===this.view.byteLength&&r.jk<250?(r.Vk.Ig(this),r.jk++):3e4===this.view.byteLength&&r.zk<50&&(r.Kk.Ig(this),r.zk++)}get fA(){return this.view.getUint8(this.qc++)}get dA(){return this.view.getInt8(this.qc++)}get aA(){const t=this.view.getUint16(this.qc);return this.qc+=2,t}get wp(){const t=this.view.getInt16(this.qc);return this.qc+=2,t}get O_(){const t=this.view.getUint8(this.qc++)<<16|this.view.getUint16(this.qc);return this.qc+=2,t}get el(){const t=this.view.getInt32(this.qc);return this.qc+=4,t}get $c(){const t=this.view.getBigInt64(this.qc);return this.qc+=8,t}get jR(){return this.view.getUint8(this.qc)<128?this.fA-64:this.aA-49152}get mO(){return this.view.getUint8(this.qc)<128?this.fA:this.aA-32768}get vA(){const t=this.view,i=t.byteLength;let s,h='';for(;10!==(s=t.getUint8(this.qc++))&&this.qc<i;)h+=String.fromCharCode(s);return h}jA(t,i,s){s.set(this.data.subarray(this.qc,this.qc+t),i),this.qc+=t}lf(t){this.view.setUint8(this.qc++,t+(this.random?.oA??0)&255)}p1(t){this.view.setUint8(this.qc++,t)}p2(t){this.view.setUint16(this.qc,t),this.qc+=2}Zk(t){this.view.setUint16(this.qc,t,!0),this.qc+=2}p3(t){this.view.setUint8(this.qc++,t>>16),this.view.setUint16(this.qc,t),this.qc+=2}p4(t){this.view.setInt32(this.qc,t),this.qc+=4}qk(t){this.view.setInt32(this.qc,t,!0),this.qc+=4}Cy(t){this.view.setBigInt64(this.qc,t),this.qc+=8}Jc(t){const i=this.view,s=t.length;for(let h=0;h<s;h++)i.setUint8(this.qc++,t.charCodeAt(h));i.setUint8(this.qc++,10)}tf(t,i,s){this.data.set(t.subarray(s,s+i),this.qc),this.qc+=i-s}tu(t){this.view.setUint8(this.qc-t-1,t)}$m(){this.Qm=this.qc<<3}tI(){this.qc=this.Qm+7>>>3}Jm(t){let i=this.Qm>>>3,s=8-(7&this.Qm),h=0;for(this.Qm+=t;t>s;s=8)h+=(this.view.getUint8(i++)&r.Wk[s])<<t-s,t-=s;return h+=t===s?this.view.getUint8(i)&r.Wk[s]:this.view.getUint8(i)>>>s-t&r.Wk[t],h}Qc(t,i){const s=this.qc;this.qc=0;const e=new Uint8Array(s);this.jA(s,0,e);const n=(0,h.$k)(e),r=(0,h.Jk)(n,i,t),o=(0,h.Qk)(r);this.qc=0,this.p1(o.length),this.tf(o,o.length,0)}}},353:(t,i,s)=>{s.d(i,{A:()=>h});class h{static tx=[95,218,67,50,253,222,194,60,101,128,8,251,92,111,24,33,223,66,232,59,227,113,153,105,126,98,167,102,177,238,62,190,147,23,150,151,156,144,193,155,81,0,198,22,137,210,179,16,168,170,32,181,248,141,58,87,208,106,180,191,221,241,40,176,196,154,65,145,230,78,30,161,188,41,14,129,18,199,47,247,225,34,51,10,159,75,12,56,61,31,39,91,46,242,134,5,122,123,209,228,104,195,21,3,11,44,107,172,6,186,110,215,205,103,27,185,124,77,252,117,86,115,127,207,52,79,43,97,219,116,169,7,118,162,108,36,20,233,88,135,80,19,42,237,57,152,71,9,250,17,4,119,234,130,26,200,189,163,254,245,197,171,220,235,140,244,184,94,211,231,99,246,121,212,112,204,63,148,83,178,1,255,131,13,183,142,236,45,55,35,243,136,37,85,100,160,38,224,146,174,82,48,109,132,125,90,143,138,240,173,165,164,192,175,29,74,28,114,213,73,64,206,76,139,96,2,229,15,93,25,239,202,49,70,214,201,72,203,68,89,69,157,216,217,249,120,226,84,149,187,54,53,158,166,182,133,0];static lA=[0,-2,4,6,-1,5,0,2,0,0,0,0,5,4,2,2,0,0,0,0,2,-2,2,14,0,6,3,0,4,0,0,0,3,0,0,0,0,0,0,0,0,-1,4,2,6,0,6,0,0,3,7,0,0,0,-1,0,0,0,0,4,0,0,0,0,0,0,0,0,1,15,0,0,0,0,6,0,2,0,0,0,2,0,0,0,1,0,0,4,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,-2,0,0,2,0,0,0,2,9,0,0,0,0,0,4,0,0,0,3,7,9,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,3,2,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,-2,2,0,0,0,0,0,6,0,0,0,2,0,2,0,0,0,-2,0,0,4,0,0,0,0,6,0,0,-2,-2,0,0,0,0,0,0,-2,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,-2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0]}},5226:(t,i,s)=>{s.d(i,{Q:()=>e,x:()=>h});class h{ix=new Map;vo;Do=self.isSecureContext?self.crypto.randomUUID():'0';constructor(t){this.vo=t}async zo(){const t=new RTCPeerConnection({iceServers:[{urls:'stun:stun.l.google.com:19302'}]}),i=t.createDataChannel('channel'),s=crypto.randomUUID();this.ix.set(s,i),await t.setLocalDescription(await t.createOffer()),t.onicegatheringstatechange=async()=>{if('complete'===t.iceGatheringState){let i;self.isSecureContext?await navigator.clipboard.writeText(JSON.stringify(t.localDescription)):console.log(JSON.stringify(t.localDescription));try{for(;null===(i=prompt('Offer copied to clipboard, paste answer here')););t.setRemoteDescription(new RTCSessionDescription(JSON.parse(i)))}catch(t){console.error(t)}}},i.onopen=()=>{i.send(JSON.stringify({type:'id',id:s})),console.log('Connected to peer!')},i.onerror=t=>{console.error(t)},i.onmessage=t=>{const i=JSON.parse(t.data);i.data&&(i.data=Object.values(i.data)),this.vo&&this.vo.postMessage(i)}}postMessage(t){const i=this.ix.get(t.data.id),s=t.data;s.data&&(s.data=Array.from(t.data.data)),i&&'open'===i.readyState&&i.send(JSON.stringify(s))}}class e{pc;xo=void 0;Do;constructor(t){this.pc=new RTCPeerConnection({iceServers:[{urls:'stun:stun.l.google.com:19302'}]}),this.pc.ondatachannel=i=>{this.xo=i.channel,this.xo.onopen=()=>{console.log('Connected to host!')},this.xo.onerror=t=>{console.error(t)},this.xo.onmessage=i=>{if(!this.Do){const t=JSON.parse(i.data);if('id'===t.type)return void(this.Do=t.id)}t.onmessage&&t.onmessage(i)}},this.pc.onicegatheringstatechange=async()=>{'complete'===this.pc.iceGatheringState&&(self.isSecureContext?await navigator.clipboard.writeText(JSON.stringify(this.pc.localDescription)):console.log(JSON.stringify(this.pc.localDescription)))}}async Zo(t){await this.pc.setRemoteDescription(new RTCSessionDescription(JSON.parse(t))),await this.pc.setLocalDescription(await this.pc.createAnswer())}}},2215:(t,i,s)=>{s.d(i,{A:()=>h});class h{static up=14;static WA=28;static Bp=129;static KA=167;static xp=168;static cp=195;static Dp=2;static Pp=26;static Rp=46;static bp=84;static Cp=87;static lp=103;static VA=146;static _A=197;static Gp=201;static rp=204;static dp=209;static cA=5;static ip=126;static Tp=185;static QA=15;static ZA=98;static Kp=213;static vp=74;static Vp=13;static yp=3;static Up=239;static pA=1;static Xp=184;static zA=133;static qA=226;static Lp=4;static Fp=21;static ap=32;static Ry=41;static wA=152;static RA=19;static Yp=22;static TA=25;static yA=43;static Hp=44;static Op=68;static Np=136;static SA=139;static tp=140;static bA=142;static JA=243;static hp=254;static LA=20;static AA=80;static Ep=132;static XA=220;static IA=237;static uA=150;static YA=175;static _p=193;static ep=12;static OA=54;static sp=212;static op=7;static Ap=135;static Wp=162;static kA=23;static UA=42;static PA=49;static xA=50;static GA=59;static NA=69;static BA=76;static MA=151;static DA=191;static FA=223}},3937:(t,i,s)=>{s.d(i,{A:()=>o});class h{start=0;end=0;form=0;length=0;sx=null;hx=null;threshold=0;position=0;delta=0;amplitude=0;nx=0;read(t){this.form=t.fA,this.start=t.el,this.end=t.el,this.length=t.fA,this.sx=new Int32Array(this.length),this.hx=new Int32Array(this.length);for(let i=0;i<this.length;i++)this.sx[i]=t.aA,this.hx[i]=t.aA}reset(){this.threshold=0,this.position=0,this.delta=0,this.amplitude=0,this.nx=0}evaluate(t){return this.nx>=this.threshold&&this.hx&&this.sx&&(this.amplitude=this.hx[this.position++]<<15,this.position>=this.length&&(this.position=this.length-1),this.threshold=this.sx[this.position]/65536*t|0,this.threshold>this.nx&&(this.delta=((this.hx[this.position]<<15)-this.amplitude)/(this.threshold-this.nx)|0)),this.amplitude+=this.delta,this.nx++,this.amplitude-this.delta>>15}}class e{static buffer=null;static ZT=null;static sin=null;static ox=new Int32Array(5);static lx=new Int32Array(5);static ux=new Int32Array(5);static wx=new Int32Array(5);static yx=new Int32Array(5);Ax=null;mx=null;Ix=null;gx=null;Ex=null;_x=null;release=null;attack=null;Cx=new Int32Array(5);Tx=new Int32Array(5);Ox=new Int32Array(5);start=0;length=500;vx=100;bx=0;static init=()=>{this.ZT=new Int32Array(32768);for(let t=0;t<32768;t++)Math.random()>.5?this.ZT[t]=1:this.ZT[t]=-1;this.sin=new Int32Array(32768);for(let t=0;t<32768;t++)this.sin[t]=16384*Math.sin(t/5215.1903)|0;this.buffer=new Int32Array(220500)};nf(t,i){for(let i=0;i<t;i++)e.buffer[i]=0;if(i<10)return e.buffer;const s=t/i|0;this.Ax?.reset(),this.mx?.reset();let h=0,n=0,r=0;this.Ix&&this.gx&&(this.Ix.reset(),this.gx.reset(),h=32.768*(this.Ix.end-this.Ix.start)/s|0,n=32.768*this.Ix.start/s|0);let o=0,l=0,a=0;this.Ex&&this._x&&(this.Ex.reset(),this._x.reset(),o=32.768*(this.Ex.end-this.Ex.start)/s|0,l=32.768*this.Ex.start/s|0);for(let t=0;t<5;t++)this.Ax&&0!==this.Cx[t]&&(e.ox[t]=0,e.lx[t]=this.Ox[t]*s,e.ux[t]=(this.Cx[t]<<14)/100|0,e.wx[t]=32.768*(this.Ax.end-this.Ax.start)*Math.pow(1.0057929410678534,this.Tx[t])/s|0,e.yx[t]=32.768*this.Ax.start/s|0);if(this.Ax&&this.mx)for(let i=0;i<t;i++){let s=this.Ax.evaluate(t),c=this.mx.evaluate(t);if(this.Ix&&this.gx){const i=this.Ix.evaluate(t),e=this.gx.evaluate(t);s+=this.Lx(e,r,this.Ix.form)>>1,r+=(i*h>>16)+n}if(this.Ex&&this._x){const i=this.Ex.evaluate(t),s=this._x.evaluate(t);c=c*(32768+(this.Lx(s,a,this.Ex.form)>>1))>>15,a+=(i*o>>16)+l}for(let h=0;h<5;h++)if(0!==this.Cx[h]){const n=i+e.lx[h];n<t&&(e.buffer[n]+=this.Lx(c*e.ux[h]>>15,e.ox[h],this.Ax.form),e.ox[h]+=(s*e.wx[h]>>16)+e.yx[h])}}if(this.release&&this.attack){this.release.reset(),this.attack.reset();let i=0,s=!0;for(let h=0;h<t;h++){const n=this.release.evaluate(t),r=this.attack.evaluate(t);let o;o=s?this.release.start+((this.release.end-this.release.start)*n>>8):this.release.start+((this.release.end-this.release.start)*r>>8),i+=256,i>=o&&(i=0,s=!s),s&&(e.buffer[h]=0)}}if(this.bx>0&&this.vx>0){const i=this.bx*s;for(let s=i;s<t;s++)e.buffer[s]+=e.buffer[s-i]*this.vx/100|0,e.buffer[s]|=0}for(let i=0;i<t;i++)e.buffer[i]<-32768&&(e.buffer[i]=-32768),e.buffer[i]>32767&&(e.buffer[i]=32767);return e.buffer}Lx(t,i,s){return 1===s?(32767&i)<16384?t:-t:2===s?e.sin[32767&i]*t>>14:3===s?((32767&i)*t>>14)-t:4===s?e.ZT[i/2607&32767]*t:0}read(t){this.Ax=new h,this.Ax.read(t),this.mx=new h,this.mx.read(t),0!==t.fA&&(t.qc--,this.Ix=new h,this.Ix.read(t),this.gx=new h,this.gx.read(t)),0!==t.fA&&(t.qc--,this.Ex=new h,this.Ex.read(t),this._x=new h,this._x.read(t)),0!==t.fA&&(t.qc--,this.release=new h,this.release.read(t),this.attack=new h,this.attack.read(t));for(let i=0;i<10;i++){const s=t.mO;if(0===s)break;this.Cx[i]=s,this.Tx[i]=t.jR,this.Ox[i]=t.mO}this.bx=t.mO,this.vx=t.mO,this.length=t.aA,this.start=t.aA}}var n=s(1069),r=s(3867);class o{static np=new Int32Array(1e3);static Rx=null;static Sx=null;static Mx=new r.As(1e3,null);kx=new r.As(10,null);xx=0;loopEnd=0;static mc=t=>{const i=new n.A(t.read('sounds.dat'));for(this.Rx=new Uint8Array(441e3),this.Sx=new n.A(this.Rx),e.init();;){const t=i.aA;if(65535===t)break;const s=new o;s.read(i),this.Mx[t]=s,this.np[t]=s.trim()}};static nf=(t,i)=>{if(!this.Mx[t])return null;const s=this.Mx[t];return s?.Dx(i)??null};read(t){for(let i=0;i<10;i++)0!==t.fA&&(t.qc--,this.kx[i]=new e,this.kx[i]?.read(t));this.xx=t.aA,this.loopEnd=t.aA}trim(){let t=9999999;for(let i=0;i<10;i++)this.kx[i]&&(this.kx[i].start/20|0)<t&&(t=this.kx[i].start/20|0);if(this.xx<this.loopEnd&&(this.xx/20|0)<t&&(t=this.xx/20|0),9999999===t||0===t)return 0;for(let i=0;i<10;i++)this.kx[i]&&(this.kx[i].start-=20*t);return this.xx<this.loopEnd&&(this.xx-=20*t,this.loopEnd-=20*t),t}Dx(t){const i=this.nf(t);return o.Sx.qc=0,o.Sx?.p4(1380533830),o.Sx?.qk(i+36),o.Sx?.p4(1463899717),o.Sx?.p4(1718449184),o.Sx?.qk(16),o.Sx?.Zk(1),o.Sx?.Zk(1),o.Sx?.qk(22050),o.Sx?.qk(22050),o.Sx?.Zk(1),o.Sx?.Zk(8),o.Sx?.p4(1684108385),o.Sx?.qk(i),o.Sx.qc+=i,o.Sx}nf(t){let i=0;for(let t=0;t<10;t++)this.kx[t]&&this.kx[t].length+this.kx[t].start>i&&(i=this.kx[t].length+this.kx[t].start);if(0===i)return 0;let s=22050*i/1e3|0,h=22050*this.xx/1e3|0,e=22050*this.loopEnd/1e3|0;(h<0||e<0||e>s||h>=e)&&(t=0);let n=s+(e-h)*(t-1);for(let t=44;t<n+44;t++)o.Rx&&(o.Rx[t]=-128);for(let t=0;t<10;t++)if(this.kx[t]){const i=22050*this.kx[t].length/1e3|0,s=22050*this.kx[t].start/1e3|0,h=this.kx[t].nf(i,this.kx[t].length);for(let t=0;t<i;t++)o.Rx&&(o.Rx[t+s+44]+=h[t]>>8<<24>>24)}if(t>1){h+=44,e+=44,s+=44,n+=44;const i=n-s;for(let t=s-1;t>=e;t--)o.Rx&&(o.Rx[t+i]=o.Rx[t]);for(let i=1;i<t;i++){const t=(e-h)*i;for(let i=h;i<e;i++)o.Rx&&(o.Rx[i+t]=o.Rx[i])}n-=44}return n}}},3867:(t,i,s)=>{s.d(i,{cc:()=>a,ac:()=>o,As:()=>h,OO:()=>e,vr:()=>n,_O:()=>r,zn:()=>l});class h extends Array{constructor(t,i){super(t);for(let s=0;s<t;s++)this[s]=i}}class e extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=s}}}class n extends Array{constructor(t,i,s,h){super(t);for(let e=0;e<t;e++){this[e]=new Array(i);for(let t=0;t<i;t++){this[e][t]=new Array(s);for(let i=0;i<s;i++)this[e][t][i]=h}}}}class r extends Array{constructor(t,i,s,h,e){super(t);for(let n=0;n<t;n++){this[n]=new Array(i);for(let t=0;t<i;t++){this[n][t]=new Array(s);for(let i=0;i<s;i++){this[n][t][i]=new Array(h);for(let s=0;s<h;s++)this[n][t][i][s]=e}}}}}class o extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=new Uint8Array(s)}}}class l extends Array{constructor(t,i){super(t);for(let s=0;s<t;s++)this[s]=new Int32Array(i)}}class a extends Array{constructor(t,i,s){super(t);for(let h=0;h<t;h++){this[h]=new Array(i);for(let t=0;t<i;t++)this[h][t]=new Int32Array(s)}}}},9234:(t,i,s)=>{s.d(i,{Qk:()=>l,tl:()=>e,$k:()=>o,il:()=>h,nc:()=>n,Uc:()=>r,Jk:()=>a});const h=async t=>new Promise((i=>setTimeout(i,t))),e=async t=>new Int8Array(await(await fetch(t)).arrayBuffer()),n=async t=>(await fetch(t)).text();function r(t,i,s,h,e){for(;e--;)s[h++]=t[i++]}function o(t){let i=0n;for(let s=0;s<t.length;s++)i=i<<8n|BigInt(t[s]);return i}function l(t){const i=[];for(;t>0n;)i.unshift(Number(0xffn&t)),t>>=8n;return 128&i[0]&&i.unshift(0),new Uint8Array(i)}function a(t,i,s){let h=1n;for(;i>0n;)i%2n===1n&&(h=h*t%s),t=t*t%s,i>>=1n;return h}},7953:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(1069);class e{static Nx=new Uint16Array(['d','o','t'].join('').split('').map((t=>t.charCodeAt(0))));static Px=new Uint16Array(['(','a',')'].join('').split('').map((t=>t.charCodeAt(0))));static Fx=new Uint16Array(['s','l','a','s','h'].join('').split('').map((t=>t.charCodeAt(0))));static Ux=['cook',"cook's",'cooks','seeks','sheet'];static Bx=[];static Gx=[];static Hx=[];static Wx=[];static Yx=[];static Vx=[];static mc=t=>{const i=new h.A(t.read('fragmentsenc.txt')),s=new h.A(t.read('badenc.txt')),e=new h.A(t.read('domainenc.txt')),n=new h.A(t.read('tldlist.txt'));this.read(s,e,i,n)};static filter=t=>{const i=[...t];this.format(i);const s=i.join('').trim(),h=s.toLowerCase(),e=[...h];this.Kx(e),this.Xx(e),this.jx(e),this.zx(e);for(let t=0;t<this.Ux.length;t++){let i=-1;for(;-1!==(i=h.indexOf(this.Ux[t],i+1));){const s=[...this.Ux[t]];for(let t=0;t<s.length;t++)e[t+i]=s[t]}}return this.Zx(e,[...s]),this.qx(e),e.join('').trim()};static read=(t,i,s,h)=>{this.$x(t),this.Jx(i),this.Qx(s),this.tD(h)};static tD=t=>{const i=t.el;for(let s=0;s<i;s++)this.Gx[s]=t.fA,this.Bx[s]=new Uint16Array(t.fA).map((()=>t.fA))};static $x=t=>{const i=t.el;for(let s=0;s<i;s++){this.Hx[s]=new Uint16Array(t.fA).map((()=>t.fA));const i=new Array(t.fA).fill([]).map((()=>[t.dA,t.dA]));i.length>0&&(this.Wx[s]=i)}};static Jx=t=>{const i=t.el;for(let s=0;s<i;s++)this.Yx[s]=new Uint16Array(t.fA).map((()=>t.fA))};static Qx=t=>{const i=t.el;for(let s=0;s<i;s++)this.Vx[s]=t.aA};static Kx=t=>{const i=[...t],s=[...t];this.iD(null,i,this.Nx),this.iD(null,s,this.Fx);for(let h=0;h<this.Bx.length;h++)this.sD(s,this.Gx[h],t,this.Bx[h],i)};static Xx=t=>{for(let i=0;i<2;i++)for(let i=this.Hx.length-1;i>=0;i--)this.iD(this.Wx[i],t,this.Hx[i])};static jx=t=>{const i=[...t],s=[...t];this.iD(null,i,this.Px),this.iD(null,s,this.Nx);for(let h=this.Yx.length-1;h>=0;h--)this.hD(s,i,this.Yx[h],t)};static zx=t=>{for(let i=0;i<t.length;){const s=this.eD(t,i);if(-1===s)return;let h=!1;for(let e=i;e>=0&&e<s&&!h;e++)this.nD(t[e])||this.rD(t[e])||(h=!0);let e=0;h&&(e=0),0===e&&(e=1,i=s);let n=0;for(let h=s;h<t.length&&h<i;h++)n=10*n+t[h].charCodeAt(0)-48;n<=255&&i-s<=8?e++:e=0,4===e&&(this.oD(s,i,t),e=0),i=this.lD(i,t)}};static aD=t=>{if(this.cD(t))return!0;const i=this.fD(t),s=this.Vx,h=s.length;if(i===s[0]||i===s[h-1])return!0;let e=0,n=h-1;for(;e<=n;){const t=(e+n)/2|0;if(i===s[t])return!0;i<s[t]?n=t-1:e=t+1}return!1};static fD=t=>{if(t.length>6)return 0;let i=0;for(let s=0;s<t.length;s++){const h=t[t.length-s-1];if(this.uD(h))i=38*i+h.charCodeAt(0)+1-'a'.charCodeAt(0);else if("'"===h)i=38*i+27;else if(this.dD(h))i=38*i+h.charCodeAt(0)+28-'0'.charCodeAt(0);else if('\0'!==h)return 0}return i};static eD=(t,i)=>{for(let s=i;s<t.length&&s>=0;s++)if(this.dD(t[s]))return s;return-1};static lD=(t,i)=>{for(let s=t;s<i.length&&s>=0;s++)if(!this.dD(i[s]))return s;return i.length};static wD=(t,i,s)=>i===s||'o'===i&&'0'===s?1:'o'===i&&'('===s&&')'===t?2:'c'!==i||'('!==s&&'<'!==s&&'['!==s?'e'===i&&''===s||'s'===i&&'$'===s||'l'===i&&'i'===s?1:0:1;static hD=(t,i,s,h)=>{const e=s.length,n=h.length;for(let r=0;r<=n-e;r++){const{yD:e,AD:n}=this.pD(r,s,h);if(!e)continue;const o=this.mD(r,h,3,i,['@']),l=this.ID(n-1,h,3,t,['.',',']);(o>2||l>2)&&this.oD(r,n,h)}};static pD=(t,i,s)=>{const h=i.length;let e=t,n=0;for(;e<s.length&&n<h;){const r=s[e],o=e+1<s.length?s[e+1]:'\0',l=this.wD(o,String.fromCharCode(i[n]),r);if(l>0)e+=l,n++;else{if(0===n)break;const s=this.wD(o,String.fromCharCode(i[n-1]),r);if(s>0)e+=s,1===n&&t++;else{if(n>=h||!this.nD(r))break;e++}}}return{yD:n>=h,AD:e}};static iD=(t,i,s)=>{if(!(s.length>i.length))for(let h=0;h<=i.length-s.length;h++){let e=h;const{AD:n,gD:r,ED:o,_D:l,CD:a}=this.TD(i,s,e);e=n;let c=i[e],f=e+1<i.length?i[e+1]:'\0';if(!(r>=s.length)||l&&a)continue;let u,d=!0;if(o){let t=!1,s=!1;if((h-1<0||this.nD(i[h-1])&&"'"!==i[h-1])&&(t=!0),(e>=i.length||this.nD(i[e])&&"'"!==i[e])&&(s=!0),!t||!s){let s=!1;for(u=h-2,t&&(u=h);!s&&u<e;){if(u>=0&&(!this.nD(i[u])||"'"===i[u])){const t=[];let h;for(h=0;h<3&&u+h<i.length&&(!this.nD(i[u+h])||"'"===i[u+h]);h++)t[h]=i[u+h];let e=!0;0===h&&(e=!1),h<3&&u-1>=0&&(!this.nD(i[u-1])||"'"===i[u-1])&&(e=!1),e&&!this.aD(t)&&(s=!0)}u++}s||(d=!1)}}else{c=' ',h-1>=0&&(c=i[h-1]),f=' ',e<i.length&&(f=i[e]);const s=this.OD(c),n=this.OD(f);t&&this.vD(s,t,n)&&(d=!1)}if(!d)continue;let w=0,y=0;for(let t=h;t<e;t++)this.dD(i[t])?w++:this.bD(i[t])&&y++;w<=y&&this.oD(h,e,i)}};static TD=(t,i,s)=>{let h=s,e=0,n=0,r=!1,o=!1,l=!1;for(;h<t.length&&(!o||!l)&&!(h>=t.length||o&&l);){const a=t[h],c=h+1<t.length?t[h+1]:'\0';let f;if(e<i.length&&(f=this.LD(c,String.fromCharCode(i[e]),a))>0)1===f&&this.dD(a)&&(o=!0),2===f&&(this.dD(a)||this.dD(c))&&(o=!0),h+=f,e++;else{if(0===e)break;let t;if((t=this.LD(c,String.fromCharCode(i[e-1]),a))>0)h+=t;else{if(e>=i.length||!this.rD(a))break;if(this.nD(a)&&"'"!==a&&(r=!0),this.dD(a)&&(l=!0),h++,n++,(100*n/(h-s)|0)>90)break}}}return{AD:h,gD:e,ED:r,_D:o,CD:l}};static LD=(t,i,s)=>{if(i===s)return 1;if(i>='a'&&i<='m'){if('a'===i)return'4'!==s&&'@'!==s&&'^'!==s?'/'===s&&'\\'===t?2:0:1;if('b'===i)return'6'!==s&&'8'!==s?'1'===s&&'3'===t?2:0:1;if('c'===i)return'('!==s&&'<'!==s&&'{'!==s&&'['!==s?0:1;if('d'===i)return'['===s&&')'===t?2:0;if('e'===i)return'3'!==s&&''!==s?0:1;if('f'===i)return'p'===s&&'h'===t?2:''===s?1:0;if('g'===i)return'9'!==s&&'6'!==s?0:1;if('h'===i)return'#'===s?1:0;if('i'===i)return'y'!==s&&'l'!==s&&'j'!==s&&'1'!==s&&'!'!==s&&':'!==s&&';'!==s&&'|'!==s?0:1;if('j'===i)return 0;if('k'===i)return 0;if('l'===i)return'1'!==s&&'|'!==s&&'i'!==s?0:1;if('m'===i)return 0}if(i>='n'&&i<='z'){if('n'===i)return 0;if('o'===i)return'0'!==s&&'*'!==s?'('===s&&')'===t||'['===s&&']'===t||'{'===s&&'}'===t||'<'===s&&'>'===t?2:0:1;if('p'===i)return 0;if('q'===i)return 0;if('r'===i)return 0;if('s'===i)return'5'!==s&&'z'!==s&&'$'!==s&&'2'!==s?0:1;if('t'===i)return'7'!==s&&'+'!==s?0:1;if('u'===i)return'v'===s?1:'\\'===s&&'/'===t||'\\'===s&&'|'===t||'|'===s&&'/'===t?2:0;if('v'===i)return'\\'===s&&'/'===t||'\\'===s&&'|'===t||'|'===s&&'/'===t?2:0;if('w'===i)return'v'===s&&'v'===t?2:0;if('x'===i)return')'===s&&'('===t||'}'===s&&'{'===t||']'===s&&'['===t||'>'===s&&'<'===t?2:0;if('y'===i)return 0;if('z'===i)return 0}return i>='0'&&i<='9'?'0'===i?'o'===s||'O'===s?1:'('===s&&')'===t||'{'===s&&'}'===t||'['===s&&']'===t?2:0:'1'===i&&'l'===s?1:0:','===i?'.'===s?1:0:'.'===i?','===s?1:0:'!'===i&&'i'===s?1:0};static vD=(t,i,s)=>{let h=0,e=i.length-1;for(;h<=e;){const n=(h+e)/2|0;if(i[n][0]===t&&i[n][1]===s)return!0;t<i[n][0]||t===i[n][0]&&s<i[n][1]?e=n-1:h=n+1}return!1};static OD=t=>this.uD(t)?t.charCodeAt(0)+1-'a'.charCodeAt(0):"'"===t?28:this.dD(t)?t.charCodeAt(0)+29-'0'.charCodeAt(0):27;static sD=(t,i,s,h,e)=>{if(!(h.length>s.length))for(let n=0;n<=s.length-h.length;n++){const{AD:r,RD:o}=this.SD(s,h,n);if(o<h.length)continue;let l=!1;const a=this.mD(n,s,3,e,[',','.']),c=this.ID(r-1,s,5,t,['\\','/']);if(1===i&&a>0&&c>0&&(l=!0),2===i&&(a>2&&c>0||a>0&&c>2)&&(l=!0),3===i&&a>0&&c>2&&(l=!0),!l)continue;let f,u=n,d=r-1,w=!1;if(a>2){if(4===a)for(w=!1,f=n-1;f>=0;f--)if(w){if('*'!==e[f])break;u=f}else'*'===e[f]&&(u=f,w=!0);for(w=!1,f=u-1;f>=0;f--)if(w){if(this.nD(s[f]))break;u=f}else this.nD(s[f])||(w=!0,u=f)}if(c>2){if(4===c)for(w=!1,f=d+1;f<s.length;f++)if(w){if('*'!==t[f])break;d=f}else'*'===t[f]&&(d=f,w=!0);for(w=!1,f=d+1;f<s.length;f++)if(w){if(this.nD(s[f]))break;d=f}else this.nD(s[f])||(w=!0,d=f)}this.oD(u,d+1,s)}};static SD=(t,i,s)=>{let h=0;for(;s<t.length&&h<i.length;){const e=t[s],n=s+1<t.length?t[s+1]:'\0';let r;if((r=this.wD(n,String.fromCharCode(i[h]),e))>0)s+=r,h++;else{if(0===h)break;let t;if((t=this.wD(n,String.fromCharCode(i[h-1]),e))>0)s+=t;else{if(!this.nD(e))break;s++}}}return{AD:s,RD:h}};static nD=t=>!this.bD(t)&&!this.dD(t);static rD=t=>!this.uD(t)||('v'===t||'x'===t||'j'===t||'q'===t||'z'===t);static bD=t=>this.uD(t)||this.MD(t);static dD=t=>t>='0'&&t<='9';static uD=t=>t>='a'&&t<='z';static MD=t=>t>='A'&&t<='Z';static cD=t=>{for(let i=0;i<t.length;i++)if(!this.dD(t[i])&&'\0'!==t[i])return!1;return!0};static oD=(t,i,s)=>{for(let h=t;h<i;h++)s[h]='*'};static kD=(t,i)=>{let s=0;for(let h=i-1;h>=0&&this.nD(t[h]);h--)'*'===t[h]&&s++;return s};static xD=(t,i)=>{let s=0;for(let h=i+1;h<t.length&&this.nD(t[h]);h++)'*'===t[h]&&s++;return s};static DD=(t,i,s,h,e)=>(e?this.kD(i,s):this.xD(i,s))>=h?4:this.nD(e?t[s-1]:t[s+1])?1:0;static mD=(t,i,s,h,e)=>{if(0===t)return 2;for(let s=t-1;s>=0&&this.nD(i[s]);s--)if(e.includes(i[s]))return 3;return this.DD(i,h,t,s,!0)};static ID=(t,i,s,h,e)=>{if(t+1===i.length)return 2;for(let s=t+1;s<i.length&&this.nD(i[s]);s++)if(e.includes(i[s]))return 3;return this.DD(i,h,t,s,!1)};static format=t=>{let i=0;for(let s=0;s<t.length;s++)this.ND(t[s])?t[i]=t[s]:t[i]=' ',0!==i&&' '===t[i]&&' '===t[i-1]||i++;for(let s=i;s<t.length;s++)t[s]=' '};static ND=t=>t>=' '&&t<=''||' '===t||'\n'===t||'\t'===t||''===t||''===t;static Zx=(t,i)=>{for(let s=0;s<i.length;s++)'*'!==t[s]&&this.MD(i[s])&&(t[s]=i[s])};static qx=t=>{let i=!0;for(let s=0;s<t.length;s++){const h=t[s];this.bD(h)?i?this.uD(h)&&(i=!1):this.MD(h)&&(t[s]=String.fromCharCode(h.charCodeAt(0)+'a'.charCodeAt(0)-65)):i=!0}}}},2646:(t,i,s)=>{s.d(i,{A:()=>h});class h{static PD=[' ','e','t','a','o','i','h','n','s','r','d','l','u','m','w','c','y','f','g','p','b','v','k','x','j','q','z','0','1','2','3','4','5','6','7','8','9',' ','!','?','.',',',':',';','(',')','-','&','*','\\','\'','@','#','+','=','','$','%','"','[',']'];static FD=[];static mc=(t,i)=>{let s,h=0,e=-1;for(let n=0;n<i&&h<100;n++){const i=t.fA;s=i>>4&15,-1!==e?(this.FD[h++]=this.PD[(e<<4)+s-195],e=-1):s<13?this.FD[h++]=this.PD[s]:e=s,s=15&i,-1!==e?(this.FD[h++]=this.PD[(e<<4)+s-195],e=-1):s<13?this.FD[h++]=this.PD[s]:e=s}let n=!0;for(let t=0;t<h;t++){const i=this.FD[t];n&&i>='a'&&i<='z'&&(this.FD[t]=i.toUpperCase(),n=!1),'.'!==i&&'!'!==i||(n=!0)}return this.FD.slice(0,h).join('')};static Sy=(t,i)=>{i.length>80&&(i=i.substring(0,80)),i=i.toLowerCase();let s=-1;for(let h=0;h<i.length;h++){const e=i.charAt(h);let n=0;for(let t=0;t<this.PD.length;t++)if(e===this.PD[t]){n=t;break}n>12&&(n+=195),-1===s?n<13?s=n:t.p1(n):n<13?(t.p1((s<<4)+n),s=-1):(t.p1((s<<4)+(n>>4)),s=15&n)}-1!==s&&t.p1(s<<4)}}},9081:(t,i,s)=>{function h(){const t=window.location,i=document.createElement('link');i.rel='manifest',i.href=`${t.href.substring(0,t.href.indexOf(t.search))}/manifest.json`,document.head.appendChild(i)}s.d(i,{J:()=>h})},1908:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(9763);class e{static UD=null;static load=async t=>{this.UD=await(0,h.F)(new WebAssembly.Module(t),{env:void 0})};static read=(t,i,s,h)=>{if(!this.UD)throw new Error('bz2 not found!!');return Int8Array.from(this.UD.read(t,i,s,h))}}},123:(t,i,s)=>{let h;async function e(t,i){n(i);try{const i=await window.audioContext.decodeAudioData(Uint8Array.from(t).buffer);let s=window.audioContext.createBufferSource();s.buffer=i,s.connect(h),s.start()}catch(t){console.log(t)}}function n(t){h||(h=window.audioContext.createGain(),h.connect(window.audioContext.destination)),h.gain.value=t/256}function r(t,i,s){window._tinyMidiPlay&&window._tinyMidiPlay(t,i/256,s)}function o(t){window._tinyMidiVolume&&window._tinyMidiVolume(t/256)}function l(t){window._tinyMidiStop&&window._tinyMidiStop(t)}s.d(i,{rf:()=>e,nl:()=>r,am:()=>n,No:()=>l,lm:()=>o})},2604:(t,i,s)=>{function h(t,i){var s;(s=document.createElement('a')).href=t,s.download=i,document.body.appendChild(s),s.style='display: none',s.click(),s.remove()}s.d(i,{A:()=>h})},9763:(t,i,s)=>{async function h(t,i={}){const s={env:Object.assign(Object.create(globalThis),i.env||{},{abort(t,i,s,h){t=r(t>>>0),i=r(i>>>0),s>>>=0,h>>>=0,(()=>{throw Error(`${t} in ${i}:${s}:${h}`)})()}})},{exports:h}=await WebAssembly.instantiate(t,s),e=h.memory||i.env.memory,n=Object.setPrototypeOf({read:(t,i,s,n)=>(i=function(t,i,s,n,r){if(null==n)return 0;const o=n.length,l=h.__pin(h.__new(o<<s,i))>>>0;if(r)new r(e.buffer,l,o).set(n);else for(let i=0;i<o;i++)t(l+(i<<s>>>0),n[i]);return h.__unpin(l),l}(l,6,0,i,Int8Array)||function(){throw TypeError("value must not be null")}(),function(t,i,s){if(!s)return null;const h=function(t){try{return o.getUint32(t,!0)}catch{return o=new DataView(e.buffer),o.getUint32(t,!0)}}(s-4)>>>i,n=new Array(h);for(let e=0;e<h;++e)n[e]=t(s+(e<<i>>>0));return n}(a,0,h.read(t,i,s,n)>>>0))},h);function r(t){if(!t)return null;const i=t+new Uint32Array(e.buffer)[t-4>>>2]>>>1,s=new Uint16Array(e.buffer);let h=t>>>1,n="";for(;i-h>1024;)n+=String.fromCharCode(...s.subarray(h,h+=1024));return n+String.fromCharCode(...s.subarray(h,i))}let o=new DataView(e.buffer);function l(t,i){try{o.setUint8(t,i,!0)}catch{o=new DataView(e.buffer),o.setUint8(t,i,!0)}}function a(t){try{return o.getInt8(t,!0)}catch{return o=new DataView(e.buffer),o.getInt8(t,!0)}}return n}s.d(i,{F:()=>h})},9896:(t,i,s)=>{var h=s(8151);!function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext&&(window.audioContext=new window.AudioContext);var t=function(i){if(window.audioContext){var s=window.audioContext.createBuffer(1,1,22050),h=window.audioContext.createBufferSource();h.buffer=s,h.connect(window.audioContext.destination),h.start?h.start(0):h.play?h.play(0):h.noteOn&&h.noteOn(0)}document.removeEventListener('touchstart',t),document.removeEventListener('touchend',t),document.removeEventListener('click',t)};document.addEventListener('touchstart',t),document.addEventListener('touchend',t),document.addEventListener('click',t)}(),(async()=>{const t=2,i=44100;let s=new Float32Array,e=window.audioContext.createGain();e.gain.setValueAtTime(.1,window.audioContext.currentTime),e.connect(window.audioContext.destination);let n=window.audioContext.currentTime,r=[];const o=new h.A({BD:30,GD:t=>{let i=new Float32Array(t.buffer),h=new Float32Array(s.length+i.length);h.set(s,0),h.set(i,s.length),s=h},HD:t=>{},bufferSize:102400});await o.init();const l=await fetch('./SCC1_Florestan.sf2'),a=new Uint8Array(await l.arrayBuffer());function c(){if(!window.audioContext||!s.length)return;let h=window.audioContext.createBufferSource();const o=s.length/t,l=window.audioContext.createBuffer(t,o,i);for(let i=0;i<t;i++){const h=l.getChannelData(i);let e=i;for(let i=0;i<o;i++)h[i]=s[e],e+=t}n<window.audioContext.currentTime&&(n=window.audioContext.currentTime),h.buffer=l,h.connect(e),h.start(n),r.push(h),n+=l.duration,s=new Float32Array}let f;function u(){if(f&&clearInterval(f),s=new Float32Array,r.length){let t=e.gain.value;e.gain.setValueAtTime(0,window.audioContext.currentTime),r.forEach((t=>{t.stop(window.audioContext.currentTime)})),r=[],e.gain.setValueAtTime(t,window.audioContext.currentTime)}}function d(t,i){-1!==t&&window._tinyMidiVolume(t),n=window.audioContext.currentTime,f=setInterval(c,250),o.WD(i)}o.YD(a),window._tinyMidiStop=async t=>{t?function(t){const i=window.audioContext.currentTime;e.gain.cancelScheduledValues(i),e.gain.setTargetAtTime(0,i,.5),setTimeout(t,2e3)}((()=>{u()})):u()},window._tinyMidiVolume=(t=1)=>{e.gain.setValueAtTime(t,window.audioContext.currentTime)},window._tinyMidiPlay=async(t,i,s)=>{t&&(await window._tinyMidiStop(s),s?setTimeout((()=>{d(i,t)}),2e3):d(i,t))}})()},8151:(t,i,s)=>{s.d(i,{A:()=>e});var h=s(5473);const e=class{constructor(t={}){this.VD=void 0,this.KD=0,this.XD=0,this.jD=0,this.BD=t.BD||100,this.sampleRate=t.sampleRate||44100,this.zD=t.zD||2,this.gain=t.gain||0,t.bufferSize?this.bufferSize=t.bufferSize:this.ZD(1),this.GD=t.GD||(()=>{}),this.HD=t.HD||(()=>{}),this.qD=void 0,this.test=0}async init(){if(!this.VD){if('undefined'!=typeof process){const{$D:t}=await import('path'),{JD:i}=await import('module');globalThis.__dirname=t("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js"),globalThis.require=i("file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/index.js")}this.VD=await(0,h.A)(),this.QD=this.VD._malloc(this.bufferSize),this.tN=this.VD._malloc(8)}}ZD(t){this.bufferSize=4*this.sampleRate*this.zD*t}iN(){if(!this.VD)throw new Error(`${this.constructor.name} not initalized. call .init()`)}YD(t){this.iN();const{_malloc:i,_free:s,_tsf_load_memory:h,_tsf_set_output:e,_tsf_channel_set_bank_preset:n,_tsf_set_max_voices:r,_tsf_channel_set_presetnumber:o}=this.VD;s(this.KD),this.KD=i(t.length),this.VD.HEAPU8.set(t,this.KD),this.XD=h(this.KD,t.length),e(this.XD,2===this.zD?0:2,this.sampleRate,this.gain)}sN(){this.iN();const t=new Uint8Array(this.bufferSize);return t.set(this.VD.HEAPU8.subarray(this.QD,this.QD+this.bufferSize)),t}hN(t){const{_malloc:i,_free:s,_tml_load_memory:h}=this.VD;return s(this.jD),this.jD=i(t.length),this.VD.HEAPU8.set(t,this.jD),h(this.jD,t.length)}eN(t){const{_midi_render:i}=this.VD;return i(this.XD,t,this.zD,this.sampleRate,this.QD,this.bufferSize,this.tN)}WD(t){if(this.iN(),!this.XD)throw new Error('no soundfont buffer set. call .setSoundfont');window.clearTimeout(this.qD);const{setValue:i,getValue:s}=this.VD;i(this.tN,0,'double'),this.VD._tsf_reset(this.XD),this.VD._tsf_channel_set_bank_preset(this.XD,9,128,0),t[0]==='R'.charCodeAt(0)&&(t=t.slice(20));let h=this.hN(t);const e=()=>{h=this.eN(h);const t=this.sN();this.GD(t),h?this.qD=setTimeout(e,this.BD):this.HD(s(this.tN,'double'))};this.qD=setTimeout(e,16)}}},8227:(t,i,s)=>{t.exports=s.p+"9f86b5397894e28b5ae2.wasm"},5473:(t,i,s)=>{var h;s.d(i,{A:()=>e});const e=(h="file:///home/runner/work/Client2/Client2/src/js/vendor/tinymidipcm/tinymidipcm.mjs",function(t){var i,e,n=void 0!==(t=t||{})?t:{};n.ready=new Promise((function(t,s){i=t,e=s})),["_tsf_load_memory","_tsf_set_output","_tsf_channel_set_bank_preset","_tsf_set_max_voices","_tsf_channel_set_presetnumber","_tsf_reset","_tsf_close","_tml_load_memory","_midi_render","_malloc","_realloc","_free","_fflush","onRuntimeInitialized"].forEach((t=>{Object.getOwnPropertyDescriptor(n.ready,t)||Object.defineProperty(n.ready,t,{get:()=>j('You are getting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js'),set:()=>j('You are setting '+t+' on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js')})}));var r=Object.assign({},n),o=[],l='object'==typeof window,a='function'==typeof importScripts,c='object'==typeof process&&'object'==typeof process.versions&&'string'==typeof process.versions.node,f=!l&&!c&&!a;if(n.ENVIRONMENT)throw new Error('Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)');var u,d,w,y='';if(c){if('undefined'==typeof process||!process.release||'node'!==process.release.name)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');var A,p;y=a?require('path').$D(y)+'/':__dirname+'/';var m=()=>{p||(A=require('fs'),p=require('path'))};u=(t,i)=>(m(),t=p.normalize(t),A.nN(t,i?void 0:'utf8')),w=t=>{var i=u(t,!0);return i.buffer||(i=new Uint8Array(i)),D(i.buffer),i},d=(t,i,s)=>{m(),t=p.normalize(t),A.rN(t,(function(t,h){t?s(t):i(h.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,'/'),o=process.argv.slice(2),process.on('uncaughtException',(function(t){if(!(t instanceof et))throw t})),process.on('unhandledRejection',(function(t){throw t})),n.inspect=function(){return'[Emscripten Module object]'}}else if(f){if('object'==typeof process&&'function'==typeof require||'object'==typeof window||'function'==typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');'undefined'!=typeof read&&(u=function(t){return read(t)}),w=function(t){let i;return'function'==typeof readbuffer?new Uint8Array(readbuffer(t)):(i=read(t,'binary'),D('object'==typeof i),i)},d=function(t,i,s){setTimeout((()=>i(w(t))),0)},'undefined'!=typeof scriptArgs?o=scriptArgs:void 0!==arguments&&(o=arguments),'undefined'!=typeof print&&('undefined'==typeof console&&(console={}),console.log=print,console.warn=console.error='undefined'!=typeof printErr?printErr:print)}else{if(!l&&!a)throw new Error('environment detection error');if(a?y=self.location.href:'undefined'!=typeof document&&document.currentScript&&(y=document.currentScript.src),h&&(y=h),y=0!==y.indexOf('blob:')?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf('/')+1):'','object'!=typeof window&&'function'!=typeof importScripts)throw new Error('not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)');u=t=>{var i=new XMLHttpRequest;return i.open('GET',t,!1),i.send(null),i.responseText},a&&(w=t=>{var i=new XMLHttpRequest;return i.open('GET',t,!1),i.responseType='arraybuffer',i.send(null),new Uint8Array(i.response)}),d=(t,i,s)=>{var h=new XMLHttpRequest;h.open('GET',t,!0),h.responseType='arraybuffer',h.onload=()=>{200==h.status||0==h.status&&h.response?i(h.response):s()},h.onerror=s,h.send(null)}}n.print||console.log.bind(console);var I,g,E=n.printErr||console.warn.bind(console);function _(t,i){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{configurable:!0,get:function(){j('Module.'+t+' has been replaced with plain '+i+' (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)')}})}function C(t){return'FS_createPath'===t||'FS_createDataFile'===t||'FS_createPreloadedFile'===t||'FS_unlink'===t||'addRunDependency'===t||'FS_createLazyFile'===t||'FS_createDevice'===t||'removeRunDependency'===t}Object.assign(n,r),r=null,I='fetchSettings',Object.getOwnPropertyDescriptor(n,I)&&j('`Module.'+I+'` was supplied but `'+I+'` not included in INCOMING_MODULE_JS_API'),n.arguments&&(o=n.arguments),_('arguments','arguments_'),n.thisProgram&&n.thisProgram,_('thisProgram','thisProgram'),n.quit&&n.quit,_('quit','quit_'),D(void 0===n.memoryInitializerPrefixURL,'Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.pthreadMainPrefixURL,'Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.cdInitializerPrefixURL,'Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.filePackagePrefixURL,'Module.filePackagePrefixURL option was removed, use Module.locateFile instead'),D(void 0===n.read,'Module.read option was removed (modify read_ in JS)'),D(void 0===n.readAsync,'Module.readAsync option was removed (modify readAsync in JS)'),D(void 0===n.readBinary,'Module.readBinary option was removed (modify readBinary in JS)'),D(void 0===n.setWindowTitle,'Module.setWindowTitle option was removed (modify setWindowTitle in JS)'),D(void 0===n.TOTAL_MEMORY,'Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY'),_('read','read_'),_('readAsync','readAsync'),_('readBinary','readBinary'),_('setWindowTitle','setWindowTitle'),D(!f,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable."),n.wasmBinary&&(g=n.wasmBinary),_('wasmBinary','wasmBinary');var T;n.noExitRuntime;_('noExitRuntime','noExitRuntime'),'object'!=typeof WebAssembly&&j('no native wasm support detected');var O,v,b,L,R,S,M,k,x=!1;function D(t,i){t||j('Assertion failed'+(i?': '+i:''))}function N(t){O=t,n.HEAP8=v=new Int8Array(t),n.HEAP16=L=new Int16Array(t),n.HEAP32=R=new Int32Array(t),n.HEAPU8=b=new Uint8Array(t),n.HEAPU16=new Uint16Array(t),n.HEAPU32=S=new Uint32Array(t),n.HEAPF32=M=new Float32Array(t),n.HEAPF64=k=new Float64Array(t)}'undefined'!=typeof TextDecoder&&new TextDecoder('utf8');var P=5242880;n.TOTAL_STACK&&D(P===n.TOTAL_STACK,'the stack size can no longer be determined at runtime');var F=n.INITIAL_MEMORY||16777216;function U(){if(!x){var t=ft(),i=S[t>>2],s=S[t+4>>2];34821223==i&&2310721022==s||j('Stack overflow! Stack cookie has been overwritten at 0x'+t.toString(16)+', expected hex dwords 0x89BACDFE and 0x2135467, but received 0x'+s.toString(16)+' 0x'+i.toString(16)),1668509029!==S[0]&&j('Runtime error: The application has corrupted its heap memory area (address zero)!')}}_('INITIAL_MEMORY','INITIAL_MEMORY'),D(F>=P,'INITIAL_MEMORY should be larger than TOTAL_STACK, was '+F+'! (TOTAL_STACK='+P+')'),D('undefined'!=typeof Int32Array&&'undefined'!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,'JS engine does not provide full typed array support'),D(!n.wasmMemory,'Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally'),D(16777216==F,'Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically'),function(){var t=new Int16Array(1),i=new Int8Array(t.buffer);if(t[0]=25459,115!==i[0]||99!==i[1])throw'Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)'}();var B=[],G=[],H=[],W=!1;D(Math.imul,'This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),D(Math.fround,'This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),D(Math.clz32,'This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill'),D(Math.trunc,'This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill');var Y=0,V=null,K=null,X={};function j(t){n.onAbort&&n.onAbort(t),E(t='Aborted('+t+')'),x=!0;var i=new WebAssembly.RuntimeError(t);throw e(i),i}var z={error:function(){j('Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with -sFORCE_FILESYSTEM')},init:function(){z.error()},oN:function(){z.error()},lN:function(){z.error()},aN:function(){z.error()},open:function(){z.error()},cN:function(){z.error()},fN:function(){z.error()},uN:function(){z.error()},dN:function(){z.error()},wN:function(){z.error()}};n.FS_createDataFile=z.oN,n.FS_createPreloadedFile=z.lN;var Z,q,$,J,Q='data:application/octet-stream;base64,';function tt(t){return t.startsWith(Q)}function it(t){return t.startsWith('file://')}function st(t,i){return function(){var s=t,h=i;return i||(h=n.asm),D(W,'native function `'+s+'` called before runtime initialization'),h[t]||D(h[t],'exported native function `'+s+'` not found'),h[t].apply(null,arguments)}}function ht(t){try{if(t==Z&&g)return new Uint8Array(g);if(w)return w(t);throw"both async and sync fetching of the wasm failed"}catch(t){j(t)}}function et(t){this.name='ExitStatus',this.message='Program terminated with exit('+t+')',this.status=t}function nt(t){for(;t.length>0;)t.shift()(n)}function rt(t){rt.yN||(rt.yN={}),rt.yN[t]||(rt.yN[t]=1,c&&(t='warning: '+t),E(t))}function ot(t){try{return T.grow(t-O.byteLength+65535>>>16),N(T.buffer),1}catch(i){E('emscripten_realloc_buffer: Attempted to grow heap from '+O.byteLength+' bytes to '+t+' bytes, but got error: '+i)}}n.locateFile?tt(Z='tinymidipcm.wasm')||(q=Z,Z=n.locateFile?n.locateFile(q,y):y+q):Z=new URL(s(8227),s.b).toString();var lt,at={"emscripten_memcpy_big":function(t,i,s){b.copyWithin(t,i,i+s)},"emscripten_resize_heap":function(t){var i=b.length;D((t>>>=0)>i);var s,h,e=2147483648;if(t>e)return E('Cannot enlarge memory, asked to go up to '+t+' bytes, but the limit is '+e+' bytes!'),!1;for(var n=1;n<=4;n*=2){var r=i*(1+.2/n);r=Math.min(r,t+100663296);var o=Math.min(e,(s=Math.max(t,r))+((h=65536)-s%h)%h);if(ot(o))return!0}return E('Failed to grow the heap from '+i+' bytes to '+o+' bytes, not enough memory!'),!1}},ct=(function(){var t,i={'env':at,'wasi_snapshot_preview1':at};function s(t,i){var s,h=t.exports;n.asm=h,D(T=n.asm.memory,"memory not found in wasm exports"),N(T.buffer),D(n.asm.__indirect_function_table,"table not found in wasm exports"),s=n.asm.__wasm_call_ctors,G.unshift(s),function(t){if(Y--,n.monitorRunDependencies&&n.monitorRunDependencies(Y),t?(D(X[t]),delete X[t]):E('warning: run dependency removed without ID'),0==Y&&(null!==V&&(clearInterval(V),V=null),K)){var i=K;K=null,i()}}('wasm-instantiate')}t='wasm-instantiate',Y++,n.monitorRunDependencies&&n.monitorRunDependencies(Y),t?(D(!X[t]),X[t]=1,null===V&&'undefined'!=typeof setInterval&&(V=setInterval((function(){if(x)return clearInterval(V),void(V=null);var t=!1;for(var i in X)t||(t=!0,E('still waiting on run dependencies:')),E('dependency: '+i);t&&E('(end of list)')}),1e4))):E('warning: run dependency added without ID');var h=n;function r(t){D(n===h,'the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?'),h=null,s(t.instance)}function o(t){return function(){if(!g&&(l||a)){if('function'==typeof fetch&&!it(Z))return fetch(Z,{credentials:'same-origin'}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+Z+"'";return t.arrayBuffer()})).catch((function(){return ht(Z)}));if(d)return new Promise((function(t,i){d(Z,(function(i){t(new Uint8Array(i))}),i)}))}return Promise.resolve().then((function(){return ht(Z)}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){E('failed to asynchronously prepare wasm: '+t),it(Z)&&E('warning: Loading from a file URI ('+Z+') is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing'),j(t)}))}if(n.instantiateWasm)try{return n.instantiateWasm(i,s)}catch(t){E('Module.instantiateWasm callback failed with error: '+t),e(t)}(g||'function'!=typeof WebAssembly.instantiateStreaming||tt(Z)||it(Z)||c||'function'!=typeof fetch?o(r):fetch(Z,{credentials:'same-origin'}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(r,(function(t){return E('wasm streaming compile failed: '+t),E('falling back to ArrayBuffer instantiation'),o(r)}))}))).catch(e)}(),n.___wasm_call_ctors=st("__wasm_call_ctors"),n._malloc=st("malloc"),n._free=st("free"),n._tsf_load_memory=st("tsf_load_memory"),n._tsf_close=st("tsf_close"),n._tsf_reset=st("tsf_reset"),n._tsf_set_output=st("tsf_set_output"),n._tsf_set_max_voices=st("tsf_set_max_voices"),n._realloc=st("realloc"),n._tsf_channel_set_presetnumber=st("tsf_channel_set_presetnumber"),n._tsf_channel_set_bank_preset=st("tsf_channel_set_bank_preset"),n._tml_load_memory=st("tml_load_memory"),n._midi_render=st("midi_render"),n.___errno_location=st("__errno_location"),n._fflush=st("fflush"),n._emscripten_stack_init=function(){return(ct=n._emscripten_stack_init=n.asm.emscripten_stack_init).apply(null,arguments)}),ft=(n._emscripten_stack_get_free=function(){return(n._emscripten_stack_get_free=n.asm.emscripten_stack_get_free).apply(null,arguments)},n._emscripten_stack_get_base=function(){return(n._emscripten_stack_get_base=n.asm.emscripten_stack_get_base).apply(null,arguments)},n._emscripten_stack_get_end=function(){return(ft=n._emscripten_stack_get_end=n.asm.emscripten_stack_get_end).apply(null,arguments)});function ut(){var t;ct(),D(!(3&(t=ft()))),S[t>>2]=34821223,S[t+4>>2]=2310721022,S[0]=1668509029}function dt(t){function s(){lt||(lt=!0,n.calledRun=!0,x||(D(!W),W=!0,U(),nt(G),i(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),D(!n._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(U(),n.postRun)for('function'==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)t=n.postRun.shift(),H.unshift(t);var t;nt(H)}()))}t=t||o,Y>0||(ut(),function(){if(n.preRun)for('function'==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)t=n.preRun.shift(),B.unshift(t);var t;nt(B)}(),Y>0||(n.setStatus?(n.setStatus('Running...'),setTimeout((function(){setTimeout((function(){n.setStatus('')}),1),s()}),1)):s(),U()))}if(n.stackSave=st("stackSave"),n.stackRestore=st("stackRestore"),n.stackAlloc=st("stackAlloc"),n.setValue=function(t,i,s="i8"){switch(s.endsWith('*')&&(s='*'),s){case'i1':case'i8':v[0|t]=i;break;case'i16':L[t>>1]=i;break;case'i32':R[t>>2]=i;break;case'i64':J=[i>>>0,($=i,+Math.abs($)>=1?$>0?(0|Math.min(+Math.floor($/4294967296),4294967295))>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],R[t>>2]=J[0],R[t+4>>2]=J[1];break;case'float':M[t>>2]=i;break;case'double':k[t>>3]=i;break;case'*':S[t>>2]=i;break;default:j('invalid type for setValue: '+s)}},n.getValue=function(t,i="i8"){switch(i.endsWith('*')&&(i='*'),i){case'i1':case'i8':return v[0|t];case'i16':return L[t>>1];case'i32':case'i64':return R[t>>2];case'float':return M[t>>2];case'double':return k[t>>3];case'*':return S[t>>2];default:j('invalid type for getValue: '+i)}return null},['run','UTF8ArrayToString','UTF8ToString','stringToUTF8Array','stringToUTF8','lengthBytesUTF8','addOnPreRun','addOnInit','addOnPreMain','addOnExit','addOnPostRun','addRunDependency','removeRunDependency','FS_createFolder','FS_createPath','FS_createDataFile','FS_createPreloadedFile','FS_createLazyFile','FS_createLink','FS_createDevice','FS_unlink','getLEB','getFunctionTables','alignFunctionTables','registerFunctions','prettyPrint','getCompilerSetting','print','printErr','callMain','abort','keepRuntimeAlive','wasmMemory','stackAlloc','stackSave','stackRestore','getTempRet0','setTempRet0','writeStackCookie','checkStackCookie','ptrToString','zeroMemory','stringToNewUTF8','exitJS','getHeapMax','emscripten_realloc_buffer','ENV','ERRNO_CODES','ERRNO_MESSAGES','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','DNS','getHostByName','Protocols','Sockets','getRandomDevice','warnOnce','traverseStack','UNWIND_CACHE','convertPCtoSourceLocation','readAsmConstArgsArray','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','handleException','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','freeTableIndexes','functionsInTableMap','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','PATH','PATH_FS','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16Decoder','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeArrayToMemory','writeAsciiToMemory','SYSCALLS','getSocketFromFD','getSocketAddress','JSEvents','registerKeyEventCallback','specialHTMLTargets','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','currentFullscreenStrategy','restoreOldWindowedStyle','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','demangle','demangleAll','jsStackTrace','stackTrace','ExitStatus','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','dlopenMissingError','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','uncaughtExceptionCount','exceptionLast','exceptionCaught','ExceptionInfo','exception_addRef','exception_decRef','Browser','setMainLoop','wget','FS','MEMFS','TTY','PIPEFS','SOCKFS','_setNetworkCallback','tempFixedLengthArray','miniTempWebGLFloatBuffers','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','GL','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','AL','SDL_unicode','SDL_ttfContext','SDL_audio','SDL','SDL_gfx','GLUT','EGL','GLFW_Window','GLFW','GLEW','IDBStore','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].forEach((function(t){Object.getOwnPropertyDescriptor(n,t)||Object.defineProperty(n,t,{configurable:!0,get:function(){var i="'"+t+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";C(t)&&(i+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),j(i)}})})),['ptrToString','zeroMemory','stringToNewUTF8','exitJS','setErrNo','inetPton4','inetNtop4','inetPton6','inetNtop6','readSockaddr','writeSockaddr','getHostByName','getRandomDevice','traverseStack','convertPCtoSourceLocation','readAsmConstArgs','mainThreadEM_ASM','jstoi_q','jstoi_s','getExecutableName','listenOnce','autoResumeAudioContext','dynCallLegacy','getDynCaller','dynCall','runtimeKeepalivePush','runtimeKeepalivePop','callUserCallback','maybeExit','safeSetTimeout','asmjsMangle','asyncLoad','alignMemory','mmapAlloc','writeI53ToI64','writeI53ToI64Clamped','writeI53ToI64Signaling','writeI53ToU64Clamped','writeI53ToU64Signaling','readI53FromI64','readI53FromU64','convertI32PairToI53','convertI32PairToI53Checked','convertU32PairToI53','getCFunc','ccall','cwrap','uleb128Encode','sigToWasmTypes','generateFuncType','convertJsFunctionToWasm','getEmptyTableSlot','updateTableMap','addFunction','removeFunction','reallyNegative','unSign','strLen','reSign','formatString','intArrayFromString','intArrayToString','AsciiToString','stringToAscii','UTF16ToString','stringToUTF16','lengthBytesUTF16','UTF32ToString','stringToUTF32','lengthBytesUTF32','allocateUTF8','allocateUTF8OnStack','writeStringToMemory','writeAsciiToMemory','getSocketFromFD','getSocketAddress','registerKeyEventCallback','maybeCStringToJsString','findEventTarget','findCanvasEventTarget','getBoundingClientRect','fillMouseEventData','registerMouseEventCallback','registerWheelEventCallback','registerUiEventCallback','registerFocusEventCallback','fillDeviceOrientationEventData','registerDeviceOrientationEventCallback','fillDeviceMotionEventData','registerDeviceMotionEventCallback','screenOrientation','fillOrientationChangeEventData','registerOrientationChangeEventCallback','fillFullscreenChangeEventData','registerFullscreenChangeEventCallback','JSEvents_requestFullscreen','JSEvents_resizeCanvasForFullscreen','registerRestoreOldStyle','hideEverythingExceptGivenElement','restoreHiddenElements','setLetterbox','softFullscreenResizeWebGLRenderTarget','doRequestFullscreen','fillPointerlockChangeEventData','registerPointerlockChangeEventCallback','registerPointerlockErrorEventCallback','requestPointerLock','fillVisibilityChangeEventData','registerVisibilityChangeEventCallback','registerTouchEventCallback','fillGamepadEventData','registerGamepadEventCallback','registerBeforeUnloadEventCallback','fillBatteryEventData','battery','registerBatteryEventCallback','setCanvasElementSize','getCanvasElementSize','getEnvStrings','checkWasiClock','flush_NO_FILESYSTEM','createDyncallWrapper','setImmediateWrapped','clearImmediateWrapped','polyfillSetImmediate','ExceptionInfo','exception_addRef','exception_decRef','setMainLoop','_setNetworkCallback','heapObjectForWebGLType','heapAccessShiftForWebGLHeap','emscriptenWebGLGet','computeUnpackAlignedImageSize','emscriptenWebGLGetTexPixelData','emscriptenWebGLGetUniform','webglGetUniformLocation','webglPrepareUniformLocationsBeforeFirstUse','webglGetLeftBracePos','emscriptenWebGLGetVertexAttrib','writeGLArray','SDL_unicode','SDL_ttfContext','SDL_audio','GLFW_Window','runAndAbortIfError','ALLOC_NORMAL','ALLOC_STACK','allocate'].forEach((function(t){'undefined'==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,t)||Object.defineProperty(globalThis,t,{configurable:!0,get:function(){var i='`'+t+'` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line';C(t)&&(i+='. Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you'),rt(i)}})})),K=function t(){lt||dt(),lt||(K=t)},n.preInit)for('function'==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return dt(),t.ready})}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var s=n[t]={exports:{}};return e[t](s,s.exports,r),s.exports}r.m=e,t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",i="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",h=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},r.a=(e,n,r)=>{var o;r&&((o=[]).d=-1);var l,a,c,f=new Set,u=e.exports,d=new Promise(((t,i)=>{c=i,a=t}));d[i]=u,d[t]=t=>(o&&t(o),f.forEach(t),d.catch((t=>{}))),e.exports=d,n((e=>{var n;l=(e=>e.map((e=>{if(null!==e&&"object"==typeof e){if(e[t])return e;if(e.then){var n=[];n.d=0,e.then((t=>{r[i]=t,h(n)}),(t=>{r[s]=t,h(n)}));var r={};return r[t]=t=>t(n),r}}var o={};return o[t]=t=>{},o[i]=e,o})))(e);var r=()=>l.map((t=>{if(t[s])throw t[s];return t[i]})),a=new Promise((i=>{(n=()=>i(r)).r=0;var s=t=>t!==o&&!f.has(t)&&(f.add(t),t&&!t.d&&(n.r++,t.push(n)));l.map((i=>i[t](s)))}));return n.r?a:r()}),(t=>(t?c(d[s]=t):a(u),h(o)))),o&&o.d<0&&(o.d=0)},r.d=(t,i)=>{for(var s in i)r.o(i,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},r.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r.p="/Client2/",r.b=document.baseURI||self.location.href;r(7906)})();